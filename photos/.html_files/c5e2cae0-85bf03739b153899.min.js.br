"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2f85f688-3a7d-5b3d-a8aa-490f912d6faa")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2677],{578888:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M2 16c0 7.732 6.268 14 14 14 7.732 0 14-6.268 14-14 0-7.732-6.268-14-14-14C8.268 2 2 8.268 2 16M16 0C7.163 0 0 7.163 0 16c0 8.837 7.163 16 16 16 8.837 0 16-7.163 16-16 0-8.837-7.163-16-16-16m0 7.5c.828 0 1.5.672 1.5 1.5v6.252c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5V9c0-.828.672-1.5 1.5-1.5M18 22c0-1.105-.895-2-2-2-1.105 0-2 .895-2 2v.137c0 1.105.895 2 2 2 1.105 0 2-.895 2-2z"/></svg>'},180390:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m17.122 11.64-.012-.003-6.666-1.9 4.91 4.91c.195-.095.414-.147.646-.147.828 0 1.5.672 1.5 1.5 0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.232.053-.45.146-.647L9.743 10.45l1.832 6.39.01.037.008.037C12.015 18.961 13.829 20.5 16 20.5c.494 0 .968-.08 1.411-.225l.585-.193.435.435 1.847 1.847 2.122-2.121-1.865-1.865-.43-.43.184-.58c.137-.43.211-.89.211-1.368 0-2.093-1.43-3.854-3.366-4.356l-.012-.003zm5.985 7.895.707.708-.707.707-2.122 2.121-.707.707-.707-.707-1.847-1.847c-.542.18-1.122.276-1.724.276-2.655 0-4.871-1.882-5.387-4.384L8.325 9.132 8 8l1.133.323 8.252 2.353C19.752 11.29 21.5 13.44 21.5 16c0 .582-.09 1.144-.258 1.67z"/></svg>':null},302396:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M2 3h5v2H2zM1 5V2h7v3h7v9H1zm7 1H2v7h12V6z"/></svg>':null},731272:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M13.5 9h1V7.5c0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5V9H23v15H9V9zm5-1H24v17H8V8h5.5v-.5C13.5 6.12 14.62 5 16 5c1.38 0 2.5 1.12 2.5 2.5zM16 12.5c-1.105 0-2 .895-2 2 0 1.105.895 2 2 2 1.105 0 2-.895 2-2 0-1.105-.895-2-2-2m-3 2c0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3 0 1.212-.718 2.255-1.752 2.729 1.317.503 2.252 1.778 2.252 3.271v.5h-1v-.5c0-1.38-1.12-2.5-2.5-2.5-1.38 0-2.5 1.12-2.5 2.5v.5h-1v-.5c0-1.493.935-2.768 2.252-3.271C13.718 16.755 13 15.712 13 14.5"/></svg>':null},858457:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M14 10.443c0-.35.349-.59.676-.468l2 .75c.195.073.324.26.324.468v3.614c0 .208-.13.395-.324.468l-2 .75c-.327.123-.676-.119-.676-.468zm4 3.057v1.307c0 .625-.388 1.185-.973 1.405l-2 .75c-.98.367-2.027-.358-2.027-1.405v-5.114c0-1.047 1.046-1.772 2.027-1.404l1.973.74V9c0-4.418-3.582-8-8-8-4.418 0-8 3.582-8 8v.778l1.973-.74C3.953 8.671 5 9.396 5 10.443v5.114c0 1.047-1.046 1.772-2.027 1.405l-2-.75c-.585-.22-.973-.78-.973-1.405V9c0-4.97 4.03-9 9-9 4.97 0 9 4.03 9 9zm-17 0v-2.307c0-.208.13-.395.324-.468l2-.75c.327-.123.676.119.676.468v5.114c0 .35-.349.59-.676.468l-2-.75c-.195-.073-.324-.26-.324-.468z"/></svg>':null},690182:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M15.373 22h1.258c.28-.32.616-.597.995-.819 1.479-.862 4.005-.909 5.386.109H24.5v-9.2c0 0-.797-2.25-4.42-2.25-1.875 0-2.902.602-3.456 1.184-.389.407-.545.804-.6.976h-.049c-.054-.172-.21-.57-.599-.976-.554-.582-1.581-1.184-3.456-1.184-3.623 0-4.42 2.25-4.42 2.25v9.19h1.488c1.382-1.019 3.91-.97 5.388-.105.38.223.717.502.997.825m1.127-9.711v8.457q.293-.236.622-.428c.927-.541 2.115-.796 3.241-.787 1.006.008 2.081.227 2.952.759h.185v-7.973l-.03-.05c-.086-.138-.236-.339-.474-.545-.461-.397-1.33-.882-2.916-.882-1.586 0-2.34.483-2.694.835-.189.186-.296.367-.354.49-.029.061-.045.108-.052.131l-.005.017.001-.006.002-.008v-.005l.001-.002v-.002l-.005-.001zm-1 0h-.475l-.005.001v.002l.001.002.001.005.002.008.001.006q.001.001-.005-.017c-.007-.023-.024-.07-.053-.131-.057-.123-.164-.303-.353-.49-.354-.352-1.108-.835-2.694-.835-1.585 0-2.455.485-2.916.882-.238.206-.388.407-.474.545l-.03.05v7.963h.185c.872-.533 1.948-.752 2.954-.759 1.128-.008 2.316.249 3.243.792q.326.191.618.426z"/></svg>':null},1757:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m13 10.098.765.478 8 5 .678.424-.678.424-8 5-.765.478zm1 1.804v8.196L20.557 16z"/></svg>'},809027:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 14h15v1H8z"/></svg>':null},97605:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M15 15v7h1v-7h7v-1h-7V7h-1v7H8v1z"/></svg>':null},100203:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M16.708 6.895c-1.39 0-2.518 1.127-2.518 2.518 0 1.391 1.127 2.52 2.518 2.52 1.391 0 2.52-1.129 2.52-2.52 0-1.39-1.129-2.518-2.52-2.518m-3.314 2.518c0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.315 1.484 3.315 3.314 0 1.65-1.205 3.017-2.781 3.272 2.76.246 4.968 2.38 4.968 5.04v1.565H2.458v-1.565c0-2.66 2.207-4.794 4.968-5.04-1.577-.255-2.781-1.623-2.781-3.272 0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.314 1.484 3.314 3.314 0 1.65-1.204 3.017-2.78 3.272 1.554.138 2.933.875 3.841 1.968.907-1.093 2.283-1.83 3.84-1.968-1.576-.255-2.78-1.623-2.78-3.272M3.253 17.725c0-2.325 2.073-4.268 4.706-4.268 2.633 0 4.706 1.943 4.706 4.268v.77H3.253zm10.207.77h7.954v-.77c0-2.325-2.072-4.268-4.706-4.268-1.63 0-3.055.75-3.897 1.876.414.71.65 1.523.65 2.392v.77zM5.44 9.412c0-1.39 1.128-2.518 2.52-2.518 1.39 0 2.518 1.127 2.518 2.518 0 1.391-1.128 2.52-2.519 2.52-1.391 0-2.519-1.129-2.519-2.52"/></svg>':null},817229:(e,t,a)=>{a.d(t,{A:()=>s});let s=443==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M.2 9h17.6l.2.4v.6H0v-.6zm0 0h17.6l.2.4v.6H0v-.6zM0 17h18v1H0zm0 0h18v1H0zM7 6h4v1H7zm0 0h4v1H7zm0-6h4v1H7zm0 0h4v1H7zm5 3h2.8l3 6h-1.105L14.2 4H12zM6 3H3.2l-3 6h1.105L3.8 4H6zm-6 7h1v7H0zm0 0h1v7H0zm17 0h1v7h-1zm0 0h1v7h-1zM6 0h1v7H6zm0 0h1v7H6zm5 0h1v7h-1zm0 0h1v7h-1z"/></svg>':null},723347:(e,t,a)=>{a.d(t,{$g:()=>c,DI:()=>o,Eh:()=>n,GK:()=>r,J1:()=>d,KV:()=>i,b:()=>s,cr:()=>x,jG:()=>m,kz:()=>u,nW:()=>p,o8:()=>_,u1:()=>l,wv:()=>h});let s="universal_upgrade_sequence--closeButton--Us7fC",r="universal_upgrade_sequence--modalTitle--j-zLx text--fontPos18--rYXJb text--_fontBase--QdLsd",i="universal_upgrade_sequence--modalSubtitle--ucPxW text--fontPos14--OL9Hp text--_fontBase--QdLsd",n="universal_upgrade_sequence--createTeamInput--kWzFx basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="universal_upgrade_sequence--spinner--CvsHJ",d="universal_upgrade_sequence--tileUpgradeButton--GxMSU",o="universal_upgrade_sequence--nextButtonSmall--tUSIb universal_upgrade_sequence--nextButton--F2XJ4",c="universal_upgrade_sequence--createTeamSection--XhWMJ",m="universal_upgrade_sequence--scrollContainer--BQFbB",u="universal_upgrade_sequence--scrollContainerTopBorder--yuAD-",_="universal_upgrade_sequence--scrollContainerBottomBorder--CwNTV",p="universal_upgrade_sequence--teamTileContainer--kS2oM org_self_serve--teamLargeTileContainer--3M0cY",x="universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd",h="universal_upgrade_sequence--lastTeamTile--zfV5W universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd"},468896:(e,t,a)=>{a.d(t,{$y:()=>m,Bb:()=>j,ER:()=>A,Ed:()=>g,Et:()=>r,I1:()=>h,Jo:()=>_,K6:()=>b,M7:()=>s,N5:()=>p,Nd:()=>n,O2:()=>E,Qv:()=>x,Uu:()=>o,W:()=>l,Xq:()=>y,aK:()=>d,cc:()=>v,i9:()=>c,iv:()=>f,jg:()=>T,kH:()=>N,li:()=>i,nm:()=>S,uD:()=>u});let s="org_self_serve_figjam--stepContent--PmiVT",r="org_self_serve_figjam--stepContentTeamCreation--aecM6",i="org_self_serve_figjam--menuContainer--2R9vL",n="org_self_serve_figjam--cancelMenuItem--xWgkC",l="org_self_serve_figjam--pageTitle--FnN-D",d="org_self_serve_figjam--summaryDivider--Mcrvf",o="org_self_serve_figjam--flex--zpEBd",c="org_self_serve_figjam--svgText--d64Nk org_self_serve_figjam--flex--zpEBd",m="org_self_serve_figjam--helpIcon--i-O5F",u="org_self_serve_figjam--textLink--oq58H org_self_serve_figjam--billingSubText--0-Z4w",_="org_self_serve_figjam--confirmationBox---MCFL org_self_serve_figjam--stepRect--eHVrW org_self_serve_figjam--boxBorder--AaC8L",p="org_self_serve_figjam--flexBox--wb7nK",x="org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",h="org_self_serve_figjam--confirmationCharge--V8Lpo org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",g="org_self_serve_figjam--confirmationRow--0-0Jf",y="org_self_serve_figjam--confirmationHomeButton--bokpb text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",f="org_self_serve_figjam--confirmationAmountDue--LoEoe",v="org_self_serve_figjam--confirmationHeading--3108k",S="org_self_serve_figjam--confirmationLoadingText--uJKaf org_self_serve_figjam--msaLabelText--HQg1L",E="org_self_serve_figjam--greenCheck--wvkO-",T="org_self_serve_figjam--confirmationPage---8XoA",j="org_self_serve_figjam--createTeamContainer--o7rw4",N="org_self_serve_figjam--teamsContainer--oOa2W",b="org_self_serve_figjam--teamCheckboxContainer--Mznj-",A="org_self_serve_figjam--selectTeamsIcon--V-xyE"},233790:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>N});var s=a(104076),r=a(716976),i=a(237420),n=a(514223),l=a(555013),d=a(614735),o=a(13543),c=a(640718),m=a(101880),u=a(186180),_=a(652539),p=a(236631),x=a(192075),h=a(239904),g=a(218662),y=a(147046),f=a(483200),v=a(935167),S=a(111297),E=a(412469),T=a(821527);let j=e=>{let t=(0,i.d4)(t=>{let a=v.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,i.d4)(t=>t.teamUserByTeamId[e]||{}),s=(0,i.wA)();r.useEffect(()=>{s(v.Xw({teamId:e}))},[s,e]);let l=t!==n.r.SUCCESS;return r.useEffect(()=>{if(!l){let e=Object.keys(a).length;s(f.Az({numWhiteboardEditors:e})),s(f.js({numDesignEditors:e}))}},[s,l,a]),l};function N({selectedView:e}){let{teamId:t}=e,a=j(t),r=(0,i.wA)(),n=()=>{r(f.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return(0,s.jsx)(S.fu,{name:"Edu Review",properties:{teamId:t},children:(0,s.jsx)("div",{children:(0,s.jsxs)(o.O,{menu:(0,s.jsx)(d.X,{onClick:()=>{r(y.sf({view:"team",teamId:t})),e.onCloseOrComplete?.()},children:(0,s.jsx)(_.B,{svg:T.A,className:"edu_review--modalCloseX--PeJlf",dataTestId:"close-button"})}),children:[(0,s.jsx)("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--p1Flp",children:(0,s.jsx)(g.J,{index:3})}),(0,s.jsxs)("div",{className:p.s.flex.flexColumn.itemsCenter.alignCenter.$,children:[(0,s.jsx)(u.JR,{children:(0,x.tx)("edu.almost_done_everything_look_good")}),(0,s.jsx)(l.Kz,{multiple:4}),(0,s.jsx)(m.x,{isLoading:a,children:()=>(0,s.jsx)(c.o,{children:(0,s.jsx)(h.d,{selectedView:e,onClickConfirm:n,currency:(0,E.LN)(),canSeeBillingAddressExp:!1})})})]})]})})})}},751983:(e,t,a)=>{a.d(t,{C:()=>l,q:()=>n});var s=a(716976),r=a(997477),i=a(958127);function n(){let{getConfig:e}=(0,r.I7)("exp_streamlined_new_user_checkout");return s.useCallback(()=>!!e().getValue("enabled",!1),[e])}function l(e,t){let a=n();return s.useCallback(()=>!!t&&void 0!==e&&(e===i.C6.PRICING_PAGE.id||e===i.C6.PROFESSIONAL_PAGE.id)&&a(),[e,a,t])}},525980:(e,t,a)=>{a.d(t,{s:()=>s});function s(){return!0}},963566:(e,t,a)=>{a.d(t,{f:()=>r});var s=a(716976);function r({tableContainerRef:e}){let[t,a]=s.useState(window.innerHeight),r=()=>{a(window.innerHeight)};s.useEffect(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);let i=e.current?.getBoundingClientRect();return Math.max(t-(i?.top||0)-49-8-56,150)}},367048:(e,t,a)=>{a.d(t,{M:()=>b,x:()=>j});var s=a(716976),r=a(237420),i=a(901014),n=a(219199),l=a(192075),d=a(281684),o=a(58212),c=a(638641),m=a(751983),u=a(688613),_=a(608175),p=a(236753),x=a(111679),h=a(147046),g=a(952385),y=a(443192),f=a(249586),v=a(592726),S=a(176203),E=a(562552),T=a(492073);function j({state:e,cartDispatch:t,teamId:a,entryPoint:i,newUser:n}){let x=(0,r.wA)(),h=(0,v.iZ)(),g=(0,m.C)(i,n),y=function(e){let{tier:t,currency:a,renewalTerm:s,selectedUserSeatTypes:r,selectedTeamIds:i,displayName:n,legalName:l,taxPercent:d,applicablePriceData:o,vatGstId:c,regionalVatGstId:m,stripeCustomerId:u,countBySeatType:x}=e,h=(0,p.s$)(o),{subtotal:g,taxTotal:y,total:f}=(0,p.ZY)({countBySeatType:x,applicablePrices:h,taxPercent:d}),v={selected_user_seat_types:(0,p.VB)(r),billing_interval:s,displayed_cost_breakdown:{subtotal:g,tax_total:y,total:f},displayed_price_keys:(0,p.vm)(o),selected_currency:a,vat_gst_id:c||null,regional_vat_gst_id:m||null,is_cart_rewrite:!0};return t===_.Ju.PRO?{...v,legal_name:l||null,display_name:n||null,count_by_billable_product:x}:{...v,requested_seats:x,org_name:n||l,legal_org_name:l,team_ids:Array.from(i),stripe_customer_id:u||null,new_team_options:0===i.size?{team_name:n||l,add_to_org:!0}:void 0}}(e),f=(0,s.useCallback)(e=>{let a=(0,d.J)(e,e.data?.message||(0,l.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again"));if("CARD_ERROR"!==e.data.reason)return x(o.F.enqueue({type:"checkout-flow-error",message:a,error:!0,preventDismissal:!0,icon:c.zX.WARNING_EXCLAMATION_WITH_TRIANGLE})),{code:u.C.UPGRADE_ERROR,message:a};{let e={code:u.C.CARD_ERROR,message:a};return t({type:u.H.SET_ERROR,payload:{error:e}}),e}},[t,x]);return(0,s.useCallback)(async()=>{if(t({type:u.H.SET_IS_SUBMITTING,payload:{isSubmitting:!0}}),e.tier===_.Ju.PRO){let e=await N({requestBody:y,teamId:a,userId:h.id,reduxDispatch:x,handleError:f,shouldShowStreamlinedNewUserCheckoutUX:g()});if(e)return t({type:u.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}else{let a=await A({requestBody:y,user:h,upsellSource:e.upsellSource,handleError:f,reduxDispatch:x});if(a)return t({type:u.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a}return null},[e.tier,e.upsellSource,t,x,y,a,h,f,g])}async function N({requestBody:e,teamId:t,userId:a,reduxDispatch:s,handleError:r,shouldShowStreamlinedNewUserCheckoutUX:n}){try{let{data:{meta:{team:r}}}=await T.m.createTeamSubscription(t??"",e);r&&s(g.yJ({team:r,userInitiated:!1})),(0,i.sx)("Pro Team Purchased (GTM)"),s(y.b({completed_pro_cart_flow:!0})),n||b({reduxDispatch:s,teamId:r.id,userId:a})}catch(e){return r(e)}return null}function b({reduxDispatch:e,teamId:t,userId:a,showProOnboardingModal:s=!0}){let r=new URLSearchParams(n.Ay.location.search);if(r.get("onCompleteRedirectFileKey")){let a=decodeURIComponent(r.get("onCompleteRedirectFileKey")),s=decodeURIComponent(r.get("onCompleteRedirectNodeId"));e(h.sf({view:"fullscreen",fileKey:a,nodeId:s,teamToMoveFileToOnNavigate:t,editorType:S.nT.Design}))}else e(x._l({workspace:{userId:a,teamId:t,orgId:null},view:{view:"allProjects",isProUpgrade:s}}))}async function A({requestBody:e,user:t,upsellSource:a,handleError:s,reduxDispatch:r}){try{await E.Eh.createNewOrg(e),r(y.b({completed_org_cart_flow:!0})),(0,i.sx)("Self Serve Org Purchased (GTM)"),(0,f.uE)("Self Serve Org Purchased",{user:t},{org_name:e.org_name,upsellSource:a})}catch(e){return s(e)}return null}},688613:(e,t,a)=>{a.d(t,{C:()=>s,H:()=>r});var s=(e=>(e.CARD_ERROR="card_error",e.ESTIMATE_CALCULATION_ERROR="estimate_calculation_error",e.INVALID_PAID_SEAT_TOTAL="invalid_paid_seat_total",e.INVALID_LEGAL_NAME="invalid_legal_name",e.UPGRADE_ERROR="upgrade_error",e))(s||{}),r=(e=>(e.INIT="init",e.ON_TOGGLE_TEAM="on_toggle_team",e.SET_CURRENCY="set_currency",e.SET_ERROR="set_error",e.SET_IS_SUBMITTING="set_is_submitting",e.SET_HAS_DIFFERENT_LEGAL_NAME="set_has_different_legal_name",e.SET_RENEWAL_TERM="set_renewal_term",e.SET_TAX_PERCENT="set_tax_percent",e.UPDATE_ADDITIONAL_SEATS="update_additional_seats",e.UPDATE_DISPLAY_NAME="update_display_name",e.UPDATE_LEGAL_NAME="update_legal_name",e.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS="update_state_from_new_team_selections",e.UPDATE_TO_DEFAULT_SEAT_SELECTIONS="update_to_default_seat_selections",e.UPDATE_USER_SEAT_TYPE="update_user_seat_type",e))(r||{})},138105:(e,t,a)=>{a.d(t,{W:()=>i});var s=a(649693),r=a(599448);function i(e,t,a){if(0===e.length&&a)return{eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{[a.user.id]:{...n(a.user),recommendedSeatTypeByTeamId:{},teamIds:[]}},selectedUserSeatTypes:{[a.user.id]:a.recommended_seat_type?.key??s.ud.EXPERT}};let i=e.reduce((e,t)=>(e[t.id]={...t,eligibleUsers:new Set},e),{}),l=new Set(Object.keys(i)),d={};t.forEach(e=>{let t=e.user,a=t.id;d[a]||(d[a]={...n(t),recommendedSeatTypeByTeamId:{},teamIds:[]}),d[a].recommendedSeatTypeByTeamId[e.team_id]=e.recommended_seat_type?.key??s.Gu.VIEW,d[a].teamIds.push(e.team_id),i[e.team_id]&&i[e.team_id].eligibleUsers.add(a)});let o=(0,r.h)({eligibleTeamsByTeamId:i,selectedTeamIds:l,eligibleUsersByUserId:d,selectedUserSeatTypes:{},currentUpgradingUserId:a?.user.id});return{eligibleTeamsByTeamId:i,selectedTeamIds:l,eligibleUsersByUserId:d,selectedUserSeatTypes:o}}function n(e){return{id:e.id,email:e.email,handle:e.handle,img_url:e.img_url}}},560806:(e,t,a)=>{a.d(t,{s:()=>r});var s=a(192075);function r({eligibleUsersByUserId:e,eligibleTeamsByTeamId:t,selectedTeamIds:a,currentUpgradingUserId:r}){let i=[];return 0===a.length&&r?i.push({id:r,handle:e[r].handle,email:e[r].email,img_url:e[r].img_url,teams:"\u2014"}):Object.values(e).filter(e=>e.teamIds.some(e=>a.includes(e))).forEach(e=>{let r=e.teamIds,n=a.filter(e=>r.includes(e)).map(e=>t[e]),l=1===n.length?n[0].name:(0,s.t)("checkout.multiple_teams_label");i.push({id:e.id,handle:e.handle,email:e.email,img_url:e.img_url,teams:l})}),i}},599448:(e,t,a)=>{a.d(t,{h:()=>r});var s=a(236753);function r({eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:i}){if(0===t.size&&i)return{[i]:r[i]};let n={},l={};return t.forEach(t=>{e[t].eligibleUsers.forEach(e=>{if(!n[e]){if(r[e])n[e]=r[e];else{let s=a[e];l[e]||(l[e]=[]),l[e].push(s.recommendedSeatTypeByTeamId[t])}}})}),{...n,...Object.keys(l).reduce((e,t)=>(e[t]=(0,s.Up)(l[t]),e),{})}}},975687:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>W});var s=a(104076),r=a(716976),i=a(237420),n=a(638004),l=a(740681),d=a(755444),o=a(833805),c=a(1188),m=a(652539),u=a(236631),_=a(192075),p=a(659062),x=a(147046),h=a(366535),g=a(111297),y=a(817647),f=a(347592),v=a(449250),S=a(745529),E=a(412469),T=a(104836),j=a(608175),N=a(826160),b=a(434225),A=a(354174),w=a(951002),C=a(382629),I=a(225654),k=a(954068),R=a(352630),P=a(906356),O=a(454967),M=a(624258),D=a(232362),L=a(649693),B=a(781611),U=a(944350),V=a(295253);function z({currency:e,hideModal:t,choosePlan:a,TeamIllustration:r,upsellSource:n}){let l=(0,i.wA)();return(0,s.jsxs)("div",{className:u.s.flex.flexColumn.gap8.$,style:p.sx.add({padding:"48px 56px",maxWidth:"650px"}).$,children:[(0,s.jsx)("p",{className:u.s.textHeadingLarge.$,children:(0,_.tx)("org_upgrade.multi_team.bring_your_teams_together")}),(0,s.jsx)("p",{className:u.s.textHeadingMedium.$,style:p.sx.add({fontWeight:400}).$,children:(0,_.tx)("plan_comparison.campfire.org.description")}),(0,s.jsx)(R.e6,{className:"campfire_org_upgrade_multi_team_modal--closeButton--THg83",onClick:t,children:(0,s.jsx)(I.X,{})}),(0,s.jsxs)("div",{className:u.s.flex.gap16.$,children:[(0,s.jsxs)("div",{className:u.s.flex.flexColumn.gap16.flex1.mt16.$,children:[(0,s.jsx)(G,{currency:e}),(0,s.jsxs)("div",{children:[(0,s.jsx)(R.Ih,{onClick:a,children:(0,_.tx)("plan_comparison.campfire.choose_plan")}),(0,s.jsx)("div",{className:u.s.font11.lh16.alignCenter.mt4.$,children:(0,_.tx)("plan_comparison.campfire.or_contact_sales",{contactSalesLink:(0,s.jsx)("button",{className:u.s.colorTextBrand.cursorPointer.$,onClick:()=>l(h.to({type:P.lk,data:{source:O.B.ORG_SELF_SERVE_UPGRADE_MODAL}})),children:(0,_.tx)("plan_comparison.campfire.contact_sales")})})})]}),(0,s.jsx)("div",{className:u.s.bt1.bSolid.colorBorder.$}),(0,s.jsx)($,{upsellSource:n})]}),(0,s.jsx)("div",{className:u.s.flex.flex1.itemsCenter.justifyCenter.$,children:r})]})]})}function G({currency:e}){let t={currency:e,tier:j.Ju.ORG,renewalTerm:j.IX.YEAR,unit:j.IX.MONTH},a=(0,y.jv)({billableProductKeys:f.N_,baseQuery:t}),[r]=(0,o.Ad)(a);if(null===r.data)throw Error("Price data is null");let i=new E.vr(e);return(0,s.jsx)("div",{className:u.s.flex.flexColumn.$,children:f.N_.sort(B.AG).map(e=>(0,C.uy)(r.data[e])?null:(0,s.jsxs)("div",{className:u.s.flex.justifyBetween.$,children:[(0,s.jsxs)("div",{className:u.s.flex.gap4.itemsCenter.$,children:[(0,s.jsx)(M.BC,{type:e,size:"24",removeBackgroundColor:!0}),(0,s.jsx)("p",{className:u.s.textBodyLarge.$,children:function(e){switch(e){case L.ud.EXPERT:return(0,_.t)("nux.campfire.full_seat");case L.ud.DEVELOPER:return(0,_.t)("nux.campfire.dev_seat");case L.ud.COLLABORATOR:return(0,_.t)("nux.campfire.collab_seat");case L.ud.CONTENT:return(0,_.t)("nux.campfire.content_seat");default:(0,w.xb)(e)}}(e)})]}),(0,s.jsx)("p",{className:u.s.textBodyMedium.$,children:(0,_.tx)("nux.price_per_month",{price:(0,s.jsx)("span",{className:u.s.textBodyLargeStrong.$,children:i.formatMoney(r.data[e].amount)})})})]},e))})}function $(e){let t=e.upsellSource===V.b.CONNECTED_PROJECTS_MAXIMUM_CONNECTIONS,a=[t?(0,_.tx)("plan_comparison.campfire.org.feature.org_connected_projects",{orgConnectionsLimit:D.b[U.Ag.ORG]}):null,(0,_.tx)("plan_comparison.campfire.org.feature.unlimited_teams"),(0,_.tx)("plan_comparison.campfire.org.feature.branching"),(0,_.tx)("plan_comparison.campfire.org.feature.security"),(0,_.tx)("plan_comparison.campfire.org.feature.scim"),(0,_.tx)("plan_comparison.campfire.org.feature.customizations")].filter(Boolean);return(0,s.jsx)("div",{children:a.map((e,a)=>{let r=t&&0===a?(0,s.jsx)("span",{className:u.s.textBodyLargeStrong.$,children:e}):(0,s.jsx)("span",{children:e});return(0,s.jsxs)("div",{className:u.s.flex.$,children:[(0,s.jsx)(k.g,{className:u.s.minW24.$,style:{"--color-icon":"var(--color-icon-secondary)"}}),(0,s.jsx)("p",{className:u.s.textBodyLarge.$,children:r})]},a)})})}let H=(0,d.ck)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),F=(0,d.ck)("e2148969d5a469e76c053a23b6647d487e6d64ee"),q=(0,d.ck)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function K(e){let t=(0,i.d4)(e=>e.teams),a=(0,i.d4)(e=>(0,T._L)(e.user,e.roles,e.teams)),r=(0,i.wA)(),n=()=>{r(h.Ce())},d=e=>(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListEntry---bU9i",children:[(0,s.jsx)(N.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--aJZdJ ellipsis--ellipsis--Tjyfa",children:e.name})]},e.id),c=(0,E.wU)(),g=f.Oq.dict(e=>({currency:c.currency,billableProductKey:e,billableProductVariantId:null,tier:j.Ju.ORG,renewalTerm:j.IX.YEAR,unit:j.IX.MONTH})),v=(0,y.SK)(g,y.Fq.UPSELL_MODALS),[b]=(0,o.Ad)(v);if(null===b.data)throw Error("Price data is null");let w=(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--MLN4f",style:p.sx.add({width:"200px"}).$,children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--KE5ZD",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListHeader--Eyf-F",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--vYLRQ",src:q,draggable:!1,alt:""}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--EKk6-",children:(0,_.tx)("org_upgrade.multi_team.acme_inc")}),(0,s.jsx)(m.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 16.05V9h1v7.05c1.141.232 2 1.24 2 2.45 0 1.21-.859 2.218-2 2.45V23h-1v-2.05c-1.141-.232-2-1.24-2-2.45 0-1.21.859-2.218 2-2.45m2 2.45c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5m5 4.5h1v-7.05c1.141-.232 2-1.24 2-2.45 0-1.21-.859-2.218-2-2.45V9h-1v2.05c-1.141.232-2 1.24-2 2.45 0 1.21.859 2.218 2 2.45zm2-9.5c0-.828-.672-1.5-1.5-1.5-.828 0-1.5.672-1.5 1.5 0 .828.672 1.5 1.5 1.5.828 0 1.5-.672 1.5-1.5"/></svg>',className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--V4dem"})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListDivider--A9NYP"}),(()=>{let e=[];for(var r=0;r<Math.min(4,a.length);r++){let s=t[a[r]];e.push(d(s))}return(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamList--rzATA",children:e})})(),(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--campfireTeamIllustrationRightSection--fHW0n",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--filesIllustration--teK60",src:F,draggable:!1,alt:""}),(0,s.jsx)("img",{src:H,draggable:!1,alt:""})]}),(0,s.jsxs)("div",{className:u.s.flex.b1.bRadius3.itemsCenter.absolute.pr4.py4.ml36.$,style:p.sx.add({top:"100%",marginTop:"15px",maxWidth:"100px"}).$,children:[(0,s.jsx)(l.s,{className:u.s.minW16.$}),(0,s.jsx)("p",{className:u.s.textBodySmallStrong.$,children:(0,_.tx)("org_upgrade.illustration.sign_in_with_sso")}),(0,s.jsx)("div",{className:u.s.absolute.mt32.$,style:p.sx.add({right:"-8px"}).$,children:(0,s.jsx)(Y,{})})]})]})});return(0,s.jsx)(A.ey,{className:"org_upgrade_multi_team_modal--modal--fVO2l",hide:n,size:"fitContent",useModalViewScroll:!1,children:(0,s.jsx)(z,{currency:c.currency,hideModal:n,choosePlan:()=>{n(),r(x.sf({view:"orgSelfServe",entryPoint:(0,S.c)(e.entryPoint)}))},TeamIllustration:w,upsellSource:(0,S.d)(e.entryPoint)})})}function Y(){return(0,s.jsxs)("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",children:[(0,s.jsxs)("mask",{id:"path-1-outside-1_15_11117",maskUnits:"userSpaceOnUse",x:"-0.5",y:"0.5",width:"16",height:"16",fill:"black",children:[(0,s.jsx)("rect",{fill:"white",x:"-0.5",y:"0.5",width:"16",height:"16"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z"})]}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z",fill:"white"}),(0,s.jsx)("path",{d:"M13.7754 9.75296L12.7754 9.7491V9.75296H13.7754ZM5.55409 13.531L6.38045 12.9679L6.34578 12.917L6.30513 12.8708L5.55409 13.531ZM2.76078 11.0754L3.38075 10.2908L3.37466 10.286L3.36849 10.2813L2.76078 11.0754ZM2.76074 11.0754L2.13996 11.8594L2.14646 11.8645L2.15303 11.8696L2.76074 11.0754ZM2.76055 11.0753L3.38133 10.2913L3.38052 10.2906L2.76055 11.0753ZM1.90649 10.3925L1.27191 11.1653L1.27191 11.1653L1.90649 10.3925ZM1.7686 8.80273L1.01778 8.14221H1.01778L1.7686 8.80273ZM4.40263 9.86608L5.13306 9.18309L5.13306 9.18309L4.40263 9.86608ZM4.7753 9.75H3.77528L3.77532 9.75602L4.7753 9.75ZM4.42715 9.89237L3.69482 10.5733L4.42715 9.89237ZM5.5253 0.5C4.5588 0.5 3.7753 1.2835 3.7753 2.25H5.7753C5.7753 2.38807 5.66337 2.5 5.5253 2.5V0.5ZM7.2753 2.25C7.2753 1.2835 6.4918 0.5 5.5253 0.5V2.5C5.38723 2.5 5.2753 2.38807 5.2753 2.25H7.2753ZM7.2753 7V2.25H5.2753V7H7.2753ZM6.2753 6.25V7H8.2753V6.25H6.2753ZM8.0253 4.5C7.0588 4.5 6.2753 5.2835 6.2753 6.25H8.2753C8.2753 6.38807 8.16337 6.5 8.0253 6.5V4.5ZM9.7753 6.25C9.7753 5.2835 8.9918 4.5 8.0253 4.5V6.5C7.88723 6.5 7.7753 6.38807 7.7753 6.25H9.7753ZM9.7753 7V6.25H7.7753V7H9.7753ZM8.7753 6.75V7H10.7753V6.75H8.7753ZM10.5253 5C9.5588 5 8.7753 5.7835 8.7753 6.75H10.7753C10.7753 6.88807 10.6634 7 10.5253 7V5ZM12.2753 6.75C12.2753 5.7835 11.4918 5 10.5253 5V7C10.3872 7 10.2753 6.88807 10.2753 6.75H12.2753ZM12.2753 6.99997V6.75H10.2753V6.99997H12.2753ZM12.0254 6.5H11.7753V8.5H12.0254V6.5ZM13.2754 7.25C13.2754 7.38807 13.1634 7.5 13.0254 7.5V5.5C12.0589 5.5 11.2754 6.2835 11.2754 7.25H13.2754ZM13.0254 7.5C12.8873 7.5 12.7754 7.38807 12.7754 7.25H14.7754C14.7754 6.2835 13.9919 5.5 13.0254 5.5V7.5ZM12.7754 7.25V9.75H14.7754V7.25H12.7754ZM12.7754 9.75L12.7754 9.7491L14.7753 9.75683C14.7754 9.75455 14.7754 9.75228 14.7754 9.75H12.7754ZM14.7754 11V9.75296H12.7754V11H14.7754ZM9.27535 16.5C12.3129 16.5 14.7754 14.0376 14.7754 11H12.7754C12.7754 12.933 11.2084 14.5 9.27535 14.5V16.5ZM4.72773 14.0942C5.716 15.5444 7.38393 16.5 9.27535 16.5V14.5C8.07321 14.5 7.01213 13.8948 6.38045 12.9679L4.72773 14.0942ZM2.14081 11.8601C3.12768 12.6398 4.1605 13.4604 4.80305 14.1913L6.30513 12.8708C5.51696 11.9742 4.32011 11.033 3.38075 10.2908L2.14081 11.8601ZM2.15303 11.8696L2.15308 11.8696L3.36849 10.2813L3.36845 10.2812L2.15303 11.8696ZM2.13977 11.8592L2.13996 11.8594L3.38152 10.2914L3.38133 10.2913L2.13977 11.8592ZM1.27191 11.1653C1.53818 11.3839 1.83659 11.6197 2.14058 11.8599L3.38052 10.2906C3.07274 10.0474 2.79 9.82399 2.54106 9.61959L1.27191 11.1653ZM1.01778 8.14221C0.225175 9.04318 0.36732 10.4226 1.27191 11.1653L2.54106 9.61959C2.52173 9.60372 2.50406 9.57558 2.50055 9.53613C2.49713 9.49765 2.50911 9.47495 2.51941 9.46324L1.01778 8.14221ZM5.13306 9.18309C4.76 8.78412 4.18894 8.21906 3.5653 7.86975C3.25213 7.69434 2.84133 7.52445 2.38081 7.5217C1.87057 7.51865 1.38659 7.72299 1.01778 8.14221L2.51941 9.46324C2.52177 9.46056 2.50353 9.48113 2.46192 9.49972C2.42048 9.51823 2.385 9.52176 2.36888 9.52166C2.35449 9.52158 2.42166 9.52154 2.58795 9.61468C2.92326 9.80249 3.31712 10.1693 3.6722 10.5491L5.13306 9.18309ZM5.15947 9.21142C5.15063 9.20191 5.14183 9.19247 5.13306 9.18309L3.6722 10.5491C3.6797 10.5571 3.68724 10.5652 3.69482 10.5733L5.15947 9.21142ZM3.77532 9.75602L3.77537 9.76525L5.77534 9.7532L5.77528 9.74398L3.77532 9.75602ZM3.7753 2.25V9.75H5.7753V2.25H3.7753ZM3.69482 10.5733C4.40798 11.3403 5.77535 10.8889 5.77535 9.75922H3.77535C3.77535 8.98963 4.69149 8.70813 5.15947 9.21142L3.69482 10.5733ZM9.2753 8.5C10.1037 8.5 10.7753 7.82843 10.7753 7H8.7753C8.7753 6.72386 8.99916 6.5 9.2753 6.5V8.5ZM6.7753 8.5C7.60373 8.5 8.2753 7.82843 8.2753 7H6.2753C6.2753 6.72386 6.49916 6.5 6.7753 6.5V8.5ZM10.2753 6.99997C10.2753 7.82841 10.9469 8.5 11.7753 8.5V6.5C12.0515 6.5 12.2753 6.72384 12.2753 6.99997H10.2753ZM7.7753 7C7.7753 7.82843 8.44687 8.5 9.2753 8.5V6.5C9.55144 6.5 9.7753 6.72386 9.7753 7H7.7753ZM12.0254 8.5C12.7157 8.5 13.2754 7.94036 13.2754 7.25H11.2754C11.2754 6.83579 11.6111 6.5 12.0254 6.5V8.5ZM5.2753 7C5.2753 7.82843 5.94687 8.5 6.7753 8.5V6.5C7.05144 6.5 7.2753 6.72386 7.2753 7H5.2753Z",fill:"black",fillOpacity:"0.8",mask:"url(#path-1-outside-1_15_11117)"})]})}let W=(0,g.kp)(function(e){return(0,s.jsx)(c.tH,{boundaryKey:"OrgUpgradeMultiTeamModal",team:n.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(v.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(b.N,{hiddenTitle:(0,_.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500}),children:(0,s.jsx)(K,{...e})})})},"Multi-Team Org Upgrade Modal")},532832:(e,t,a)=>{a.r(t),a.d(t,{ResubscribeModal:()=>T});var s=a(104076),r=a(716976),i=a(237420),n=a(293422),l=a(929302),d=a(950187),o=a(268389);a(120440);var c=a(653899),m=a(192075),u=a(373533),_=a(366535),p=a(396842),x=a(244205),h=a(111297),g=a(400136),y=a(657878),f=a(412469),v=a(469229);let S=(0,h.tf)(n.$n),E=(0,h.tf)(n.$n);function T(e){let{upsellSource:t,paymentMethod:a,nextBillDate:n,amount:T,team:j,monthlySub:N=null,annualSub:b=null,currency:A,canSeeBillingAddressExp:w}=e,C=(0,i.wA)(),I=(0,y._6)(),k=(0,i.d4)(e=>(0,v.Np)(e,I)),[R,P]=(0,r.useState)(!1),{saveWithPaymentMethod:O,createPaymentElement:M,unmountPaymentElement:D}=(0,g.lo)({setupIntentParams:{redirect_url:k,subtotal_estimate:T,success_message:(0,m.t)("resubscribe_modal.success_message"),currency:A,teamId:j.id},paymentFlowSource:g.wn.PRO_REACTIVATE,customerInfo:{teamId:j.id,orgId:void 0},defaultCountry:(0,f.ub)(),currency:A,canSeeBillingAddressExp:w,isCheckout:!1});(0,c.h)(()=>(M({ready:()=>{P(!0)}}),()=>{D()}));let L=l.wQ({defaultOpen:!0});if(!a||!n||!T||!w)return null;let B=a?.object.last4,U=(0,u.up)(T,A??"usd",{showCents:!0});return(0,s.jsxs)(h.fu,{name:"Resubscribe Modal",properties:{upsellSource:t},children:[(0,s.jsx)(d.bL,{manager:L,width:"fit-content",children:(0,s.jsxs)(o.vo,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:(0,m.tx)("resubscribe_modal.title")})}),(0,s.jsx)(o.nB,{className:"x1dc814f",children:(0,s.jsx)("p",{children:(0,m.tx)("resubscribe_modal.body",{last4:B,formattedAmount:U,nextBillDate:n})})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(E,{variant:"secondary",disabled:!R,onClick:()=>{C((0,_.Ce)()),(0,p.C8)({team:j,dispatch:C,cancelling:!0,monthlySub:N,annualSub:b,currency:A,canSeeBillingAddressExp:w,estimatedChargeCents:T})},trackingProperties:{trackingDescriptor:x.c.UPDATE_PAYMENT},children:(0,m.tx)("resubscribe_modal.different_payment_method")}),(0,s.jsx)(S,{variant:"primary",disabled:!R,onClick:e=>{let t=async()=>{e.preventDefault(),await O(a),P(!0)};P(!1),t()},trackingProperties:{trackingDescriptor:x.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN},children:(0,m.tx)("resubscribe_modal.reactivate_plan")})]})})]})}),(0,s.jsx)("div",{id:g.Ix,className:"x1s85apg"})]})}},410555:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>q});var s=a(104076),r=a(716976),i=a(237420),n=a(633065),l=a(653899),d=a(769109),o=a(555013),c=a(192075),m=a(454307),u=a(111679),_=a(617980),p=a(147046),x=a(366535),h=a(483200),g=a(111297),y=a(847282),f=a(745529),v=a(937505),S=a(657878),E=a(412469),T=a(853039),j=a(984887),N=a(377026),b=a(354174),A=a(99723),w=a(432099),C=a(99725),I=a(388816),k=a(679359),R=a(381640),P=a(25112),O=a(952385),M=a(459494),D=a(249586),L=a(958127),B=a(592726),U=a(336971),V=a(953050),z=a(723347);let G=(0,R.nF)((e,{teamName:t,selectedView:a,currency:s,onSuccess:r,onError:i,onBillingCompleteRedirectInfo:n})=>{let l;w.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(l="team"in t.meta?t.meta.team:t.meta,e.dispatch(O.bE({team:l})),(0,D._J)("Team Created",l.id,e.getState()),V.G.getTeam({teamId:l.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(P.bE({role:a}));r(),e.dispatch(h.WX({teamId:l.id,selectedView:a,newTeam:!0,currency:s,entryPoint:(0,f.c)(L.C6.CREATE_NEW_PAID_TEAM),...n?{onBillingCompleteRedirectInfo:n}:{}}))}).catch(()=>{i()})});function $(e){let t=(0,i.wA)(),a=(0,B.TA)(),n=(0,i.d4)(U.P),l=(0,i.d4)(e=>e.roles.byTeamId),[d,m]=r.useState(!1),[u,_]=r.useState(!1),[p,h]=r.useState(""),g=(0,E.LN)(),y=()=>{t(x.Ce())},f=(0,A.s)(()=>{m(!0),p?t(G({teamName:p,selectedView:e.selectedView,currency:g,onSuccess:y,onError:()=>{m(!1),_(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(m(!1),_(!0))});return a&&!(0,M.e5)({userId:a,teams:Object.values(n),rolesByTeamId:l})?(0,s.jsxs)("div",{"data-testid":"createTeamToUpgradeView",children:[(0,s.jsx)("p",{className:z.KV,children:(0,c.tx)("universal_upgrade_sequence.subtitle")}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.I,{message:(0,c.t)("universal_upgrade_sequence.error"),marginTop:16}),(0,s.jsx)(o.Kz,{multiple:1})]}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{className:z.$g,children:[(0,s.jsx)("div",{className:z.Eh,children:(0,s.jsx)(I.i,{dataTestId:"createTeamInput",placeholder:(0,c.t)("universal_upgrade_sequence.team_name.placeholder"),value:p||"",onChange:e=>{h(e.target.value)},required:!0,maxLength:255})}),(0,s.jsx)(o.vd,{dataTestId:"nextButton",className:z.DI,disabled:!p||d,onClick:f,children:d?(0,s.jsx)(k.kt,{className:z.u1}):(0,c.tx)("universal_upgrade_sequence.next")})]})]}):null}var H=a(312156),F=a(555590);function q(e){let[t,a]=r.useState("selectTeam"),A=(0,i.wA)(),w=(0,S._6)(),C=(0,v.FC)(),I=(0,i.d4)(e=>e.payment.promo),k=(0,i.d4)(e=>e.payment.billingPeriod),R=()=>{(0,y.EM)(_.y),(0,y.EM)("entryPoint"),A(x.Lo())},P=()=>{(0,y.EM)(_.y),(0,y.EM)("entryPoint"),A(x.Ce()),e.onDone?.()},O=t=>{"teamUpgrade"===w.view?A(p.sf({...w,teamFlowType:N.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,m.kR)(w.paymentStep,N.SC.UPGRADE_EXISTING_TEAM,w.billingPeriod||null,I,w.planType||N.Sc.UNDETERMINED,I?j.Vv.CONFIRM_PAY:j.Vv.CHOOSE_PLAN),billingPeriod:e.billingPeriod||k,entryPoint:e.entryPoint})):A(h.WX({teamId:t.id,selectedView:w,newTeam:!1,currency:(0,E.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:(0,f.c)(e.entryPoint),openInNewTab:e.openInNewTab})),P()},M=()=>{0===(0,T.PS)(C).length?(A(u.Dw({openInNewTab:!n.eD})),a("createTeam")):a("selectTeam")};return((0,l.h)(()=>{e.plan===H.I.PRO&&M()}),"selectTeam"===t)?(()=>{let t=(0,T.PS)(C);return(0,s.jsx)(g.fu,{name:"Upgrade Select Team Modal",children:(0,s.jsxs)(b.ey,{hide:R,size:436,children:[(0,s.jsx)("h1",{"data-testid":"modalTitle",className:z.GK,children:(0,c.tx)("universal_upgrade_sequence.title")}),(0,s.jsx)(d.Jn,{dataTestId:"closeButton",className:z.b,onClick:R,innerText:(0,c.t)("universal_upgrade_sequence.close_modal")}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)(F.I,{eligibleTeams:t,selectTeam:O}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)($,{selectedView:w,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})]})})})():(0,s.jsx)(s.Fragment,{})}},555590:(e,t,a)=>{a.d(t,{I:()=>_});var s=a(104076),r=a(716976),i=a(555013),n=a(849757),l=a(192075),d=a(244205),o=a(111297),c=a(853039),m=a(826160),u=a(723347);function _({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:_,showEditorCount:p=!0}){let[x,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1);r.useEffect(()=>{h(t.length>=5)},[t]);let f=`${u.jG}`;x&&(f+=` ${u.o8}`),g&&(f+=` ${u.kz}`);let v=t[t.length-1],S=_&&_.length===t.length;return(0,s.jsx)(n.P,{onScroll:(e,a)=>{let s=t.length>=5,r=s&&0!==e,i=s&&e+a.trackHeight!==a.scrollHeight;i!==x&&h(i),r!==g&&y(r)},className:f,scrollingDisabled:!1,children:(0,s.jsx)("div",{className:u.nW,children:t.map((t,r)=>(0,s.jsxs)(o.jm,{className:t===v?u.wv:u.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:d.c.UPGRADE},innerText:"Upgrade",children:[(0,s.jsxs)("div",{className:"org_self_serve--teamInfo--7YTKY",children:[(0,s.jsx)(m.Ro,{className:"org_self_serve--teamIcon--DqZPm",entity:t,size:40,shape:"SQUARE"}),(0,s.jsxs)("div",{className:"org_self_serve--teamText--Uh2zO",children:[(0,s.jsx)("p",{className:"org_self_serve--teamName--a1LGY text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:t.name}),(0,s.jsxs)("p",{className:"org_self_serve--teamEditors--2hBWh text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[!S&&p&&(0,l.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),S&&_&&(0,l.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:_[r],numFreeFilesAllowed:c.WW})]})]})]}),(0,s.jsx)(i.nR,{className:u.J1,dataTestId:"select_team.upgrade",children:e??(0,l.tx)("universal_upgrade.select_team.upgrade")})]},t.id))})})}},843735:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>C});var s=a(104076),r=a(716976),i=a(237420),n=a(99723),l=a(310725),d=a(140490),o=a(432099),c=a(769109),m=a(99725),u=a(555013),_=a(652539),p=a(192075),x=a(366535),h=a(111297),g=a(959834),y=a(757381),f=a(354174),v=a(147107);let S="upgrade_contact_sales_modal--closeButton--715WY";var E=a(364616),T=a(933949);let j=()=>[{name:(0,p.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,p.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,p.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,p.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],N=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,p.t)("contact_sales.which_topic_best_fits_your_needs")}),j().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),b=()=>[{name:(0,p.t)("contact_sales.plan.starter"),value:"starter"},{name:(0,p.t)("contact_sales.plan.professional"),value:"professional"},{name:(0,p.t)("contact_sales.plan.organization"),value:"organization"},{name:(0,p.t)("contact_sales.plan.enterprise"),value:"enterprise"},{name:(0,p.t)("contact_sales.plan.figma_for_government"),value:"figma_for_government"},{name:(0,p.t)("contact_sales.plan.not_sure"),value:"not_sure"}],A=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,p.t)("contact_sales.what_figma_plan_are_you_inquiring_about")}),b().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),w=(0,g.Ju)(function({hideModal:e}){return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Success Modal",children:(0,s.jsxs)(f.ey,{hide:e,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalWrapper--xA5Mp",children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalTitle--Xgt1f upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,s.jsx)(_.B,{className:"upgrade_contact_sales_modal--successIcon---zT4I",svg:T.A}),(0,p.tx)("universal_upgrade.contact_sales.thank_you")]}),(0,s.jsx)(c.Jn,{className:S,onClick:e,innerText:"close"})]}),(0,s.jsx)("div",{className:"upgrade_contact_sales_modal--successModalText--f1aRe text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,p.tx)("universal_upgrade.contact_sales.sales_will_reach_out")})]})})},"ContactSalesSuccessModal");function C(e){return(0,s.jsx)(d.u,{label:"UpgradeContactSalesModal",children:(0,s.jsx)(I,{...e})})}function I(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),[d,g]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",plan:"",product:"",phone:"",formErrors:{}}),T=()=>{t(x.Lo())},j=()=>{t((0,x.to)({type:w,data:{hideModal:()=>t(x.Ce())}}))},b=()=>({email:d.email,name:d.name,company_name:d.companyName,topic:d.topic,plan:d.plan,phone:d.phone,message:d.freeText,source:e.source,form_name:"topic_v1"}),C=(0,n.s)(()=>{let e={},t=(0,p.t)("universal_upgrade.this_field_is_required");if(d.email?(0,l.xf)(d.email)||(e.email=(0,p.t)("universal_upgrade.please_provide_a_valid_email_address")):e.email=t,d.name||(e.name=t),d.companyName||(e.companyName=t),d.topic||(e.topic=t),d.plan||(e.plan=t),g(t=>({...t,formErrors:e,result:void 0})),0===Object.keys(e).length){let e=b();o.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{g(e=>({...e,result:"success"})),j()}).catch(()=>g(e=>({...e,result:"error"})))}}),I=e=>d.formErrors[e]?"upgrade_contact_sales_modal--error--8vAcf basic_form--labeledInputGroup--aeD6L":void 0,k=e=>{let t=d.formErrors[e];return t?(0,s.jsx)("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--FfxPx text--fontPos11--2LvXf text--_fontBase--QdLsd",children:t}):null},R=(e,t,a=!1)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Lf,{htmlName:t,label:e,value:d[t]||"",onChange:e=>{let a={[t]:e.target.value};g(e=>({...e,...a}))},disabled:a,className:I(t)}),k(t)]}),P=(e,t,a)=>{let r=I(t)||v.Os;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--select--sFfZ- address_form--selectRowFull--8DtEB",children:[(0,s.jsx)(u.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};g(e=>({...e,...a}))},required:!0,children:a}),(0,s.jsx)(_.B,{className:v.nO,svg:E.A})]})}),k(t)]})};return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Modal",children:(0,s.jsxs)(f.ey,{className:"upgrade_contact_sales_modal--contactSalesModal--ExFaV",hide:T,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--titleWrapper--mKMG2",children:[(0,s.jsx)("h1",{className:"upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,p.tx)("universal_upgrade.contact_sales_title")}),(0,s.jsx)(c.Jn,{className:S,onClick:T,innerText:"close"})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalBody--FTi91",children:["error"===d.result&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.I,{message:(0,p.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),(0,s.jsx)(u.Kz,{multiple:.5})]}),(0,s.jsxs)("fieldset",{children:[R((0,p.t)("universal_upgrade.email_address"),"email"),R((0,p.t)("universal_upgrade.full_name"),"name"),R((0,p.t)("universal_upgrade.company_name"),"companyName"),P((0,p.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",N()),P((0,p.t)("contact_sales.what_figma_plan_are_you_inquiring_about"),"plan",A()),R((0,p.t)("contact_sales.phone_number_optional"),"phone")]}),(0,s.jsx)(u.Kz,{multiple:1}),(0,s.jsx)("p",{children:(0,p.tx)("universal_upgrade.how_can_we_help_optional")}),(0,s.jsx)(u.Kz,{multiple:1}),(0,s.jsx)(y.v,{className:"upgrade_contact_sales_modal--freeTextInput--fE033 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:d.freeText,onChange:e=>g(t=>({...t,freeText:e.target.value})),placeholder:d.overridePlaceholderText??(0,p.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalFooter--WNk7P",children:[(0,s.jsx)(u.tM,{onClick:T,children:(0,p.tx)("general.cancel")}),(0,s.jsx)(u.vd,{onClick:C,children:(0,p.tx)("universal_upgrade.submit")})]})]})})}},636229:(e,t,a)=>{a.r(t),a.d(t,{OrgHeader:()=>eM,OrgSelfServeBillingRemodelPage:()=>eO,OrgSelfServeBillingRemodelPageInner:()=>eP});var s=a(104076),r=a(716976),i=a(237420),n=a(951002),l=a(638004),d=a(901014),o=a(310725),c=a(219199),m=a(653899),u=a(833805),_=a(550209),p=a(432099),x=a(1188),h=a(520741),g=a(652539),y=a(236631),f=a(256384),v=a(259161),S=a(192075),E=a(281684),T=a(659062),j=a(138105),N=a(373533),b=a(560806),A=a(236753),w=a(788499),C=a(599448),I=a(906356),k=a(454967),R=a(532292),P=a(917296),O=a(186180),M=a(111297),D=a(608175),L=a(464103),B=a(984887),U=a(377026),V=a(468896);let z=(0,M.tf)(function(e){return(0,s.jsx)("div",{className:V.Nd,onClick:e.onClick,children:(0,S.tx)("org_self_serve.headers.cancel")})});function G(e){if(e.currentStep===L.BK.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let s={step:L.BK.ChoosePlan,name:(0,S.t)("org_self_serve.headers.choose_plan")},r={step:L.BK.CreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case U.SC.CREATE:t.push({step:L.BK.PseudoCreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")}),t.push({step:L.BK.AddCollaborators,name:(0,S.t)("org_self_serve.headers.add_team_members")}),t.push(s);break;case U.SC.CREATE_AND_UPGRADE:t.push(s),t.push(r),a=L.BK.CreateTeam;break;case U.SC.UPGRADE_EXISTING_TEAM:t.push(s)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:L.BK.TeamSelect,name:(0,S.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:L.BK.SeatSelect,name:(0,S.t)("checkout.choose_seats")}),a=a??L.BK.TeamSelect),e.isCampfireCart?a=a??L.BK.Payment:(t.push({step:L.BK.Details,name:(0,S.t)("org_self_serve.headers.organization_details")}),a=a??L.BK.Details),t.push({step:L.BK.Payment,name:(0,S.t)("org_self_serve.headers.payment")}),t.push({step:L.BK.Review,name:(0,S.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=L.BK.Initial;let r=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){r=a;break}return(0,s.jsxs)("div",{className:V.li,children:[(0,s.jsx)(z,{onClick:e.onFileBrowserClick}),(0,s.jsx)("div",{className:V.Uu,"data-testid":"stepBreadcrumbs",children:t.map((t,a)=>(0,s.jsx)(O.On,{selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:D.Ju.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case L.BK.ChoosePlan:return B.Vv.PLAN_COMPARISON;case L.BK.AddCollaborators:return B.Vv.ADD_COLLABORATORS;case L.BK.PseudoCreateTeam:return B.Vv.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<r,lightText:!0},a+1))})]})}var $=a(784219),H=a(183058),F=a(473893),q=a(935835),K=a(785034),Y=a(147046),W=a(366535),J=a(483200),Z=a(443192),X=a(459494),Q=a(244205),ee=a(271330),et=a(817647),ea=a(400136),es=a(249586),er=a(347592),ei=a(449250),en=a(134391),el=a(745529),ed=a(537307),eo=a(944350),ec=a(412469),em=a(644075),eu=a(411224),e_=a(943325),ep=a(613936),ex=a(563554),eh=a(562552),eg=a(913610),ey=a(262181),ef=a(554875),ev=a(954068),eS=a(555013),eE=a(142914),eT=a(691138);function ej({teams:e,selectedTeamIds:t,onToggle:a,newTeamName:r,isCartFullSend:i}){return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsxs)("div",{className:V.kH,children:[r&&(0,s.jsx)(eN,{team:{id:"new-team",name:r,numMembers:1},isSelected:!0,onToggle:a},"new-team"),e.map(e=>(0,s.jsx)(eN,{team:e,isSelected:t.has(e.id),onToggle:a,isCartFullSend:i},e.id))]})})}function eN({team:e,isSelected:t,onToggle:a,isCartFullSend:r}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(ef.F,{className:eT.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,className:V.K6,style:T.sx.if(t,T.sx.colorBorderSelected.colorBgSelectedTertiary,T.sx.if(r,T.sx.colorBg.colorBorder,T.sx.colorBg.add({borderColor:"var(--color-bg)"}))).$,children:[(0,s.jsx)(eE.nl,{team:e}),(0,s.jsxs)("span",{className:y.s.maxWFull.$,children:[(0,s.jsx)("span",{className:y.s.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$,children:e.name}),(0,s.jsx)("span",{className:y.s.block.font11.colorTextSecondary.ellipsis.$,children:(0,S.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:V.ER,children:(0,s.jsx)(ev.g,{})})]})]},e.id)}function eb({orgDetails:e,onChangeFormInput:t}){return(0,s.jsx)($.x,{title:(0,S.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:y.s.font13.$,children:[(0,s.jsx)(eS.Lf,{htmlName:"legal_org_name",label:(0,S.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),(0,s.jsx)(eS.Lf,{htmlName:"org_name",label:(0,S.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,S.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})]})})}var eA=a(876299),ew=a(134798),eC=a(948058);let eI=({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:i})=>{let n=(0,ew.wh)(e,t,a),[l,d]=(0,r.useState)(n),o=(0,r.useCallback)(e=>{try{d(t=>(function(e,t){let a=(0,ew.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{o({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,o]),setAdditionalSeats:(0,r.useCallback)(e=>{o({type:"setAdditionalSeats",additionalSeatCounts:e}),i(e)},[i,o]),selectSeatsState:l}};function ek({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:n,currency:l}){let d=(0,eA.G)({currency:l,tier:D.Ju.ORG,renewalTerm:D.IX.YEAR,showCents:!1}),[o]=(0,u.Ad)(d);if(null===o.data)throw Error("No seat types data");let c=o.data,{changeUserSeatType:m,selectSeatsState:_,setAdditionalSeats:p}=eI({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:n});return(0,s.jsx)("div",{"data-testid":"select-seats-step-org",children:(0,s.jsx)(eC.T,{users:e,seatTypes:c,changeUserSeatType:m,selectSeatsState:_,setAdditionalSeats:p,tier:D.Ju.ORG})})}var eR=a(388041);class eP extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===L.BK.Initial||this.props.step===L.BK.ChoosePlan?this.props.newTeamProps?.teamFlowType===U.SC.CREATE_AND_UPGRADE?L.BK.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?L.BK.TeamSelect:L.BK.Payment:this.props.step,this.setStep=e=>{this.props.dispatch(Y.sf({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,entryPoint:this.props.entryPoint})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:ea.wn.ORG_UPGRADE,paymentMethodType:e_.lB.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case L.BK.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(L.BK.TeamSelect);break;case L.BK.AddCollaborators:this.setStep(L.BK.Payment);break;case L.BK.PseudoCreateTeam:this.setStep(L.BK.TeamSelect);break;case L.BK.TeamSelect:let t=(0,C.h)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(L.BK.SeatSelect);break;case L.BK.SeatSelect:this.setStep(L.BK.Payment);break;case L.BK.Payment:this.onSubmitPaymentAndAddress();break;case L.BK.Review:this.onSubmitPurchaseOrder();break;case L.BK.Confirmation:break;default:(0,n.wc)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case L.BK.CreateTeam:case L.BK.PseudoCreateTeam:case L.BK.AddCollaborators:return(0,S.t)("org_self_serve.create_team_step.next_select_team");case L.BK.TeamSelect:return(0,S.t)("checkout.org_self_serve.next_select_seats");case L.BK.SeatSelect:return(0,S.t)("org_self_serve.payment_step.next_payment");case L.BK.Payment:return(0,S.t)("org_self_serve.review_step.next_review");case L.BK.Review:case L.BK.Confirmation:return"";default:(0,n.wc)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case L.BK.CreateTeam:case L.BK.PseudoCreateTeam:return!this.state.newTeamName;case L.BK.TeamSelect:return this.state.loading;case L.BK.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case L.BK.Review:case L.BK.Confirmation:case L.BK.AddCollaborators:case L.BK.SeatSelect:return!1;default:(0,n.wc)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);d.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let s=this.state.orgDetails;switch(t){case"actor_name":s.actorName=a.trim();break;case"legal_org_name":s.legalOrgName=a.trim();break;case"org_name":s.orgName=a.trim()}this.setState({orgDetails:s})},this.contactSales=()=>{this.props.dispatch((0,W.to)({type:I.lk,data:{source:k.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,en.Al)(this.props.user.id),c.Ay.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===L.BK.TeamSelect?null:(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return(0,s.jsx)(F.z,{billingInterval:B.NW.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===L.BK.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:(0,s.jsxs)("div",{className:V.i9,children:[(0,s.jsx)(g.B,{svg:eR.A,className:V.$y}),(0,s.jsx)("p",{children:(0,S.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("span",{className:V.uD,onClick:this.contactSales,children:(0,S.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]}),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(J.MN({currency:e})),this.setState({currency:e})},tier:D.Ju.ORG,title:(0,S.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,w.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.gS)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,B.EB)((0,ec.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,B.EB)((0,ec.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return eh.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(Y.sf({view:"recentsAndSharing"})),this.props.dispatch(f.s.error(t||(0,S.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,w.R9)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:D.Ju.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r}=(0,j.W)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r})})}componentDidUpdate(e,t){(0,o.zN)(e.user.email)!==(0,o.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}getSubtotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.N_.dict(e=>0);return(0,N.Vh)(e,(0,A.s$)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.N_.dict(e=>0);return(0,N.kV)(e,(0,A.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.N_.dict(e=>0);return(0,N.N9)(e,(0,A.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(),a=this.getTotal();return(0,A.GL)({subtotal:e,taxTotal:t,total:a})}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,s=this.state.regionalVatId;if(null===t){let e=(0,S.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,eg.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,S.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(s&&!await (0,eg.V)(s,e.country,()=>{},this.onVatValidationFail,e.region))return;let r=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,e_.Ey)(t,r).then(t=>{if(!t.error&&t.token)return(0,e_.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,B.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(L.BK.Review))});{let e=t.error?.message||(0,S.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(Z.b({completed_org_cart_flow:!0}));let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,A.vm)(this.props.productPriceBySeatType),s={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,A.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(s.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),p.Ay.post("/api/orgs",s).catch(s=>(this.props.dispatch(f.s.error((0,E.J)(s,s.data?.message||(0,S.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,_.$D)(l.e.BILLING_EXPERIENCE,Error(`[Billing] Org checkout API failed: ${s.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(L.BK.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,eu.rq)({emails:this.state.inviteEmails,resourceType:eo.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:ep.e6.EDITOR,teamId:e.data.meta.new_team.id})),this.state.newTeamName&&e.data.meta.new_team&&(0,en.Al)(this.props.user.id),(0,d.sx)("Self Serve Org Purchased (GTM)"),(0,es.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:s.org_name,upsellSource:(0,el.d)(this.props.entryPoint)})})}render(){let e;let t=this.effectiveStep(),a=(0,A.Ds)(Object.values(this.state.eligibleTeamsByTeamId));if(t===L.BK.Review){let t=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=(0,s.jsx)(H.j,{billingAddress:this.state.payment.address,billingInterval:B.NW.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(L.BK.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,w.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.gS)((0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,o.zN)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:D.Ju.ORG,title:(0,S.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===L.BK.Confirmation?(0,s.jsx)(P._,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):(0,s.jsxs)(s.Fragment,{children:[this.props.isOrgAdmin&&(0,s.jsx)(R.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,o.qe)(this.props.user.email)&&(0,s.jsx)(R.VE,{onFileBrowserClick:this.onFileBrowserClick}),(0,s.jsxs)("div",{style:T.sx.if(t===L.BK.CreateTeam,T.sx.flex.justifyCenter,T.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"})).$,children:[t===L.BK.CreateTeam&&(0,s.jsx)("div",{className:V.Bb,children:(0,s.jsx)(q.y,{type:q.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})}),t===L.BK.TeamSelect&&(this.state.loading?(0,s.jsx)(K.f,{}):(0,s.jsx)(ej,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===L.BK.SeatSelect&&(this.state.loading?(0,s.jsx)(K.f,{}):(0,s.jsx)(ek,{users:(0,b.s)({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===L.BK.Payment&&(0,s.jsxs)("form",{"data-testid":"org-payment-and-details-step",children:[(0,s.jsx)(eb,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),(0,s.jsx)("div",{className:y.s.pt24.$,children:(0,s.jsxs)($.x,{title:(0,S.t)("checkout.payment_details"),children:[this.state.paymentError&&(0,s.jsx)("div",{className:y.s.mb20.$,children:(0,s.jsx)(h._,{color:h.S.ERROR,text:this.state.paymentError})}),(0,s.jsx)(ey.n,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})]})})]}),t!==L.BK.CreateTeam&&this.renderPurchaseSummary()]})]});return(0,s.jsxs)(M.fu,{name:ex.e0.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:(0,el.d)(this.props.entryPoint),entryPoint:this.props.entryPoint,eligibleTeamIds:(0,w.gu)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,w.Jh)(this.props.productPriceBySeatType)},enabled:!this.state.loading,trackingOptions:(0,ee.E)(l.e.MONETIZATION_UPGRADES),children:[t!==L.BK.Confirmation&&(0,s.jsx)("div",{className:y.s.sticky.top0.zIndexTopBar.selectNone.$,children:(0,s.jsx)(G,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:e=>{this.props.dispatch(Y.sf({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||U.SC.CREATE_AND_UPGRADE}))},isCampfireCart:!0})}),(0,s.jsxs)("div",{className:y.s.selectNone.$,style:T.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$,children:[(0,s.jsx)(eM,{step:t}),e]})]})}}function eO(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),r=(0,i.d4)(e=>(0,em.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===eo._D.ADMIN)),n=(0,X.Mh)(),d=(0,i.d4)(e=>e.payment).currency||(0,ec.LN)();(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let o=(0,et.jv)({billableProductKeys:er.N_,baseQuery:{currency:d,tier:D.Ju.ORG,renewalTerm:D.IX.YEAR,unit:D.IX.YEAR}}),[c]=(0,u.Ad)(o);if("loaded"!==c.status)return(0,s.jsx)(ei.K,{});let _=c.data;return(0,s.jsx)(x.tH,{team:l.e.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:x.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ed.y4,children:(0,s.jsx)(eP,{...e,dispatch:t,user:a,isOrgAdmin:r,canSeeBillingAddressExp:n,productPriceBySeatType:_,currency:d})})}function eM({step:e}){let t=function(e){switch(e){case L.BK.TeamSelect:return(0,S.t)("checkout.org_self_serve.select_teams_title");case L.BK.SeatSelect:return(0,S.t)("checkout.org_self_serve.select_seats_header");case L.BK.Payment:return(0,S.t)("checkout.enter_your_payment_details");case L.BK.Review:return(0,S.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=(0,s.jsx)(v.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:Q.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,S.tx)("checkout.learn_more_about_seats")});switch(e){case L.BK.TeamSelect:return(0,S.t)("checkout.org_self_serve.select_teams_subtitle");case L.BK.SeatSelect:return(0,S.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case L.BK.Review:return(0,S.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?(0,s.jsxs)("div",{className:y.s.mb32.$,"data-testid":"cart-org-header",children:[(0,s.jsx)("h2",{className:y.s.font15.lh24.fontMedium.$,children:t}),a&&(0,s.jsx)("p",{className:y.s.colorTextSecondary.font13.mt8.$,children:a})]}):null}eP.displayName="OrgSelfServePage"},532292:(e,t,a)=>{a.d(t,{wW:()=>$,VE:()=>G});var s=a(104076),r=a(716976),i=a(237420),n=a(812714),l=a(114339),d=a(6817),o=a(903853),c=a(769109),m=a(555013),u=a(849757),_=a(652539),p=a(236631),x=a(192075),h=a(659062),g=a(911990),y=a(151538),f=a(171660),v=a(104034),S=a(366535),E=a(675477),T=a(111297),j=a(249586),N=a(649693),b=a(347592),A=a(781611),w=a(412469),C=a(349311),I=a(959834),k=a(826160),R=a(25080),P=a(432786),O=a(354174);let M=(0,a(560201).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return(0,s.jsx)("div",{children:e.map((e,a)=>{let r=(0,R.$L)(e,R.us);return(0,s.jsxs)("div",{className:"org_self_serve_modal_tooltip_content--tooltipRow--CyDdQ",children:[(0,s.jsx)("div",{style:h.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),(0,s.jsx)("div",{children:t[a]})]},e)})})},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),D="org_self_serve_modals--modalContainer--dX-kq",L="org_self_serve_modals--modalWrapperSmall--A6JUB org_self_serve_modals--modalWrapper--swqMp",B="org_self_serve_modals--modalHeader--nTa0e",U="org_self_serve_modals--modalText--VYdf5";var V=a(433566);function z(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function G(e){return(0,s.jsx)(P.OJ,{containerClassName:D,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:L,children:[(0,s.jsx)("div",{className:B,children:(0,x.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")}),(0,s.jsx)("div",{className:U,children:(0,x.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")}),(0,s.jsx)(z,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,x.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser")})]})})}function $(e){return(0,s.jsx)(P.OJ,{containerClassName:D,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:L,children:[(0,s.jsx)("div",{className:B,children:(0,x.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")}),(0,s.jsx)("div",{className:U,children:(0,x.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:(0,s.jsx)("a",{onClick:e.onContactSales,children:(0,x.tx)("org_self_serve.modals.existing_org_admin.contact_sales")})})}),(0,s.jsx)(z,{height:4}),(0,s.jsx)(z,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,x.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser")})]})})}(0,I.Ju)(function(e){let t=e.isProTeam?b.Oq.exclude([N.ud.DEV_MODE]):b.Oq,[a,i]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[o,c]=(0,r.useState)(null),m=e=>{let t=a[e];void 0!==t&&t<99&&i({...a,[e]:t+1})},u=t=>{let s=e.seatDataByLicenseType[t],r=a[t];null!=s&&null!=r&&r>s.minSeats&&i({...a,[t]:r-1})},p=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},h=new w.vr(e.currency),g=a[N.ud.FIGJAM],y={[N.ud.DESIGN]:{headerString:(0,x.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[N.ud.DESIGN],shouldShowDevModeIncludedText:!0},[N.ud.FIGJAM]:{headerString:(0,x.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:g,shouldShowDevModeIncludedText:!1},[N.ud.DEV_MODE]:{headerString:(0,x.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[N.ud.DEV_MODE]??0,shouldShowDevModeIncludedText:!1}};return(0,s.jsxs)(P.Dd,{onSubmit:()=>{let s=!1;if(t.forEach(t=>{let r=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==r&&!1===s&&(r<i||r>99)&&(c(t),s=!0)}),s)return;let r=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&r<e.minTotalSeats?c("total"):(e.dispatch(S.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,x.t)("all_carts.save"),cancelText:(0,x.t)("all_carts.cancel"),title:(0,x.t)("all_carts.add_additional_editors.seat_rename"),children:[(0,s.jsx)("div",{className:"org_self_serve_modals--bannerContainer--ly-u-",children:o&&(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBanner--EeUdZ",children:[(0,s.jsx)(_.B,{className:"org_self_serve_modals--errorSvg--h8gsO",svg:V.A}),(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBannerText--srvT- org_self_serve_modals--headerModalText--h0Go9",children:[o===N.ud.DESIGN&&(0,x.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.DESIGN].minSeats}),o===N.ud.FIGJAM&&(0,x.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.FIGJAM].minSeats}),o===N.ud.DEV_MODE&&(0,x.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.ud.DEV_MODE]?.minSeats||0}),"total"===o&&!!e.minTotalSeats&&((0,n.kc)().org_checkout_min_seat_info_copy?(0,x.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats,seatsText:(0,x.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,x.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats})}):(0,x.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))]})]})}),t.sort(A.AG).map(t=>{let r=y[t],n=e.seatDataByLicenseType[t],o=a[t];return void 0===r||void 0===n||void 0===o?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(z,{height:16}),(0,s.jsx)("div",{className:"org_self_serve_modals--headerModalBoldText--uhAfp org_self_serve_modals--headerModalText--h0Go9",children:r.headerString}),r.shouldShowDevModeIncludedText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{height:4}),(0,s.jsx)(l.G,{})]}),(0,s.jsx)(z,{height:12}),(0,s.jsx)(d.s,{"data-testid":t+"-seat_counter",billableProductKey:(0,A.Zx)(t),incrementSeats:()=>m(t),decrementSeats:()=>u(t),numSeats:o,minSeatsCount:n.minSeats,headerText:h.formatMoney(r.totalSeatCount*n.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,v.mx)(e.showAnnualPrice,r.totalSeatCount,!0,n.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>p(e,e=>{i({...a,[t]:e})})})]},t)}),(0,s.jsx)(z,{height:18}),(0,s.jsx)("div",{className:"org_self_serve_modals--divider--cY9-m"})]})},"AdditionalEditorsModal");var H=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(H||{});function F({userData:e,checkboxHandler:t}){let[a,n]=(0,r.useState)(0),l=(0,i.wA)(),d=({rect:e,designChecked:s,...r})=>{if(t(r),r.newVal&&a<3){n(e=>e+1);let t=s?(0,x.t)("checkout.switch_seat_from_design_to_devmode"):(0,x.t)("checkout.enabled_devmode");l(E.eB({target:{kind:C.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:C.Zj.RIGHT,hideAfterDelay:1e3}))}};return(0,s.jsx)(s.Fragment,{children:e.map((a,r)=>(0,s.jsxs)("div",{"data-testid":"user-data-row",children:[(0,s.jsxs)(q,{rowType:"data",children:[(0,s.jsx)(k.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),(0,s.jsx)(W,{userInfo:a}),(0,s.jsx)(y.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),(0,s.jsx)(m.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--M-CsB",onChange:e=>{d({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),(0,s.jsx)(m.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox---FJmg",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})]}),r!==e.length-1&&(0,s.jsx)(K,{})]},a.user.id))})}function q({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return(0,s.jsx)(g.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0,children:t.map((e,t)=>(0,s.jsx)(g.Y,{width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16},children:e},t))})}function K(){return(0,s.jsx)("div",{className:p.s.wFull.colorBgTertiary.h1.$})}function Y({teamId:e}){return(0,s.jsx)("div",{className:p.s.w8.h8.bRadius2.minW8.$,style:h.sx.add({backgroundColor:(0,R.$L)(e,R.us)}).$})}function W({userInfo:e}){return e.teams.length>1?(0,s.jsx)("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":C.Ib.SPECIAL,"data-tooltip":M,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0,children:(0,s.jsx)(f.E,{color:"default",children:(0,x.tx)("all_carts.editor_table.multiple_teams")})}):(0,s.jsxs)(g.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start",children:[(0,s.jsx)(Y,{teamId:e.teamIds[0]}),(0,s.jsx)("div",{className:p.s.noWrap.ellipsis.overflowHidden.$,children:(0,s.jsx)(f.E,{color:"default",children:e.teams[0]?.name})})]})}(0,I.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:i,minTotalSeats:n,dispatch:l,seatInfo:_,monthlyPriceByProduct:p}){let[h,y]=(0,r.useState)(e),[v,E]=(0,r.useState)({design:_.design.additionalSeatCount,figjam:_.figjam.additionalSeatCount,dev_mode:_.dev_mode.additionalSeatCount}),b=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let s of Object.values(h))s.designEditor&&e++,s.devMode&&a++,s.figjamEditor&&t++;return(e+=v.design,a+=v.dev_mode,t+=v.figjam,n&&e+t+a<n)?3:e<_.design.minCount||e>99?1:t<_.figjam.minCount||t>99?2:0},[v,h,n,_]),A=e=>{v[e]>=99||E(t=>({...t,[e]:t[e]+1}))},C=e=>{v[e]<=0||E(t=>({...t,[e]:t[e]-1}))},I=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||E(e=>({...e,[t]:a}))},k=new w.vr(i),R=()=>{l(S.Ce())};return(0,s.jsx)(T.fu,{name:"Select Editors Modal",children:(0,s.jsxs)(O.ey,{size:864,maxHeight:672,hide:()=>l(S.Ce()),className:"org_self_serve_modals--selectEditorsModal--D0yWS",children:[(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalHeader--wPo15 org_self_serve_modals--headerModalText--h0Go9",children:[(0,x.tx)("checkout.add_or_remove_editors"),(0,s.jsx)(c.s_,{customStyle:{position:"initial"},dispatch:l,onClose:R})]}),(0,s.jsx)(K,{}),(0,s.jsxs)(q,{rowType:"header",children:[(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("all_carts.editor_table.Name")}),(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("all_carts.editor_table.Teams")}),(0,s.jsxs)(g.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("general.figma_design")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.E,{color:"handoff",fontWeight:"medium",children:(0,x.tx)("general.dev_mode")}),"\xa0",(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("checkout.dev_mode_included_text_formatted.included")})]})]}),(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("general.dev_mode")}),(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("general.figjam")})]}),(0,s.jsx)(K,{}),(0,s.jsx)(u.P,{maxHeight:426,children:(0,s.jsx)(F,{userData:Object.values(h),checkboxHandler:({userId:e,type:t,newVal:a})=>{let s={...h[e],[t]:a};"devMode"===t&&a&&(s.designEditor=!1),"designEditor"===t&&a&&(s.devMode=!1),y(t=>({...t,[e]:s})),(0,j.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})}),(0,s.jsx)(K,{}),(0,s.jsxs)(q,{rowType:"footer",children:[(0,s.jsxs)(g.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(f.E,{color:"default",fontWeight:"medium",children:(0,x.tx)("all_carts.add_additional_editors.seat_rename")}),(0,s.jsx)(f.E,{fontWeight:"regular",color:"secondary",children:(0,x.tx)("all_carts.add_additional_editors_description.seat_rename")})]}),(0,s.jsx)(d.s,{billableProductKey:N.ud.DESIGN,incrementSeats:()=>A(N.ud.DESIGN),decrementSeats:()=>C(N.ud.DESIGN),numSeats:v.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.DESIGN)}),(0,s.jsx)(d.s,{billableProductKey:N.ud.DEV_MODE,incrementSeats:()=>A(N.ud.DEV_MODE),decrementSeats:()=>C(N.ud.DEV_MODE),numSeats:v.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.DEV_MODE)}),(0,s.jsx)(d.s,{billableProductKey:N.ud.FIGJAM,incrementSeats:()=>A(N.ud.FIGJAM),decrementSeats:()=>C(N.ud.FIGJAM),numSeats:v.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.FIGJAM)})]}),(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalActions--ng3b0 org_self_serve_modals--selectEditorModalFooter--8vKi7",children:[0!==b?(()=>{switch(b){case 0:default:return;case 1:return(0,s.jsx)(f.E,{color:"danger",children:(0,x.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:_.design.minCount})});case 2:return(0,s.jsx)(f.E,{color:"danger",children:(0,x.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:_.figjam.minCount})});case 3:return(0,s.jsx)(f.E,{color:"danger",children:(0,x.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:n})})}})():(0,s.jsx)(f.E,{fontWeight:"regular",color:"secondary",children:(0,x.tx)("all_carts.new_total",{total:k.formatMoney(function(e,t,a){let s=t.design,r=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?s++:e[t].devMode&&i++,e[t].figjamEditor&&r++;return s*a[N.ud.DESIGN]*12+r*a[N.ud.FIGJAM]*12+i*a[N.ud.DEV_MODE]*12}(h,v,p),{showCents:!0})})}),(0,s.jsxs)("div",{className:"org_self_serve_modals--buttonGroup--U5iQn",children:[(0,s.jsx)(o.nR,{onClick:R,children:(0,x.t)("general.cancel")}),(0,s.jsx)(m.$$,{onClick:()=>{0===b&&(a(v),t(h),l(S.Ce()))},disabled:0!==b,children:(0,x.t)("checkout.update_seats")})]})]})]})})},"SelectEditorsModal")},917296:(e,t,a)=>{a.d(t,{W:()=>p,_:()=>x});var s=a(104076),r=a(511570),i=a.n(r),n=a(555013),l=a(679359),d=a(652539),o=a(192075),c=a(412469),m=a(468896);if(443==a.j)var u=a(933949);function _(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function p(){return(0,s.jsx)("span",{children:(0,o.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(n.CY,{href:"/ssa",target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(n.CY,{href:(0,o.dS)("/renewal-and-cancellation"),target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})})}function x(e){let t=new c.vr(e.currency);return(0,s.jsx)("div",{className:m.jg,children:(0,s.jsxs)("div",{className:i()(m.M7,m.Et),children:[(0,s.jsxs)("div",{className:m.cc,children:[(0,s.jsx)(d.B,{svg:u.A,className:m.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),(0,s.jsx)("div",{className:m.W,children:(0,o.tx)("org_self_serve.confirmation_step.you_re_all_set")})]}),(0,s.jsxs)("div",{className:m.Jo,children:[(0,s.jsx)("div",{className:m.Qv,children:(0,o.tx)("org_self_serve.confirmation_step.order_confirmation_message")}),(0,s.jsx)(_,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(_,{height:24}),(0,s.jsxs)("div",{className:m.N5,children:[(0,s.jsxs)("div",{className:m.I1,children:[(0,o.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),(0,s.jsx)("span",{className:m.iv,children:t.formatMoney(e.totalCents,{showCents:!1})})]}),(0,s.jsx)(_,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(_,{height:32}),(0,s.jsxs)("div",{className:m.Ed,children:[!e.orgMigrated&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.kt,{}),(0,s.jsx)("div",{className:m.nm,children:(0,o.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(n.$$,{disabled:!e.orgMigrated,className:m.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button",children:(0,o.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")})]})]})]})]})})}},103378:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>y});var s=a(104076),r=a(716976),i=a(237420),n=a(140490),l=a(572761),d=a(640718),o=a(101880),c=a(192075),m=a(239904),u=a(147046),_=a(483200),p=a(432135),x=a(111297),h=a(412469),g=a(71004);function y(e){return(0,s.jsx)(n.u,{label:"PromoReviewPage",children:(0,s.jsx)(f,{...e})})}function f(e){let{selectedView:t,promo:a}=e,n=(0,i.wA)(),y=(0,g.Ud)({teamId:t.teamId}),f=(0,r.useCallback)(()=>{(0,l._H)(),n(_.Ay({promo:null})),n(u.sf(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},[n,e.selectedView.previousView,t.teamId]);(0,r.useEffect)(()=>{a||f()},[a,f]);let v=()=>{n(p.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:f,onError:f}))};return a?(0,s.jsx)(x.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId},children:(0,s.jsxs)("div",{className:"promo_modals--promoReviewInner--O81Uu",children:[(0,s.jsx)("div",{className:"promo_modals--cancelRow--Zrs8S",children:(0,s.jsx)("button",{type:"button",className:"promo_modals--cancelButton--ho2Ks text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:f,children:(0,c.tx)("promo.promo_review.cancel")})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewTitle--fatmf text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:(0,c.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewDescription--uLn0D text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,c.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})}),(0,s.jsx)("div",{children:(0,s.jsx)(o.x,{isLoading:y,children:()=>(0,s.jsx)(d.o,{children:(0,s.jsx)(m.d,{selectedView:t,onClickConfirm:v,currency:(0,h.LN)(),canSeeBillingAddressExp:!1})})})})]})}):null}},755462:(e,t,a)=>{a.d(t,{m:()=>N});var s=a(104076),r=a(716976),i=a(237420),n=a(382629),l=a(638004),d=a(929302),o=a(950187),c=a(268389),m=a(293422);if(443==a.j)var u=a(101441);var _=a(901014),p=a(6817),x=a(236631),h=a(352630),g=a(192075),y=a(911990),f=a(366535),v=a(271330),S=a(781611),E=a(959834),T=a(134798);let j=(0,E.Ju)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:i,open:l,onClose:u}=e,h=d.hS({open:l,onClose:u}),[f,v]=(0,r.useState)(a),E=e=>t=>{v((0,T.$$)(f,t,e))},j=E(1),N=E(-1),b=r.useCallback(e=>t=>v((0,T.$$)(f,e,t-(f[e]||0))),[f]);return(0,s.jsx)(o.bL,{manager:h,width:264,htmlAttributes:{"data-testid":"additional-seats--modal"},children:(0,s.jsxs)(c.vo,{children:[(0,s.jsx)(c.Y9,{children:(0,s.jsx)(c.hE,{children:(0,g.tx)("checkout.additional_seats.add_or_remove_unassigned_seats")})}),(0,s.jsxs)(c.nB,{children:[(0,s.jsx)("div",{className:x.s.pt8.pb24.colorTextSecondary.$,children:(0,s.jsx)("p",{children:(0,g.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on")})}),(0,s.jsx)(y.Y,{direction:"vertical",spacing:16,padding:{bottom:16},children:Object.keys(f).sort(S.AG).map(e=>(0,n.uy)(t[e])||(0,n.uy)(f[e])?null:(0,s.jsx)("div",{"data-testid":`additional-seats--${e}`,children:(0,s.jsx)(p.s,{billableProductKey:e,numSeats:f[e],minSeatsCount:0,headerText:(0,g.t)("checkout.additional_seats.seat_label",{seatType:t[e].displayName}),headerSubText:(0,g.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>j(e),decrementSeats:()=>N(e),updateAdditionalSeatsText:(0,p.K)(b(e))})},e))})]}),(0,s.jsx)(c.wi,{children:(0,s.jsxs)(c.jk,{children:[(0,s.jsx)(m.$n,{variant:"secondary",onClick:u,htmlAttributes:{"data-testid":"additional-seats--cancel"},children:(0,g.tx)("checkout.additional_seats.cancel")}),(0,s.jsx)(m.$n,{variant:"primary",onClick:()=>{_.az.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(f),tier:e.tier}),i(f),u()},htmlAttributes:{"data-testid":"additional-seats--confirm"},children:(0,g.tx)("checkout.additional_seats.confirm")})]})})]})})},"AdditionalSeatsModal");function N({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}){let n=(0,i.wA)(),d=(0,v.L)(l.e.MONETIZATION_UPGRADES);return(0,s.jsx)(h.$z,{variant:"ghost","aria-label":(0,g.t)("checkout.additional_seats.add_seats_to_assign_later"),htmlAttributes:{"data-testid":"additional-seats--button"},trackingOptions:d,onClick:()=>{n((0,f.to)({type:j,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}}))},iconPrefix:(0,s.jsx)(u.P,{}),children:(0,g.tx)("checkout.additional_seats.add_seats_to_assign_later")})}},784219:(e,t,a)=>{a.d(t,{x:()=>n});var s=a(104076),r=a(236631),i=a(659062);function n({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{style:i.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a,children:[e&&(0,s.jsx)("h3",{className:r.s.mb16.fontMedium.font15.$,children:e}),t]})}},183058:(e,t,a)=>{a.d(t,{j:()=>w});var s=a(104076),r=a(659062),i=a(555013),n=a(236631),l=a(192075),d=a(244205),o=a(608175),c=a(984887),m=a(784219);function u(e){let t=e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return(0,s.jsxs)(m.x,{title:(0,l.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(_,{header:e.tier===o.Ju.ORG?(0,l.t)("checkout.cart_plan_details.organization_name"):(0,l.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.billing_address"),value:p(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.shipping_address"),value:p(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)(i.Ph,{onClick:e.navigateToEditDetails,className:n.s.font13.py12.$,trackingProperties:{trackingDescriptor:d.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0,children:(0,l.tx)("checkout.cart_plan_details.edit_details")})]})}function _({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:n.s.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a,children:[(0,s.jsx)("p",{className:n.s.font13.lh24.spacingWide.colorTextSecondary.pb4.$,children:e}),(0,s.jsx)("p",{className:n.s.font13.lh24.colorText.breakWord.$,children:t})]})}function p(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var x=a(716976),h=a(951002),g=a(989941),y=a(452981),f=a(419822),v=a(352630),S=a(917296),E=a(104034),T=a(430230);let j=(0,s.jsx)(i.Us,{target:"_blank",trusted:!0,href:"/pricing",children:(0,l.tx)("checkout.monthly_price")});function N({title:e,countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:u,isRequestPending:_,tier:p,onSubmit:h,onSubmitTrackingProperties:j}){let[N,A]=x.useState(!1),w=_||!N,C=(0,s.jsx)(g.S,{label:(0,s.jsx)(y.J,{children:(0,s.jsx)("span",{className:n.s.font13.$,children:p===o.Ju.ORG?(0,s.jsx)(S.W,{}):(0,s.jsx)(E.Um,{})})}),checked:N,onChange:A}),I=(0,s.jsx)("div",{className:n.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(f.k,{})});return(0,s.jsxs)(m.x,{title:e,dataTestId:"cart-review",children:[(0,s.jsx)("div",{className:n.s.mt16.$,children:(0,s.jsx)(T.O,{countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:u??0,isCartReviewSummary:!0,tier:p})}),(0,s.jsx)(b,{tier:p,isAnnual:a===c.NW.YEAR}),(0,s.jsx)("div",{className:n.s.my24.$,style:r.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox",children:C}),(0,s.jsx)(v.lR,{onClick:h,disabled:w,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:d.c.COMPLETE_PURCHASE,...j},children:_?I:(0,l.tx)("checkout.complete_purchase")})]})}function b({tier:e,isAnnual:t}){let a=e===o.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:n.s.mt24.$,"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:n.s.py8.px16.colorBgSecondary.bRadius5.flex.flexColumn.gap4.$,children:[(0,s.jsx)("p",{className:n.s.textBodyMediumStrong.$,children:(0,l.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case o.Ju.ORG:return(0,l.tx)("checkout.cart_review_upgrade_info_org");case o.Ju.PRO:return t?(0,l.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:j}):(0,l.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,h.wc)(e)}}(e,t)}),(0,s.jsx)(i.Ph,{className:n.s.textBodyMediumStrong.$,style:r.sx.add({height:"16px"}).$,target:"_blank",href:a,trusted:!0,children:(0,l.tx)("checkout.learn_more")})]})})}var A=a(785034);function w(e){return(0,s.jsxs)("div",{style:r.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(u,{...e}),e.hasUpgradeSucceeded?(0,s.jsx)(A.f,{}):(0,s.jsx)(N,{...e})]})}},134798:(e,t,a)=>{a.d(t,{$$:()=>x,Ed:()=>h,MZ:()=>c,WQ:()=>d,f8:()=>l,md:()=>o,n5:()=>p,wh:()=>m});var s=a(385446),r=a.n(s),i=a(649693),n=a(347592);let l=1,d=1;function o(e,t){let a={};for(let s of Object.keys(e)){let r=e[s]||"";t.includes(s)&&(0,i.dA)(r)&&(a[s]=r)}return a}function c(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:[e],selectedUserSeatTypes:t,additionalSeatCounts:a}}function m(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatCounts:a}}function u(e){return{type:"error",message:e}}function _(e){return{type:"success",value:e}}function p(e,t){var a,s,r;switch(t.type){case"changeSeatType":return a=t.userId,s=t.seatType,a in e.selectedUserSeatTypes?_({...e,selectedUserSeatTypes:{...e.selectedUserSeatTypes,[a]:s}}):u(`Tried to change seat for not-present user ${a}`);case"setAdditionalSeats":return Object.values(r=t.additionalSeatCounts).some(e=>e<0)?u("Blocked attempt to set negative additional seats"):_({...e,additionalSeatCounts:r})}}function x(e,t,a){return{...e,[t]:Math.max(0,(e[t]||0)+a)}}function h(e){let t=new Set(n.N_.toArray()),a=new Set(Object.keys(e));return!(!r()(t,a)||Object.values(e).find(e=>Number.isNaN(e)||e<0))}},473893:(e,t,a)=>{a.d(t,{z:()=>j});var s=a(104076),r=a(716976),i=a(293422);if(443==a.j)var n=a(419822);if(443==a.j)var l=a(368581);if(443==a.j)var d=a(336518);if(443==a.j)var o=a(452981);var c=a(520741),m=a(236631),u=a(192075),_=a(659062),p=a(503801),x=a(900215),h=a(244205),g=a(111297),y=a(506192),f=a(412469),v=a(984887),S=a(784219),E=a(430230);let T=(0,g.tf)(i.Pw);function j({title:e,countByBillableProductKey:t,tier:a,billingInterval:i,currency:c,buttonText:g,isButtonDisabled:j,isLoading:b,onClickNext:A,onSwitchCurrency:w,onSwitchBillingInterval:C,footer:I,canEnforcePaidSeatMinimum:k,trackingProperties:R}){let P=!!t,O=(0,f._Z)(),M=(0,y.Um)(),[D,L]=function(e,t,a,s){let[i,n]=r.useState(!1),l=r.useCallback((e,t)=>!!(s&&e&&!(0,p.A)(e,t)),[s]);r.useEffect(()=>{i&&!l(t,a)&&n(!1)},[t,a,s,i,l]);let d=r.useCallback(s=>{if(!i){if(l(t,a)){n(!0);return}e(s)}},[t,a,i,l,e]);return[i,d]}(A,t,a,k),B=(0,s.jsx)("div",{className:m.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(n.k,{})});return(0,s.jsxs)(S.x,{title:e,dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:m.s.mt16.$,children:P?(0,s.jsxs)(s.Fragment,{children:[O&&(0,s.jsxs)("div",{className:m.s.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{children:(0,u.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(x.D,{currency:c,dropdownShown:M,supportedCurrencies:(0,f.B9)(),changeCurrency:e=>{w(e)},shortFormDisplay:!0,paddingOverride:0})]}),C&&P&&(0,s.jsx)("div",{className:m.s.my16.$,style:_.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(l.b,{legend:(0,s.jsx)(d.q,{children:(0,u.tx)("checkout.sidebar.switch_your_billing_interval")}),value:i,onChange:e=>C(e),children:[(0,s.jsx)(l.c,{value:v.NW.YEAR,label:(0,s.jsxs)(o.J,{className:m.s.flex.itemsCenter.gap16.$,children:[(0,u.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("b",{className:m.s.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:_.sx.add({fontSize:"10px"}).$,children:(0,u.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(l.c,{value:v.NW.MONTH,label:(0,s.jsx)(o.J,{children:(0,u.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsx)("div",{className:m.s.pt16.$,children:(0,s.jsx)(E.O,{countByBillableProductKey:t,billingInterval:i,currency:c,isCartReviewSummary:!1,tier:a})})]}):(0,s.jsx)("p",{className:m.s.colorTextSecondary.$,children:(0,u.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{style:_.sx.add({marginTop:"80px"}).$,children:[D&&(0,s.jsx)(N,{}),(0,s.jsx)(T,{onClick:L,disabled:j||b,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:h.c.CART_SIDEBAR,...R},children:b?B:g}),I&&(0,s.jsx)("div",{className:m.s.mt16.$,"data-testid":"cart-sidebar-footer",children:I})]})]})}function N(){return(0,s.jsx)("div",{className:m.s.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner",children:(0,s.jsx)(c._,{color:c.S.WARNING,text:(0,s.jsx)("p",{style:_.sx.lh14.add({fontSize:"9px"}).$,children:(0,u.tx)("checkout.sidebar.paid_seat_minimum_banner")})})})}},239904:(e,t,a)=>{a.d(t,{d:()=>R});var s=a(104076),r=a(716976),i=a(237420),n=a(989941),l=a(452981),d=a(219199),o=a(555013),c=a(679359),m=a(192075),u=a(525980),_=a(104034),p=a(459494),x=a(293422),h=a(236631),g=a(147046),y=a(366535),f=a(111297),v=a(229910),S=a(984887);function E(e){return"org"===e.variant?(0,s.jsx)(j,{...e}):(0,s.jsx)(N,{...e})}let T=(0,f.tf)(x.$n);function j(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,S.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),(0,s.jsx)(A,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),(0,s.jsx)(A,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_organization")}),t&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.billing_address"),value:w(e.billingAddress)}),a&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.shipping_address"),value:w(e.shippingAddress)}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_payment")})]})}function N(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,n=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,S.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)("pro_cart.review.details")}),(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.team_name"),value:e.displayName}),(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.billing_address"),value:w(e.billingAddress)}),n&&(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.shipping_address"),value:w(e.shippingAddress)}),(0,s.jsx)(T,{variant:"link",onClick:e.canSeeBillingAddressExp?()=>{t(g.sf({...a,paymentStep:S.Vv.PAYMENT_AND_ADDRESS}))}:()=>{t((0,y.to)({type:v.L,data:{modalTitle:(0,m.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",children:(0,m.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")})]})}function b({subtitle:e}){return(0,s.jsx)("h2",{className:h.s.font15.fontMedium.lh24.colorText.$,children:e})}function A({header:e,value:t}){return(0,s.jsxs)("dl",{className:h.s.flex.flexColumn.mt16.$,children:[(0,s.jsx)("dt",{className:h.s.font11.lh16.spacingWide.colorText.$,children:e}),(0,s.jsx)("dd",{className:h.s.font13.lh24.fontMedium.colorText.breakWord.mb16.$,children:t})]})}function w(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var C=a(463756),I=a(412469),k=a(524254);function R(e){let[t,a]=r.useState(!1),x=new I.vr(e.currency),[h,g]=r.useState(!1),y=(0,i.d4)(e=>e.payment),f=(0,i.d4)(e=>e.payment,(e,t)=>h||e===t),v=(0,i.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",T=(0,p.Ik)(),j=y.displayName||v,N=y.legalName||v,b=y.billingPeriod===S.tY.STUDENT,A=!!(0,C.p)(e.selectedView,y),w=A||b,R=y.submitPending||!A&&!t,P=(0,u.s)(),{estimatedDesignCost:O,estimatedWhiteboardCost:M}=(0,C.m)({currency:e.currency}),D=y.numWhiteboardEditors,L=O(y.numDesignEditors,y.billingPeriod),B=M(D,y.billingPeriod),U=w?0:y.taxes?.total||L+B,V=new URLSearchParams(d.Ay.location.search),z=V.get("onCompleteRedirectFileKey"),G=V.get("onCompleteRedirectNodeId"),{trackingDescriptor:$,buttonText:H,finePrint:F}=(0,_.V8)({isPromo:A,isEducationTeam:b,claimsEndAtDate:y.promo?.claims_end_at}),q=async t=>{t.preventDefault(),await g(!0),e.onClickConfirm()};return(0,s.jsxs)("div",{className:k.HX,children:[(0,s.jsx)("div",{className:k.PT,children:(0,s.jsx)(E,{displayName:j??"",legalName:N??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})}),(0,s.jsxs)("div",{className:k.Bo,children:[(0,s.jsx)("div",{className:k.TV,"data-testid":"review-step-upgrade-title",children:(0,m.tx)(b?"edu.checkout_team_name":T?y.billingPeriod===S.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:v})}),(!P||!w)&&(0,s.jsx)(_.$c,{payment:f,currency:e.currency,isPromo:A,isEducationTeam:b,hasCartStickerShock:T}),(0,s.jsx)("div",{className:k.pV}),(0,s.jsx)(o.Kz,{multiple:2}),f.taxes&&!!e.billingAddress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Wy,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:x.formatMoney(A?0:f.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),(0,s.jsx)(o.Kz,{multiple:1.5}),(0,s.jsx)(_.Wy,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:x.formatMoney(f.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:f.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),(0,s.jsx)(o.Kz,{multiple:1.5})]}),(0,s.jsx)(_.Wy,{"data-testid":"confirm-total-summary",mainText:b?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:x.formatMoney(U,{showCents:!0,showFullFormat:(0,I._Z)()}),subText:A?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:f.promo.promo_value}):void 0}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{children:[F,!A&&(0,s.jsx)("div",{className:k.Gn,children:(0,s.jsx)(n.S,{checked:t,onChange:a,label:(0,s.jsx)(l.J,{children:(0,s.jsx)("span",{children:(0,s.jsx)(_.Um,{})})})})})]}),(0,s.jsx)(o.Kz,{multiple:2.5}),(0,s.jsx)(o.Kz,{multiple:2.5}),(0,s.jsx)(o.vd,{className:k.fK,onClick:q,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(G&&z),trackingDescriptor:$},disabled:R,dataTestId:"confirm-purchase-button",children:y.submitPending?(0,s.jsx)(c.kt,{className:k.S}):H})]})]})}},935835:(e,t,a)=>{a.d(t,{I:()=>m,y:()=>u});var s=a(104076),r=a(555013),i=a(388816),n=a(652539),l=a(192075),d=a(244205),o=a(524254);if(443==a.j)var c=a(100203);var m=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(m||{});function u({type:e,teamName:t,setTeamName:a,onNext:m,upgradeExistingTeam:u,promo:_}){let p={starter:{title:(0,l.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,l.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,l.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,l.tx)("all_carts.create_team.create_team"),trackingDescriptor:d.c.SEND_INVITES},pro:{title:(0,l.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,l.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,l.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:_?(0,l.tx)("pro_cart.sidebar.next_review"):(0,l.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:_?d.c.REVIEW:d.c.SET_EDITORS},org:{title:(0,l.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,l.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,l.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,l.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:d.c.SELECT_TEAM}}[e];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o.Fb,children:p.title}),(0,s.jsx)(r.Kz,{multiple:.5}),(0,s.jsx)("div",{className:o.b0,children:p.subtitle}),(0,s.jsxs)("div",{className:o.F0,children:[(0,s.jsx)(n.B,{svg:c.A,className:o.Pr}),(0,s.jsx)(i.i,{className:o.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})]}),(0,s.jsx)(r.vd,{className:o.eA,onClick:m,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim(),children:p.next}),!!u&&(0,s.jsx)(r.Us,{className:o.x,onClick:u,trusted:!0,trackingProperties:{trackingDescriptor:d.c.UPGRADE_EXISTING_TEAM},children:(0,l.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")})]})}},785034:(e,t,a)=>{a.d(t,{f:()=>d});var s=a(104076);if(443==a.j)var r=a(419822);var i=a(236631),n=a(659062),l=a(784219);function d(){return(0,s.jsx)(l.x,{title:null,dataTestId:"loading-cart-card",children:(0,s.jsx)("div",{className:i.s.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:n.sx.add({height:"208px"}).$,children:(0,s.jsx)(r.k,{})})})}},430230:(e,t,a)=>{a.d(t,{O:()=>A});var s=a(104076);if(443==a.j)var r=a(951002);if(443==a.j)var i=a(382629);var n=a(638004);if(443==a.j)var l=a(480795);var d=a(833805),o=a(550209),c=a(236631),m=a(192075),u=a(659062),_=a(171660),p=a(373533),x=a(236753),h=a(788499),g=a(502907),y=a(111297),f=a(817647),v=a(649693),S=a(347592),E=a(781611),T=a(412469),j=a(608175),N=a(984887),b=a(563554);function A({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:r,taxPercent:i,tier:n}){let o=(0,f.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:n,renewalTerm:t,unit:t}}),g=(0,f.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:n,renewalTerm:t,unit:N.NW.MONTH}}),[v,T]=(0,d.Ad)(o,g);if(!v.data||!T.data)throw Error("Price data is null");let j=(0,x.s$)(v.data),A=(0,x.s$)(T.data),k=i||0,R=e=>(0,p.up)(e,a,{showCents:r}),P=(0,p.Vh)(e,j),O=(0,p.kV)(e,j,k),M=(0,p.N9)(e,j,k),D=R(P),L=R(O),B=R(M),U=(0,s.jsx)(_.E,{fontWeight:"medium",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.review_in_tax_disclaimer")}),V=t===N.NW.YEAR;return(0,s.jsx)(y.fu,{name:b.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:n,billingInterval:t,countBySeatType:(0,h.gS)(e),currency:a,taxPercent:k,subtotal:P,taxTotal:O,total:M},enabled:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:u.sx.add({marginBottom:"24px"}).$,children:Object.keys(e).sort(E.AG).map(t=>(0,s.jsx)(w,{billableProductKey:t,count:e[t]||0,currency:a,isAnnual:V,isCartReviewSummary:r,paymentPrices:j,lineItemPrices:A},t))}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.if(r,c.s.font13.lh24).$,children:(0,m.tx)("checkout.subtotal")}),(0,s.jsx)("p",{className:c.s.if(r,c.s.font13.lh24).$,children:I({price:D,isCartReviewSummary:r,isAnnual:V})})]}),!r&&(0,s.jsx)(_.E,{fontWeight:"regular",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.tax_disclaimer_revised",{checkoutStep:U})}),r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes",children:[(0,s.jsxs)("div",{className:c.s.flexColumn.$,children:[(0,s.jsx)("h3",{className:c.s.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.tax")}),(0,s.jsx)("h3",{className:c.s.colorTextSecondary.font13.lh24.$,children:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:k})})]}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:I({price:L,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.total_due_today")}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:I({price:B,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:c.s.font13.lh24.flex.$,children:[(0,s.jsx)(l.z,{className:c.s.minW24.$}),(0,s.jsx)(C,{tier:n,isAnnual:V})]})})]})]})})}function w({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:l,paymentPrices:d,lineItemPrices:u}){if(!(0,v.dA)(e))return(0,o.$D)(n.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let _=d[e];if((0,i.uy)(_))return(0,o.$D)(n.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summaryfor ${e}`)),null;let p=u[e];if((0,i.uy)(p))return(0,o.$D)(n.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let x=new T.vr(a),h=x.formatMoney(_*t,{showCents:l}),y=c.s.font13.lh24,f=(0,m.t)("checkout.price_per_month",{price:x.formatMoney(p)});return(0,s.jsxs)("div",{"data-testid":`purchase-summary-${e}-row`,className:c.s.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(l,c.s.itemsCenter,c.s.itemsStart).$,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:c.s.if(l,y).$,children:(0,m.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,g.tI)(e)})}),(0,s.jsx)("p",{className:c.s.colorTextSecondary.if(l,y).$,children:(0,m.tx)(r?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:f,quantity:t})})]}),(0,s.jsx)("p",{className:c.s.if(l,y).$,children:I({price:h,isCartReviewSummary:l,isAnnual:r})})]})}function C({tier:e,isAnnual:t}){switch(e){case j.Ju.ORG:return(0,m.tx)("checkout.purchase_summary.plan_renewal_org");case j.Ju.PRO:return t?(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,r.wc)(e)}}function I({price:e,isAnnual:t,isCartReviewSummary:a}){return a?e:t?(0,m.t)("checkout.price_per_year",{price:e}):(0,m.t)("checkout.price_per_month",{price:e})}},948058:(e,t,a)=>{a.d(t,{T:()=>V});var s=a(104076),r=a(716976),i=a(999083),n=a(638004),l=a(420680),d=a(365336),o=a(695961),c=a(901014),m=a(849757),u=a(236631),_=a(192075),p=a(963566),x=a(236753),h=a(788499),g=a(459494),y=a(111297),f=a(271330),v=a(608175),S=a(563554),E=a(755462),T=a(237420),j=a(382629),N=a(684742),b=a(293422),A=a(390579),w=a(736813);a(120440);var C=a(624258),I=a(366535),k=a(592726),R=a(826160),P=a(753151);let O="select_seats_table--sidePadding--rdwOD",M="select_seats_table--userColumn--0bg1B",D="select_seats_table--seatColumn--dUkDj",L="select_seats_table--teamColumn--kxWk-",B="select_seats_table--descriptionColumn--nvbAl";function U({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,teamId:n}){let l=(0,T.wA)(),d=(0,k.TA)(),o=e.id===d,c=(0,g.Dj)(),m=i===v.Ju.PRO&&c(),p=()=>{l((0,I.to)({type:P.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:n}}))};if((0,j.uy)(t[a]))return null;let x=(0,s.jsxs)(N.E,{className:"xh8yej3 x12ulsxz x1xijbu4 x133fa97 x19y5rnk xmkeg23 x1y0btm7 x7z60cl xkezfkh","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,children:[(0,s.jsx)("span",{className:"x1db2dqx",children:(0,s.jsx)(C.BC,{type:a,size:"24"})}),(0,s.jsx)("span",{children:t[a].displayName}),(0,s.jsx)(A.O,{className:"x8x9d4c"})]});return(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:O}),(0,s.jsx)("td",{className:M,"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(R.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})}),(0,s.jsx)("td",{className:D,children:m?x:(0,s.jsx)(b.IK,{variant:"ghost","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,iconPrefix:(0,s.jsx)(C.BC,{type:a,size:"24"}),children:(0,s.jsxs)("span",{className:u.s.flex.justifyBetween.ml2.$,children:[t[a].displayName,(0,s.jsx)(w.k,{})]})})}),i===v.Ju.ORG&&(0,s.jsx)("td",{className:L,children:e.teams}),(0,s.jsx)("td",{className:B,children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:O})]})}function V({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:T,setAdditionalSeats:j,tier:N}){let b=(0,r.useRef)(null),A=(0,f.L)(n.e.MONETIZATION_UPGRADES),w=(0,p.f)({tableContainerRef:b}),[C,I]=r.useState(a),[k,R]=r.useState(!1),P=r.useMemo(()=>{let t=[...e];return(0,i.v7)(t,e=>e.handle,{isDescending:k}),t},[e,k]),V=(0,x.UL)((0,x.iB)(a.selectedUserSeatTypes)),z=(0,x.UL)(a.additionalSeatCounts),G=(0,g.Dj)(),$=N===v.Ju.PRO&&G();return(0,s.jsx)(y.fu,{name:S.e0.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,h.Tj)(C.selectedUserSeatTypes),countBySeatType:(0,h.gS)((0,x.O$)(C.selectedUserSeatTypes,C.additionalSeatCounts)),selectedTeamIds:(0,h.gu)(C.selectedTeamIds),userIds:(0,h.gu)(e.map(e=>e.id))},trackingOptions:A,children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"select_seats_table--tableContainer--ft8tm",ref:b,"data-testid":"select-seats-table",children:[(0,s.jsx)(m.P,{maxHeight:w,className:"select_seats_table--scrollContainer--HMiGx",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"select_seats_table--table--hBe3G",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:O}),(0,s.jsxs)("th",{className:M,children:[(0,_.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:u.s.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(l.K,{onClick:()=>R(e=>!e),"aria-label":(0,_.t)("checkout.select_seats_table.sort"),children:k?(0,s.jsx)(d.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(o.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:D,children:$?(0,_.tx)("checkout.select_seats_table.seat_column_exp"):(0,_.tx)("checkout.select_seats_table.seat_column")}),N===v.Ju.ORG&&(0,s.jsx)("th",{className:L,children:(0,_.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:B,children:(0,_.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:O})]})}),(0,s.jsx)("tbody",{children:P.map(e=>(0,s.jsx)(U,{user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{c.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:N,teamId:N===v.Ju.PRO?C.selectedTeamIds[0]:void 0}),T(e.id,t)},tier:N,teamId:N===v.Ju.PRO?C.selectedTeamIds[0]:void 0},e.id))})]})}),(0,s.jsxs)("div",{className:u.s.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$,children:[(0,s.jsx)(E.m,{tier:N,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:j}),(0,s.jsx)("p",{children:(0,_.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,_.tx)("checkout.select_seats_table.assigned_seats",{count:V}),unassignedSeatsText:(0,_.tx)("checkout.select_seats_table.unassigned_seats",{count:z})})})]})]})})})}},753151:(e,t,a)=>{a.d(t,{Y:()=>h});var s=a(104076),r=a(638004),i=a(929302),n=a(950187),l=a(268389),d=a(236631),o=a(192075),c=a(911990),m=a(772180),u=a(637416),_=a(111297),p=a(271330),x=a(649693);let h=(0,a(959834).Ju)(function(e){let t=(0,p.L)(r.e.MONETIZATION_UPGRADES),{user:a,seatTypes:h,selectedSeatType:g,setSelectedSeatType:y,open:f,onClose:v,tier:S,teamId:E}=e,T=i.hS({open:f,onClose:v});return(0,s.jsx)(_.fu,{name:"Select User Seat Type Modal",properties:{teamId:E},trackingOptions:t,children:(0,s.jsx)(n.bL,{manager:T,width:480,htmlAttributes:{"data-testid":"select-user-seat-type--modal"},children:(0,s.jsx)(l.vo,{children:(0,s.jsx)(l.nB,{children:(0,s.jsxs)(c.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)("div",{className:d.s.mb24.$,children:(0,s.jsx)(u.j,{user:a,text:(0,o.t)("modify_plan_user_seat_modal.choose_seat",{name:a.handle})})}),(0,s.jsx)(m.m,{currentSeatType:g,setNextSeatType:e=>{y(e),v()},availableSeatCounts:null,pricing:Object.fromEntries(Object.entries(h).filter(([e,t])=>e!==x.Gu.VIEW&&!!t).map(([e,t])=>[e,t.displayPrice])),learnMoreLinkHref:"/pricing",displayPricing:!0,canSetCurrentSeatType:!0,tier:S})]})})})})})},"SelectUserSeatTypeModal")},454307:(e,t,a)=>{a.d(t,{kR:()=>j,vU:()=>N});var s=a(104076),r=a(237420),i=a(951002),n=a(901014),l=a(755444),d=a(186180),o=a(192075);if(443==a.j)var c=a(111679);var m=a(147046),u=a(244205),_=a(111297),p=a(134391),x=a(592726),h=a(71004),g=a(608175),y=a(984887),f=a(377026),v=a(524254);function S(e){return(0,s.jsx)(_.$z,{type:"button",className:v.Nd,trackingProperties:{trackingDescriptor:u.c.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel",children:(0,o.tx)("pro_cart.breadcrumbs.cancel")})}var E=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(E||{});function T(e,t,a,s){let r=t===y.tY.STUDENT,n=[];switch(e){case f.SC.CREATE_AND_UPGRADE:n.push(0),n.push(1),r?n.push(4):a||(n.push(4),n.push(5)),n.push(6);break;case f.SC.UPGRADE_EXISTING_TEAM:s===f.Sc.TEAM?(n.push(3),r||n.push(5)):r?(n.push(0),n.push(3)):a?n.push(0):(n.push(0),n.push(4),n.push(5)),n.push(6);break;case f.SC.CREATE:n.push(1),n.push(2),n.push(0),s===f.Sc.TEAM&&(r?n.push(4):a||(n.push(4),n.push(5)),n.push(6));break;default:(0,i.xb)(e)}return n.map(e=>(function(e){switch(e){case 0:return{step:y.Vv.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:y.Vv.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:y.Vv.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:y.Vv.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:y.Vv.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:y.Vv.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:y.Vv.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function j(e,t,a,s,r,i){let n=T(t,a,s,r).map(e=>e.step),l=n.indexOf(e);return i=i||n[0],-1===l?i:n[l+1]}function N(e){let{selectedView:t}=e,{teamId:a,paymentStep:i,teamFlowType:o}=t,u=(0,r.wA)(),_=(0,r.d4)(e=>e.payment.billingPeriod),E=x.iZ()?.id,j=T(o,_,(0,r.d4)(e=>e.payment.promo),e.selectedView.planType||f.Sc.UNDETERMINED),N=j.findIndex(e=>e.step===i);return(0,s.jsxs)("div",{className:v.N6,"data-testid":"cart-breadcrumb-menu-pro",children:[(0,s.jsx)(S,{onClick:()=>{((0,l.sj)(),e.isCampfireCart?(0,h.OI)(u):(0,h.Mt)(u),(0,f.h5)(o)&&null===a&&(0,p.Al)(E),E)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?u(c._l({workspace:{userId:E,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):u(m.sf(t.previousView||{view:"recentsAndSharing"})):u(m.sf(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),j.map((r,l)=>(0,s.jsx)(d.On,{selected:i===r.step,number:l+1,text:r.text,canClick:l<N,lightText:!0,onClick:()=>{n.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:i,toStep:r.step,tier:g.Ju.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),u(m.sf({...t,paymentStep:r.step,billingPeriod:_===y.tY.UNSPECIFIED?void 0:_,planType:(0,f.ck)(o,r.step)?f.Sc.UNDETERMINED:t.planType,teamFlowType:(0,f.jX)(o)&&r.step===y.Vv.PLAN_COMPARISON?f.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}},r.text))]})}},402858:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>eZ});var s=a(104076),r=a(716976),i=a(237420),n=a(951002),l=a(638004),d=a(901014),o=a(310725),c=a(219199),m=a(653899),u=a(328341),_=a(755444),p=a(833805),x=a(140490),h=a(572761),g=a(889438),y=a(1188),f=a(520741),v=a(236631),S=a(256384),E=a(259161),T=a(192075),j=a(659062),N=a(373533),b=a(236753),A=a(788499),w=a(906356),C=a(312156),I=a(183058),k=a(473893),R=a(935835),P=a(785034),O=a(454307),M=a(555013),D=a(524254);function L({disableInviteButton:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:i}){let n=(e,s)=>{s>=t.length||a(t.map((t,a)=>a===s?e:t))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:D.Fb,children:(0,T.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")}),(0,s.jsx)(M.Kz,{multiple:.5}),(0,s.jsx)("h2",{className:D.b0,children:(0,T.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")}),(0,s.jsx)(M.Kz,{multiple:4}),(0,s.jsxs)("div",{style:j.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$,children:[t.map((e,t)=>(0,s.jsx)(M.il,{value:e,onChange:e=>n(e.target.value,t),placeholder:(0,T.t)("pro_cart.add_collaborators.email")},`collaborator-email-input-${t}`)),(0,s.jsx)(M.Us,{onClick:()=>{a([...t,""])},trusted:!0,style:j.sx.alignLeft.font14.fontMedium.$,children:(0,T.tx)("pro_cart.add_collaborators.add_another")})]}),(0,s.jsxs)("div",{style:j.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$,children:[(0,s.jsx)(M.vd,{disabled:!!e,style:j.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r,children:(0,T.tx)("pro_cart.add_collaborators.sent_invites")}),(0,s.jsx)(M.Ph,{trusted:!0,onClick:i,style:j.sx.colorTextSecondary.alignCenter.$,children:(0,T.tx)("pro_cart.add_collaborators.skip_for_now")})]})]})}var B=a(276800),U=a(307279),V=a(924438),z=a(329065),G=a(944350),$=a(613997);function H({chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,currency:i,updateCurrency:n,upgradeExistingTeam:l}){let d=(0,U.U)(i);return(0,s.jsxs)("div",{style:j.sx.grid.gap16.p36.pb24.selectNone.mxAuto.add({width:"945px",maxWidth:"1049px"}).$,children:[(0,s.jsx)(V.f,{chooseEduPlan:t,chooseEnterprisePlan:B.lQ,chooseOrgPlan:r,chooseProPlan:a,chooseStarterPlan:e,currency:i,prices:d,teamPlan:G.Ag.STARTER,updateCurrency:n,withUpgradeExistingTeamOption:l}),(0,s.jsx)($.hK,{height:8}),(0,s.jsx)(z.L,{})]})}var F=a(111679),q=a(729226),K=a(147046),Y=a(366535),W=a(483200),J=a(432135),Z=a(443192),X=a(459494),Q=a(244205),ee=a(111297),et=a(271330),ea=a(817647),es=a(400136),er=a(649693),ei=a(347592),en=a(134391),el=a(958127),ed=a(745529),eo=a(554886),ec=a(537307),em=a(937505),eu=a(592726),e_=a(893393),ep=a(412469),ex=a(853039),eh=a(71004),eg=a(562311),ey=a(904017),ef=a(469229),ev=a(771717),eS=a(608175),eE=a(984887),eT=a(377026),ej=a(563554),eN=a(838887),eb=a(791400),eA=a(452981),ew=a(989941),eC=a(652539),eI=a(784219),ek=a(249586),eR=a(943325),eP=a(461749),eO=a(689190),eM=a(364616);let eD=(0,ee.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eL(e){let t=e.paymentMethods.filter(e=>e.type===eR.lB.CARD||e.type===eR.lB.SEPA);return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=function(e){if(e.type===eR.lB.CARD)return function(e){let t=e.display_brand in ez?ez[e.display_brand]:(0,T.t)("checkout.other");return`${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);if(e.type===eR.lB.SEPA)return function(e){let t=e.country?e.country.toUpperCase():(0,T.t)("checkout.other");return`SEPA ${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);throw Error(`Unknown payment method type: ${e.type}`)}(e),a=(0,b.DS)(e.address);return(0,s.jsxs)("option",{className:v.s.flex.justifyBetween.gap2.$,value:e.id,children:[(0,s.jsx)("span",{className:v.s.font13.$,children:t}),a&&(0,s.jsx)("span",{className:v.s.colorTextSecondary.font13.$,children:` - ${a}`})]},e.id)})})}function eB(e){return(0,s.jsx)("div",{className:eO.ri,children:(0,s.jsxs)("div",{className:v.s.flex.relative.wFull.itemsCenter.$,children:[(0,s.jsx)(eD,{name:"selected_saved_payment_method",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e.selectedPaymentMethod?.id&&e.enableSavedPaymentMethods?ek._R.POPULATED_COMPLETE:ek._R.NOT_POPULATED,onChange:t=>{let a=t.target.value,s=e.paymentMethods.find(e=>e.id===a);s&&e.setSelectedPaymentMethod(s)},value:e.selectedPaymentMethod?.id,children:(0,s.jsx)(eL,{paymentMethods:e.paymentMethods})}),(0,s.jsx)(eC.B,{style:j.sx.add({position:"absolute",right:"16px",pointerEvents:"none",color:"var(--color-icon)",fill:"var(--color-icon)"}).$,svg:eM.A})]})})}function eU(e){let{enableSavedPaymentMethods:t,setEnableSavedPaymentMethods:a}=e,r=(0,s.jsx)(eA.J,{children:(0,s.jsx)("span",{className:v.s.font13.$,children:(0,T.t)("checkout.use_saved_payment_method")})});return(0,s.jsx)("div",{className:v.s.mb6.if(!t,v.s.mb0).$,children:(0,s.jsx)(ew.S,{label:r,onChange:e=>{a(e)},checked:t})})}function eV(e){let{paymentMethods:t,setSelectedPaymentMethod:a,setEnableSavedPaymentMethods:r,enableSavedPaymentMethods:n,selectedPaymentMethod:l}=e,{error:d,errorCode:o}=(0,i.d4)(e=>e.payment),c=!!d&&null===o;return(0,s.jsxs)(eI.x,{title:(0,T.t)("checkout.payment_details"),children:[t.length>0&&(0,s.jsxs)("div",{className:v.s.alignLeft.$,children:[(0,s.jsx)(eU,{enableSavedPaymentMethods:n,setEnableSavedPaymentMethods:r}),n&&(0,s.jsx)(eB,{selectedPaymentMethod:l,enableSavedPaymentMethods:n,setSelectedPaymentMethod:a,paymentMethods:t})]}),(0,s.jsx)("div",{className:v.s.alignLeft.$,children:(0,s.jsx)(eP.S,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,hide:e.enableSavedPaymentMethods,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:c?d:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})})]})}let ez={american_express:"American Express",cartes_bancaires:"Cartes Bancaires",diners_club:"Diners Club",discover:"Discover",eftpos_australia:"Eftpos Australia",interac:"Interac",jcb:"JCB",mastercard:"Mastercard",union_pay:"Union Pay",visa:"Visa"};var eG=a(382629),e$=a(876299),eH=a(134798),eF=a(948058);function eq(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,er.a_)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}let eK=(e,t,a,s)=>{let[i,n]=(0,r.useState)(()=>{let r=function(e,t,a){let s;let{countBySeatType:r,selectedUserSeatTypes:i}=e||{countBySeatType:{},selectedUserSeatTypes:{}},n=t.map(e=>e.user.id),l=(0,eH.md)(i,n);return t.forEach(e=>{let t=e.user.id;l[t]||(l[t]=e.recommended_seat_type?.key??er.Gu.VIEW)}),s=(0,eH.Ed)(r)?{...r}:{developer:0,collaborator:0,expert:0},Object.values(l).forEach(e=>{"view"!==e&&(0,eG.Vq)(s[e])&&s[e]>0&&s[e]--}),(0,eH.MZ)(a,l,s)}(a,t,e);return s(eq(r)),r}),l=(0,r.useCallback)(e=>{try{n(t=>{let a=function(e,t){let a=(0,eH.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(eq(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{l({type:"changeSeatType",userId:e,seatType:t})},[l]),setAdditionalSeats:e=>l({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:i}};function eY({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:r,initCampfireSeats:i,onUpdateCampfireSeats:n}){let l=(0,e$.G)({currency:t,tier:eS.Ju.PRO,renewalTerm:a,showCents:!1}),[d]=(0,p.Ad)(l);if(null===d.data)throw Error("Seat types data is null");let o=d.data,{changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:u}=eK(e,r,i,n),_=r.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return(0,s.jsx)(eF.T,{users:_,seatTypes:o,changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:u,tier:eS.Ju.PRO})}let eW=e_.M4.Query({fetch:async e=>(await eN.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function eJ(e){let t;let a=(0,eu.iZ)(),n=a?.id,x=(0,_.DC)(),y=(0,i.d4)(e=>e.payment),E=(0,i.d4)(e=>e.teams),M=e.selectedView.paymentStep,D=(0,i.d4)(e=>e.roles.byTeamId),B=(0,ey.D6)("TeamUpgradeCart"),U=B.data?.permission===G.Xn.ADMIN,[V,z]=(0,r.useState)(x?.team_name??""),[$,Q]=(0,r.useState)(en.kt),ec=(0,ex.PS)((0,em.FC)()),e_=(0,X.e5)({userId:n,teams:Object.values(E),rolesByTeamId:D}),[eN,eA]=(0,r.useState)(!1),[ew,eC]=(0,r.useState)(x?.currency||y.currency||(0,ep.LN)()),eI=e=>{eC(e),tm(W.MN({currency:e}))},ek=y.billingPeriod,{editorStatusChanges:eR}=y,{ignoreCurrentPlan:eP}=e.selectedView,eO=e.selectedView.teamId,eM=(0,i.d4)(t=>(0,ef.Np)(t,{...e.selectedView,paymentStep:eE.Vv.CONFIRM_PAY})),eD=(0,i.d4)(t=>(0,ef.Np)(t,{...e.selectedView,paymentStep:eE.Vv.PAYMENT_AND_ADDRESS})),eL=(0,X.Mh)(),eB=void 0===y.cartSelections,eU=(0,u.ZC)(eB),ez=ei.N_.dict(e=>y.cartSelections?.countBySeatType?.[e]||0),eG=ek&&(0,ex.ne)(ek)||eE.NW.YEAR,e$=(0,ea.jv)({billableProductKeys:ei.N_,baseQuery:{currency:ew,tier:eS.Ju.PRO,renewalTerm:eG,unit:eG}}),[eH]=(0,p.Ad)(e$),eF=(0,ea.vu)(eH);if(null===eF.data)throw Error("Price data is null");let eq=eF.data,eK=(0,b.s$)(eq),eJ=(0,N.Vh)(ez,eK),[eZ,eQ]=(0,r.useState)([]),[e0,e1]=(0,r.useState)(null),{createPaymentElement:e5,unmountPaymentElement:e2,savePayment:e7,saveWithPaymentMethod:e3,billingAddress:e4,updateBillingAddress:e6,shippingAddress:e9,updateShippingAddress:e8,customerLegalName:te,setCustomerLegalName:tt,nameOnPaymentMethod:ta,setNameOnPaymentMethod:ts,vatGstId:tr,setVatGstId:ti,regionalVatGstId:tn,setRegionalVatGstId:tl,paymentMethodType:td,error:to}=(0,es.lo)({setupIntentParams:{redirect_url:eM,error_redirect_url:eD,subtotal_estimate:eJ,currency:ew,teamId:eO??void 0},setPaymentMethods:eQ,customerInfo:{teamId:eO},paymentFlowSource:es.wn.PRO_UPGRADE,currency:ew,billingPeriod:ek,defaultCountry:(0,ep.ub)(),initialBillingAddress:x?.billing_address,initialNameOnPaymentMethod:x?.name_on_payment_method,initialShippingAddress:x?.shipping_address,initialCustomerLegalName:x?.customer_legal_name,initialVatGstId:x?.vat_gst_id,initialRegionalVatGstId:x?.regional_vat_gst_id,teamName:x?.team_name||V,canSeeBillingAddressExp:eL,isCheckout:!0,isCampfireCart:!0}),tc=to?.code===es.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,tm=(0,i.wA)(),tu=(0,eh.Ud)({teamId:eO,canSeeBillingAddressExp:eL}),[t_]=(0,p.IT)(eW({teamId:eO}),{enabled:!!eO}),tp="loaded"!==t_.status,tx={user:{id:n,img_url:a.img_url,handle:a.handle,email:a.email},id:"",team_id:eO,recommended_seat_type:{key:er.ud.EXPERT,license_types:[]}};(0,r.useEffect)(()=>{(0,eE.HY)(M)||tm(K.sf({...e.selectedView,paymentStep:eE.Vv.CHOOSE_PLAN}))},[M,tm,e.selectedView]),(0,r.useEffect)(()=>{"loaded"===t_.status&&(0,A.R9)({eligibleTeamIds:[eO],eligibleTeamUsers:t_.data.eligible_team_users,tier:eS.Ju.PRO,step:M})},[t_]);let th=tc||y.submitPending,tg=r.useCallback(()=>{tm(K.sf({...e.selectedView,paymentStep:eE.Vv.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eP,billingPeriod:ek}))},[tm,e.selectedView,eP,ek]),ty=eO?E[eO]?.name:V,tf=y.displayName||ty;(0,en.pI)({loadingPaidEditors:tu,teamId:eO,teamName:eO?void 0:V,setTeamName:eO?void 0:z,collaborators:eO||e.selectedView.teamFlowType!==eT.SC.CREATE?void 0:$,setCollaborators:eO||e.selectedView.teamFlowType!==eT.SC.CREATE?void 0:Q});let tv=(0,i.d4)(e=>e.currentUserOrgId),tS=eP?null:tv,tE=(0,i.d4)(e=>tS?e.orgById[tS]:null),tT=(0,eb.Q)({currentOrgId:tS,currentTeamId:null}),tj=tT.data?.currentUser?.baseOrgUser?.workspaceUsers,tN=tj?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:tb}=(0,ev.LM)(tE,tN??null),tA=(0,i.d4)(e=>(0,eg.isOrgUserExternallyRestrictedFromState)(e));(0,m.h)(()=>{tm(Z.b({entered_pro_cart_flow:!0}))}),(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[tw,tC]=(0,r.useState)(!1);(0,r.useEffect)(()=>{M===eE.Vv.PAYMENT_AND_ADDRESS&&tc&&tg()}),(0,r.useEffect)(()=>{M===eE.Vv.CONFIRM_PAY&&!tu&&eB&&(0,d.sx)("pro_cart_selections_undefined_on_review_step",{teamId:eO,userId:n})},[eB,tu,M,n,eO]),(0,r.useEffect)(()=>{M===eE.Vv.CONFIRM_PAY&&eU&&!eB&&(0,d.sx)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:eO,loadingPaidEditors:tu})},[eB,eU,tu,M,eO]);let tI=(0,i.d4)(e=>!!e.user&&(0,g.cn)(e.user));(0,r.useEffect)(()=>{tI&&e.selectedView.isEduTeam?tm(W.Lo({billingPeriod:eE.tY.STUDENT})):e.selectedView.isEduTeam&&tm(W.Lo({billingPeriod:eE.tY.UNSPECIFIED}))},[tm,e.selectedView.isEduTeam,tI]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===eT.SC.CREATE_AND_UPGRADE&&(tA||tb===ev.z4.TEAM_CREATION_CONTROL)&&(c.Ay.redirect("/"),tm(S.s.error((0,T.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,tA,tb,tm]);let tk=y.currencyToSwitch;(0,r.useEffect)(()=>{tk&&eC(tk)},[eC,tk]),(0,r.useEffect)(()=>{eZ[0]&&(e1(eZ[0]),eA(!0))},[eZ,e1,eA]);let tR=ek===eE.tY.STUDENT,tP=$.filter(e=>e&&e.trim()).map(e=>e.trim()),tO=tP.filter(e=>!(0,o.xf)(e)),tM=!!a&&tP.filter(e=>e===a.email).length>0,tD=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,s=a.get("onCompleteRedirectFileKey"),r=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,O.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ek,y.promo,e.selectedView.planType||eT.Sc.UNDETERMINED);M===eE.Vv.CREATE_TEAM&&(z(V.trim()),tm(K.sf({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:eP,billingPeriod:ek}))),M===eE.Vv.ADD_COLLABORATORS&&(tO.length?tm(S.s.error((0,T.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:tO[0]}))):tM?tm(S.s.error((0,T.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):tm(K.sf({...e.selectedView,paymentStep:i,ignoreCurrentPlan:eP,billingPeriod:ek}))),M===eE.Vv.CHOOSE_PLAN?tR?tm(K.sf({...e.selectedView,paymentStep:i,billingPeriod:eE.tY.STUDENT,ignoreCurrentPlan:eP})):(tm(W.Je({editorStatusChanges:eR})),tm(K.sf({...e.selectedView,paymentStep:i,billingPeriod:y.billingPeriod,...s?{searchParams:{onCompleteRedirectFileKey:s,onCompleteRedirectNodeId:r}}:{},ignoreCurrentPlan:eP}))):M===eE.Vv.PAYMENT_AND_ADDRESS&&(tm(W.I2({submitPending:!0})),eN&&e0?await e3(e0):await e7(),tm(W.I2({submitPending:!1})))},tL=e.selectedView.teamFlowType===eT.SC.CREATE?()=>{tm((0,eo.KQ)({teamName:V,orgAccess:G.bU.PUBLIC,inviteEmails:tP,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,en.Al)(a?.id)},ignoreCurrentPlan:eP}))}:void 0;[eT.SC.CREATE_AND_UPGRADE,eT.SC.UPGRADE_EXISTING_TEAM].includes(e.selectedView.teamFlowType)&&(1===ec.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=eT.SC.UPGRADE_EXISTING_TEAM;tm(K.sf({...e.selectedView,teamFlowType:a,teamId:ec[0].id,paymentStep:(0,O.kR)(e.selectedView.paymentStep,a,t||null,y.promo,eT.Sc.TEAM,eE.Vv.CHOOSE_PLAN),planType:eT.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eP}))}:ec.length>1&&(t=e=>{e&&tm(W.Lo({billingPeriod:e})),tm((0,Y.to)({type:w.dR,data:{plan:C.I.PRO,entryPoint:(0,ed.c)(el.C6.UPGRADE_EXISTING_FROM_TEAM_CREATION)}}))}));let tB=a&&en.lX({teamId:eO,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===eT.SC.CREATE_AND_UPGRADE&&(tA||tb===ev.z4.TEAM_CREATION_CONTROL)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(ee.fu,{name:ej.e0.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:(0,ed.c)(e.selectedView.entryPoint),step:M,currency:ew,renewalTerm:eG,prices:(0,A.Jh)(eq)},enabled:!(tu||tp),trackingOptions:(0,et.E)(l.e.MONETIZATION_UPGRADES),children:(0,s.jsxs)("div",{"data-testid":"team-upgrade-billing-remodel",className:v.s.selectNone.$,children:[(0,s.jsx)(O.vU,{selectedView:e.selectedView,isCampfireCart:!0}),(0,s.jsxs)("div",{style:j.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$,children:[M!==eE.Vv.CREATE_TEAM&&(0,s.jsx)(eX,{step:M,teamName:ty??""}),M===eE.Vv.PLAN_COMPARISON&&(0,s.jsx)(H,{chooseStarterPlan:t?void 0:tL,chooseEduPlan:()=>{eO?tm(W.Vm({teamId:eO})):tm((0,Y.to)({type:q.q}))},chooseProPlan:t=>{tm(W.Lo({billingPeriod:t}));let a=(0,eT.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:eT.SC.CREATE_AND_UPGRADE;tm(K.sf({...e.selectedView,teamFlowType:a,paymentStep:(0,O.kR)(e.selectedView.paymentStep,a,t,y.promo,eT.Sc.TEAM),billingPeriod:t,planType:eT.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:eP}))},chooseOrgPlan:()=>{tm(W.Bq({currency:ew,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:V,inviteEmails:tP,previousView:e.selectedView},entryPoint:(0,ed.c)(el.C6.UPGRADE_NEW_TEAM_V2)}))},currency:ew,updateCurrency:eI,upgradeExistingTeam:t}),M===eE.Vv.CREATE_TEAM&&(0,s.jsx)(R.y,{type:e.selectedView.teamFlowType===eT.SC.CREATE?R.I.STARTER:R.I.PRO,teamName:V,setTeamName:z,onNext:tD,upgradeExistingTeam:t?()=>t?.(ek):void 0,promo:y.promo}),M===eE.Vv.ADD_COLLABORATORS&&(0,s.jsx)(L,{disableInviteButton:!tP.length,collaborators:$,setCollaborators:Q,willSendInvites:tD,skipInviteStep:()=>{if(Q(en.kt),n){let e=(0,en.lX)({teamId:null,userId:n});e&&(0,en.dT)(n,{...e,newCollaborators:en.kt})}tm(K.sf({...e.selectedView,paymentStep:eE.Vv.PLAN_COMPARISON,ignoreCurrentPlan:eP}))}}),M===eE.Vv.CONFIRM_PAY?(0,s.jsxs)(s.Fragment,{children:[tB&&(0,s.jsx)("div",{className:v.s.mxAuto.alignLeft.mb16.$,children:(0,s.jsx)(f._,{color:f.S.INFORMATION,text:(0,T.t)("pro_cart.review.extra_validation")})}),tu||eB?(0,s.jsx)(P.f,{}):(0,s.jsx)(I.j,{billingAddress:e4,billingInterval:eG,countByBillableProductKey:ez,currency:ew,displayName:tf??"",hasUpgradeSucceeded:tw,isRequestPending:y.submitPending,legalName:y.legalName,navigateToEditDetails:()=>{tm(K.sf({...e.selectedView,paymentStep:eE.Vv.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:eP,billingPeriod:ek}))},onSubmit:()=>{let t=()=>{tC(!0),(0,_.sj)(),(0,eh.OI)(tm),(0,eT.h5)(e.selectedView.teamFlowType)&&null===eO&&(0,en.Al)(n)};if(e.selectedView.teamId&&tR)tm(W.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&y.promo){let a=e.selectedView.teamId;tm(J.S_({teamId:a,teamName:E[a].name,promoCode:y.promo?.code||"",onSuccess:()=>{t(),(0,h._H)(),tm(W.Ay({promo:null})),n?e.selectedView.previousView?K.sf(e.selectedView.previousView):F._l({workspace:{userId:n,orgId:null,teamId:a},view:{view:"allProjects"}}):tm(K.sf(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,h._H)(),tm(W.Ay({promo:null})),tm(K.sf({...e.selectedView,paymentStep:eE.Vv.PLAN_COMPARISON,ignoreCurrentPlan:eP}))}}))}else{tm(Z.b({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:s,total:r}=(0,b.ZY)({countBySeatType:ez,applicablePrices:eK,taxPercent:y.taxes?.tax_percent??0}),i=(0,b.GL)({subtotal:a,taxTotal:s,total:r});tm(W.I2({submitPending:!0})),tm((0,J.gk)({teamId:e.selectedView.teamId,selectedCurrency:ew,teamName:V,teamFlowType:e.selectedView.teamFlowType,invites:tP,hasSelectedStudentTeam:tR,onSuccess:t,displayedCostBreakdown:i,isCampfireCart:!0,inStarterTeamLoopholes:e_,displayedPriceKeys:(0,b.vm)(eq)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,A.Tj)(y.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,A.gS)(ez),isTeamAdmin:U,...(0,b.ZY)({countBySeatType:ez,applicablePrices:eK,taxPercent:y.taxes?.tax_percent??0})},shippingAddress:e9,taxPercent:y.taxes?.tax_percent,tier:eS.Ju.PRO,title:(0,T.t)("checkout.upgrade_to_a_professional_plan"),userEmail:a?.email||""})]}):(0,s.jsxs)("div",{style:j.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$,children:[M===eE.Vv.CHOOSE_PLAN&&(tu||tp&&!e_?(0,s.jsx)(P.f,{}):(0,s.jsx)(eY,{teamId:e.selectedView.teamId??"",currency:ew,renewalTerm:eG,eligibleTeamUsers:t_.data?.eligible_team_users??[tx],initCampfireSeats:y.cartSelections,onUpdateCampfireSeats:e=>tm(W.qU({cartSelections:e}))})),M===eE.Vv.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eV,{billingAddress:e4,canSeeBillingAddressExp:eL,createPaymentElement:e5,enableSavedPaymentMethods:eN,error:to,isCampfireCart:!0,legalCompanyName:te,nameOnPaymentMethod:ta,onRegionalVatGstIdChange:tl,onVatGstIdChange:ti,paymentFlow:es.wn.PRO_UPGRADE,paymentMethodType:td,paymentMethods:eZ,regionalVatGstId:tn,selectedPaymentMethod:e0,setEnableSavedPaymentMethods:eA,setSelectedPaymentMethod:e1,shippingAddress:e9,unmountPaymentElement:e2,updateBillingAddress:e6,updateLegalCompanyName:tt,updateNameOnPaymentMethod:ts,updateShippingAddress:e8,vatGstId:tr}),[eE.Vv.CHOOSE_PLAN,eE.Vv.PAYMENT_AND_ADDRESS].includes(M)&&(0,s.jsx)(k.z,{billingInterval:eG,buttonText:M===eE.Vv.PAYMENT_AND_ADDRESS?(0,T.t)("pro_cart.sidebar.next_review"):(0,T.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:M===eE.Vv.CHOOSE_PLAN,countByBillableProductKey:ez,currency:ew,isButtonDisabled:th,isLoading:y.submitPending,onClickNext:tD,onSwitchBillingInterval:e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:eO??void 0,renewalTerm:e}),tm(W.Lo({billingPeriod:(0,ex.JV)(e)}))},onSwitchCurrency:eI,tier:eS.Ju.PRO,title:(0,T.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,A.Tj)(y.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,A.gS)(ez),savedPaymentMethodId:eN?e0?.id:void 0}})]})]})]})})}function eZ(e){return(0,s.jsx)(x.u,{label:"TeamUpgradePageBillingRemodel",children:(0,s.jsx)(y.tH,{team:l.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:y.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ec.y4,children:(0,s.jsx)(eJ,{...e})})})}function eX({step:e,teamName:t}){let a=(0,X.Dj)(),r=(0,s.jsx)(E.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:Q.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,T.tx)("checkout.learn_more_about_seats")});return(0,s.jsxs)("div",{className:v.s.mb32.$,"data-testid":"cart-pro-header",children:[(0,s.jsx)("h2",{className:v.s.font15.lh24.fontMedium.$,children:function(e,t,a){if(!(0,eE.$Y)(e)||(0,eE.HY)(e))switch(t=t||(0,T.t)("checkout.select_seats_header.your_team"),e){case eE.Vv.PLAN_COMPARISON:return(0,T.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team");case eE.Vv.CHOOSE_PLAN:if(a)return(0,T.tx)("checkout.select_seats_header_exp",{teamName:t});return(0,T.tx)("checkout.select_seats_header",{teamName:t});case eE.Vv.PAYMENT_AND_ADDRESS:return(0,T.tx)("checkout.enter_your_payment_details");case eE.Vv.CONFIRM_PAY:return(0,T.tx)("checkout.everything_look_good");default:(0,n.wc)(e)}}(e,t,a())}),e===eE.Vv.CHOOSE_PLAN&&(0,s.jsx)("p",{className:v.s.colorTextSecondary.font13.mt8.$,children:(0,T.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:r})}),e===eE.Vv.CONFIRM_PAY&&(0,s.jsx)("p",{className:v.s.colorTextSecondary.font13.mt8.$,children:(0,T.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")})]})}},352359:(e,t,a)=>{a.r(t),a.d(t,{TierUpgradeFlow:()=>ar});var s=a(104076),r=a(716976),i=a(237420),n=a(638004),l=a(812714),d=a(901014),o=a(222377),c=a(310725),m=a(219199),u=a(449572),_=a(140490),p=a(550209),x=a(1188),h=a(527494),g=a(120440),y=a(352630),f=a(192075),v=a(259161),S=a(244205),E=a(984887);let T={[E.fI.SELECT_TEAMS]:{name:(0,f.tx)("org_self_serve.headers.teams_to_upgrade"),getPageTitle:()=>(0,f.tx)("checkout.org_self_serve.select_teams_title"),buttonText:(0,f.tx)("checkout.org_self_serve.next_select_seats")},[E.fI.SELECT_SEATS]:{name:(0,f.tx)("pro_cart.breadcrumbs.set_editors.seat_rename"),getPageTitle:e=>e?(0,f.tx)("checkout.unified_cart.select_seats_header.pro",{teamName:e}):(0,f.tx)("checkout.unified_cart.select_seats_header.org"),pageSubtitle:(0,f.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(v.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:S.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,f.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,f.tx)("pro_cart.sidebar.next_payment_information")},[E.fI.PAYMENT_AND_ADDRESS]:{name:(0,f.tx)("pro_cart.breadcrumbs.payment_information"),getPageTitle:()=>(0,f.tx)("checkout.enter_your_payment_details"),buttonText:(0,f.tx)("pro_cart.sidebar.next_review")},[E.fI.REVIEW]:{name:(0,f.tx)("pro_cart.breadcrumbs.review"),getPageTitle:()=>(0,f.tx)("checkout.everything_look_good")},[E.fI.UPGRADE_TYPE]:{name:(0,f.tx)("checkout.breadcrumbs.upgrade_type"),getPageTitle:()=>(0,f.tx)("checkout.breadcrumbs.upgrade_type_title")},[E.fI.SELECT_SEATS_AND_PAYMENT]:{name:(0,f.tx)("checkout.breadcrumbs.select_seats_and_payment"),getPageTitle:()=>(0,f.tx)("checkout.enter_your_payment_details"),pageSubtitle:(0,f.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(v.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:S.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,f.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,f.tx)("pro_cart.sidebar.next_review")}};var j=a(111679),N=a(147046),b=a(657878),A=a(592726),w=a(691138);function C({steps:e,currentStep:t,setStep:a,teamId:r}){let n=(0,i.wA)(),l=A.iZ()?.id,d=(0,b._6)(),o=e.filter(e=>e!==E.fI.CONFIRMATION);return(0,s.jsxs)("div",{className:"xixxii4 x78zum5 x1vqgdyp xh8yej3 x1t0vds8 xdqyycr x1yjdb4r xso031l x1q0q8m5 xertd99 xhtitgo",children:[(0,s.jsx)(y.e6,{className:"x10l6tqk xomnu4r x1qpfodn xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",onClick:()=>{let e="teamUpgrade"===d.view?d.previousView:null;r&&e?.view!=="fullscreen"?n(j._l({workspace:{userId:l,teamId:r,orgId:null},view:{view:"recentsAndSharing"}})):n(N.sf(e||{view:"recentsAndSharing"})),"teamUpgrade"===d.view&&d.callbackOnClose?.()},children:(0,f.t)("checkout.cancel")}),t!==E.fI.UPGRADE_TYPE&&(0,s.jsx)("ol",{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3",children:o.map((e,r)=>(0,s.jsx)("li",{children:(0,s.jsxs)(y.e6,{onClick:()=>a(e),"aria-current":e===t?"step":void 0,...{0:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},1:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xnbbluu"}}[(e!==t)<<0],children:[(0,s.jsx)("span",{className:w.Q,children:(0,f.t)("checkout.voice_over.steps",{stepNumber:r+1,totalSteps:o.length})}),T[e].name,r<o.length-1&&(0,s.jsx)(h.a,{className:"xe5c7bq"})]})},r))})]})}var I=a(419822),k=a(881630);function R({orgMigrated:e}){return(0,s.jsxs)("div",{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid",children:(0,f.t)("checkout.org_confirmation.title")}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06",children:(0,f.t)("checkout.org_confirmation.body")}),(0,s.jsxs)("div",{className:"x78zum5 x13a6bvl x6s0dn4",children:[!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.k,{}),(0,s.jsx)("div",{className:"x9hsxk x1n0bwc9",children:(0,f.t)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(k.F,{disabled:!e,onClick:()=>{m.Ay.redirect("/files/recent")},children:(0,f.t)("checkout.org_confirmation.button")})]})]})}var P=a(414085),O=a(367048),M=a(443192);function D({teamId:e}){let t=(0,i.wA)(),a=(0,A.iZ)();return(0,s.jsxs)("div",{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid",children:(0,f.t)("checkout.pro_confirmation.title")}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06",children:(0,f.t)("checkout.pro_confirmation.body")}),(0,s.jsx)("div",{className:"x78zum5 x13a6bvl x6s0dn4",children:(0,s.jsx)(k.F,{onClick:()=>{e&&t(M.b({[P.p]:!0})),e&&a?.id&&(0,O.M)({reduxDispatch:t,teamId:e,userId:a.id,showProOnboardingModal:!1})},children:(0,f.t)("checkout.pro_confirmation.button")})})]})}var L=a(70055),B=a(45551),U=a(755444),V=a(816565);function z({step:e,teamName:t}){return(0,s.jsxs)("div",{className:"xf1vcxl","data-testid":"cart-header",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu",tabIndex:0,children:T[e]?.getPageTitle(t)}),T[e]?.pageSubtitle&&(0,s.jsx)("p",{className:"x1swbamy xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:T[e]?.pageSubtitle})]})}function G({checkoutFlowType:e,setCheckoutFlowType:t,onClickNext:a}){return(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xk54qb2 x1kx8hp3 x180w3km x87ps6o",children:[(0,s.jsx)(z,{step:E.fI.UPGRADE_TYPE}),(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x18x6v2m",children:[(0,s.jsxs)(L.b,{className:"x78zum5 x1pulhmw x1qjc9v5",value:e??"",onChange:e=>t(e),children:[(0,s.jsx)($,{id:P.x.SINGLE_EDITOR,title:(0,f.t)("checkout.upgrade_type_single_title"),description:(0,f.t)("checkout.upgrade_type_single_description"),imgUrl:(0,U.ck)("9f83fd329b1e36ac34fe65e902eaf55b25d0f3c0")}),(0,s.jsx)($,{id:P.x.MULTI_EDITOR,title:(0,f.t)("checkout.upgrade_type_team_title"),description:(0,f.t)("checkout.upgrade_type_team_description"),imgUrl:(0,U.ck)("6453082a6c3b353ecf4e50938aa701fa258adbc8")})]}),(0,s.jsx)("div",{className:"xq1dxzn",children:(0,s.jsx)(k.F,{onClick:a,disabled:!e,fullWidth:!0,children:(0,f.t)("checkout.upgrade_type_next")})})]})]})}function $({id:e,title:t,description:a,imgUrl:r}){return(0,s.jsxs)("label",{htmlFor:e,className:"x78zum5 xdt5ytf x6s0dn4 xg2d0mh xjsondq xfbns0s xbfr8j9 xmkeg23 x1y0btm7 x1mxnbhz x1yjdb4r xfl4w7x x7z60cl x16ukhit","data-testid":`upgrade-type-${e}`,children:[(0,s.jsx)(B.c,{value:e,id:e,className:"x10l6tqk x1i1rx1s xjm9jq1 x1717udv xkdpibf xb3r6kr xzpqnlu xuxw1ft xc342km"}),(0,s.jsx)(V.oW,{draggable:!1,src:r,alt:t,className:"x19kjcj4"}),(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xg2d0mh",children:[(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o",children:t}),(0,s.jsx)("span",{className:"x1n0bwc9 x2b8uid",children:a})]})]})}var H=a(997477),F=a(751983),q=a(138105),K=a(236753),Y=a(688613),W=a(503801);function J({additionalSeatsCount:e,selectedUserSeatTypes:t,tier:a}){let s=(0,K.O$)(t,e);return(0,W.A)(s,a)?null:{code:Y.C.INVALID_PAID_SEAT_TOTAL,message:(0,f.t)("checkout.sidebar.paid_seat_minimum_banner")}}var Z=a(788499),X=a(599448),Q=a(373533),ee=a(951002),et=a(281684),ea=a(412469),es=a(904017),er=a(943325),ei=a(838887),en=a(913610),el=a(507665),ed=a(572537),eo=a(893393);let ec=eo.M4.Query({fetch:async({planKey:e,enabledFetch:t})=>e&&t?(await ei.V.getSavedPaymentMethods({planType:e?.type,planId:e?.parentId})).data.meta:{payment_methods:[]},stalenessPolicy:"never"});var em=(e=>(e.ADDRESS_VALIDATION_ERROR="address-validation-error",e.MISSING_ADDRESS_ERROR="missing-address-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",e.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",e.PAYMENT_METHOD_VALIDATION_ERROR="payment-method-validation-error",e.SAVE_PAYMENT_METHOD_ERROR="save-payment-method-error",e.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",e))(em||{}),eu=(e=>(e.INIT_SAVED_PAYMENT_METHODS="init_saved_payment_methods",e.SET_ERRORS="set_errors",e.SET_STRIPE_PAYMENT_METHOD="set_stripe_payment_method",e.SET_SAVED_PAYMENT_METHOD="set_saved_payment_method",e.TOGGLE_DIFFERENT_SHIPPING_ADDRESS="toggle_different_shipping_address",e.TOGGLE_USE_SAVED_PAYMENT_METHOD="toggle_use_saved_payment_method",e.UPDATE_BILLING_ADDRESS="update_billing_address",e.UPDATE_NAME_ON_PAYMENT_METHOD="update_name_on_payment_method",e.UPDATE_REGIONAL_VAT_GST_ID="update_regional_vat_gst_id",e.UPDATE_SHIPPING_ADDRESS="update_shipping_address",e.UPDATE_VAT_GST_ID="update_vat_gst_id",e))(eu||{});function e_(e){return Array.isArray(e)&&e.every(ep)}function ep(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(em).includes(t)&&"message"in e&&"string"==typeof e.message}var ex=a(850896),eh=a(492073),eg=a(338052),ey=a(827999),ef=(e=>(e.PRO_UPGRADE="pro_upgrade",e.PRO_CHANGE_PAYMENT="pro_change_payment",e.ORG_UPGRADE="org_upgrade",e.ORG_CHANGE_PAYMENT="org_change_payment",e.COMMUNITY_CHECKOUT="community_checkout",e))(ef||{}),ev=(e=>(e.CREATE_PAYMENT_METHOD_ERROR="create-payment-method-error",e.CREATE_INTENT_ERROR="create-intent-error",e.CONFIRM_INTENT_ERROR="confirm-intent-error",e.MISSING_STRIPE_ELEMENTS_ERROR="missing-stripe-elements-error",e.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",e.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",e.STRIPE_ELEMENTS_VALIDATION_ERROR="stripe-elements-validation-error",e))(ev||{});function eS(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(ev).includes(t)&&"message"in e&&"string"==typeof e.message}let eE="stripe-payment-element",eT=(0,eg.Do)(e=>{let t=(0,es.S2)().unwrapOr(null),[a,s]=(0,r.useState)(null),[i,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[_,x]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(void 0),S=(0,r.useRef)(null),E=(0,U.Ay)().user_data,T=(0,ey.X)(),j=(0,ey.W)(E);async function N(){if(S.current)return S.current;try{let t=(await (0,er.eV)()).elements({mode:"setup",paymentMethodCreation:"manual",currency:e.currency,paymentMethodConfiguration:e.stripePaymentMethodConfiguration,...T});return S.current=t,t}catch(e){(0,d.sx)("setup_intent_creation_failed",w(),{forwardToDatadog:!0}),A({error:e,code:ev.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,f.t)("payments.errors.error_loading_payment_form")})}}async function b(e){if(o&&!_)return{succeeded:!0,clientSecret:o,customerId:i};try{let{data:{meta:{client_secret:t,customer_id:a}}}=await eh.m.createSetupIntent(e);return(0,d.sx)("setup_intent_creation_attempted",w(),{forwardToDatadog:!0}),c(t),l(a),x(!1),{succeeded:!0,clientSecret:t,customerId:a}}catch(e){return{succeeded:!1,clientSecret:null,customerId:null}}}function A({error:e,code:t,message:a,extra:r={}}){s({code:t,message:a}),(0,ex.At)(e)||(0,ex.VT)(e)||(0,ex.um)(e)||(0,p.$D)(n.e.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,p.V5)((0,er.pV)(e)),...r}:r;return t.setExtras(a),(0,ex.q1)(e)&&(t.setTag("stripe_error_type",e.type),(0,ex.At)(e)&&t.setLevel("warning")),t})}function w(){return{planParentId:t?.key.parentId,paymentFlowSource:e.paymentFlowSource,currency:e.currency,isCampfireCart:!0}}function C(){return document.querySelectorAll("[name*=privateStripeFrame]").length}function I(e){let t;return((0,ex.At)(e)||(0,ex.VT)(e)||(0,ex.um)(e))&&(t=e.message),t??(0,f.t)("payments.errors.confirm_setup_error")}return(0,r.useEffect)(()=>{let t=S.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await N();if(!t){let e={code:ev.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,f.t)("payments.errors.error_loading_payment_form")};return A({...e,error:"Failed to get stripe elements"}),e}let a=t.getElement("payment")??t.create("payment",j);return a.on("ready",t=>{(0,d.sx)("Payment Form Loaded",{...w(),paymentMethod:y??er.lB.CARD,availableCurrencies:(0,ea.B9)()}),y||v(er.lB.CARD),e.ready?.(t)}),a.on("change",t=>{let a=t.value?.type;(0,d.sx)("Choose Payment Method Type",{...w(),paymentMethod:a}),v(a),e.change?.(t)}),a.mount(`#${eE}`),null},unmountPaymentElement:async()=>{let e=await N();e?.getElement("payment")?.unmount()},createPaymentMethod:async e=>{if(!S.current){let e={code:ev.MISSING_STRIPE_ELEMENTS_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return A({...e,error:"Cannot create payment method without Stripe elements"}),e}s(null);let{error:t}=await S.current.submit();if(t){let e=I(t),a={code:ev.STRIPE_ELEMENTS_VALIDATION_ERROR,message:e};return s(a),a}(0,d.sx)("Add payment method",{...w(),paymentMethod:y},{forwardToDatadog:!0});let a=await (0,er.eV)(),{error:r,paymentMethod:i}=await a.createPaymentMethod({elements:S.current,params:{billing_details:e}});if(r){let e={code:ev.CREATE_PAYMENT_METHOD_ERROR,message:I(r)};return A({...e,error:r}),e}return i},confirmIntent:async({paymentMethod:e,createIntentParams:t})=>{if(!e){let e={code:ev.MISSING_PAYMENT_METHOD_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return A({...e,error:"Payment method is required to confirm intent"}),e}let[a,{succeeded:s,clientSecret:r,customerId:i}]=await Promise.all([(0,er.eV)(),b(t)]);if(!s){let e={code:ev.CREATE_INTENT_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return A({...e,error:"Failed to create Setup Intent to confirm"}),e}let n=C(),o=setInterval(()=>{n!==C()&&((0,d.sx)("Stripe Authentication Modal"),clearInterval(o),g(!0))},1e3),{error:c,setupIntent:m}=await a.confirmSetup({clientSecret:r,redirect:"if_required",confirmParams:{return_url:`https://${window.location.host}`,payment_method:e}});if(clearInterval(o),c){let e={code:ev.CONFIRM_INTENT_ERROR,message:I(c)};return A({...e,error:c}),e}if("succeeded"!==m.status){let e={code:ev.CONFIRM_INTENT_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return A({...e,error:`SetupIntent confirmed with status ${m.status}`}),e}{let e={...m,customer:i};return l(i),u(m),x(!0),e}},paymentMethodType:y,error:a,stripeIntent:m,stripeCustomerId:i,is3ds:h}}),ej={stripePaymentMethod:void 0,savedPaymentMethod:void 0,vatGstId:"",regionalVatGstId:"",nameOnPaymentMethod:"",hasDifferentShippingAddress:!1,errors:[],savedPaymentMethods:[],isUsingSavedPaymentMethod:!1};function eN(e,t){switch(t.type){case eu.TOGGLE_DIFFERENT_SHIPPING_ADDRESS:return{...e,hasDifferentShippingAddress:!e.hasDifferentShippingAddress};case eu.INIT_SAVED_PAYMENT_METHODS:return{...e,savedPaymentMethods:t.payload,isUsingSavedPaymentMethod:t.payload.length>0,stripePaymentMethod:t.payload?.[0]?.id,savedPaymentMethod:t.payload?.[0]};case eu.UPDATE_VAT_GST_ID:return{...e,vatGstId:t.payload};case eu.UPDATE_REGIONAL_VAT_GST_ID:return{...e,regionalVatGstId:t.payload};case eu.UPDATE_NAME_ON_PAYMENT_METHOD:return{...e,nameOnPaymentMethod:t.payload};case eu.SET_ERRORS:return{...e,errors:t.payload};case eu.SET_STRIPE_PAYMENT_METHOD:return{...e,stripePaymentMethod:t.payload};case eu.TOGGLE_USE_SAVED_PAYMENT_METHOD:let a=e.isUsingSavedPaymentMethod;return{...e,isUsingSavedPaymentMethod:!a,stripePaymentMethod:a?void 0:e.savedPaymentMethod?.id};case eu.SET_SAVED_PAYMENT_METHOD:return{...e,savedPaymentMethod:t.payload,stripePaymentMethod:t.payload?.id};default:(0,ee.xb)(t)}}async function eb({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s}){if((0,E.$V)(e))return{code:em.MISSING_ADDRESS_ERROR,message:(0,f.t)("checkout.errors.missing_address")};try{await el.$.validateAddresses({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s})}catch(e){return{code:em.ADDRESS_VALIDATION_ERROR,message:(0,et.J)(e)||e.message}}}async function eA({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r}){if(!(0,E.$V)(t))try{await el.$.validateCurrency({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r})}catch(t){return{code:em.CURRENCY_VALIDATION_ERROR,message:(0,f.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.toUpperCase()})}}}async function ew({vatGstId:e,country:t,region:a}){if(e)try{let s=await (0,en.r)(e,t,a);if(!s.data.meta.valid)return{code:em.VAT_GST_ID_VERIFICATION_ERROR,message:(0,et.J)(s,(0,f.t)("tax.vat.vat_gst_validation_failed"))}}catch(e){return{code:em.VAT_GST_ID_VERIFICATION_ERROR,message:e?.data?.message||(0,f.t)("tax.vat.vat_gst_validation_failed")}}}var eC=a(649693),eI=a(347592),ek=a(608175),eR=a(844882),eP=a(477871);let eO=eo.M4.Query({fetch:async e=>(await ei.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});var eM=a(833805),eD=a(817647);function eL({currency:e,tier:t,renewalTerm:a,unit:s}){let r=(0,eD.jv)({billableProductKeys:eI.N_,baseQuery:{currency:e,tier:t,renewalTerm:a,unit:s??a}}),[i]=(0,eM.Ad)(r),n=(0,eD.vu)(i);if(null===n.data)throw Error("Price data is null");return n.data}let eB={eligibleTeamsByTeamId:{},eligibleUsersByUserId:{},currentUpgradingUserId:"",taxPercent:0,selectedUserSeatTypes:{},additionalSeatsCount:eI.N_.dict(()=>0),selectedTeamIds:new Set,hasDifferentLegalName:!1,displayName:"",legalName:"",isLoading:!0,isSubmitting:!1,error:null};function eU({currency:e,renewalTerm:t,...a}){return{...eB,...a,currency:e??(0,ea.LN)(),renewalTerm:t??E.NW.YEAR}}function eV(e,t){switch(t.type){case Y.H.UPDATE_DISPLAY_NAME:return{...e,displayName:t.payload.displayName};case Y.H.UPDATE_LEGAL_NAME:return{...e,legalName:t.payload.legalName,error:e.error?.code===Y.C.INVALID_LEGAL_NAME?null:e.error};case Y.H.SET_RENEWAL_TERM:return{...e,renewalTerm:t.payload.renewalTerm};case Y.H.SET_CURRENCY:return{...e,currency:t.payload.currency};case Y.H.SET_TAX_PERCENT:return{...e,taxPercent:t.payload.taxPercent};case Y.H.SET_ERROR:return{...e,error:t.payload.error};case Y.H.SET_IS_SUBMITTING:return{...e,isSubmitting:t.payload.isSubmitting};case Y.H.SET_HAS_DIFFERENT_LEGAL_NAME:return{...e,legalName:"",hasDifferentLegalName:t.payload.hasDifferentLegalName};case Y.H.INIT:return{...e,...t.payload,isLoading:!1};case Y.H.UPDATE_ADDITIONAL_SEATS:return{...e,additionalSeatsCount:t.payload,error:J({additionalSeatsCount:t.payload,selectedUserSeatTypes:e.selectedUserSeatTypes,tier:e.tier})};case Y.H.UPDATE_USER_SEAT_TYPE:{let{userId:a,seatType:s}=t.payload,r={...e.selectedUserSeatTypes,[a]:s};return{...e,selectedUserSeatTypes:r,error:J({additionalSeatsCount:e.additionalSeatsCount,selectedUserSeatTypes:r,tier:e.tier})}}case Y.H.ON_TOGGLE_TEAM:{let{selectedTeamIds:a}=e,{toggledTeam:s}=t.payload,r=a.has(s);d.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:s,selectedTeam:!r});let i=new Set(a);return r?i.delete(s):i.add(s),{...e,selectedTeamIds:i}}case Y.H.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS:{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i}=e;return{...e,selectedUserSeatTypes:(0,X.h)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i})}}case Y.H.UPDATE_TO_DEFAULT_SEAT_SELECTIONS:{let{shouldUseSingleEditor:a}=t.payload;if(a)return{...e,selectedUserSeatTypes:{[e.currentUpgradingUserId]:eC.ud.EXPERT},additionalSeatsCount:eI.N_.dict(()=>0)};{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,currentUpgradingUserId:r}=e;return{...e,selectedUserSeatTypes:(0,X.h)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:{},currentUpgradingUserId:r})}}}default:return e}}var ez=a(906356),eG=a(454967),e$=a(532292),eH=a(785034),eF=a(366535),eq=a(111297),eK=a(745529),eY=a(537307),eW=a(944350),eJ=a(59849),eZ=a(295253),eX=a(563554),eQ=a(368581),e0=a(336518),e1=a(452981),e5=a(962856),e2=a(821655),e7=a(369729),e3=a(899214),e4=a(900215),e6=a(506192),e9=a(469229);function e8({title:e,children:t,dataTestId:a,noHeaderMargin:r}){return(0,s.jsxs)("div",{className:"x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd","data-testid":a,children:[e&&(0,s.jsx)("h2",{...{0:{className:"x12sbs06 xor4psk x1ncjjhx xaoa4km x2i041 x14terfx"},1:{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xat24cr"}}[!!r<<0],children:e}),t]})}var te=a(382629),tt=a(502907),ta=a(781611);function ts({isCartReviewSummary:e=!1,state:t}){let{countBySeatType:a,renewalTerm:r,currency:i,taxPercent:n,tier:l,applicablePriceData:d}=t,o=eL({currency:i,tier:l,renewalTerm:r,unit:E.NW.MONTH}),c=(0,K.s$)(d),m=(0,K.s$)(o),u=n||0,_=t=>(0,Q.up)(t,i,{showCents:e}),p=(0,Q.Vh)(a,c),x=(0,Q.kV)(a,c,u),h=(0,Q.N9)(a,c,u),g=_(p),y=_(x),v=_(h),S=r===E.NW.YEAR;return(0,s.jsx)(eq.fu,{name:eX.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:l,renewalTerm:r,countBySeatType:(0,Z.gS)(a),currency:i,taxPercent:u,subtotal:p,taxTotal:x,total:h},enabled:e,children:(0,s.jsxs)("table",{className:"xh8yej3 x1mwwwfo x1gukg7c",children:[(0,s.jsx)("tbody",{children:Object.keys(a).sort(ta.AG).map(t=>(0,s.jsx)(tr,{billableProductKey:t,count:a[t]||0,currency:i,isAnnual:S,isCartReviewSummary:e,paymentPrices:c,lineItemPrices:m},t))}),(0,s.jsxs)("tfoot",{children:[(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb","data-testid":"purchase-summary-subtotal",children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.subtotal"),amount:tn({price:g,isCartReviewSummary:e,isAnnual:S})})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb","data-testid":"purchase-summary-taxes",children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.purchase_summary.tax"),subtext:(0,f.tx)("pro_cart.review.tax_percent",{taxPercent:u}),amount:tn({price:y,isAnnual:S,isCartReviewSummary:e})})}),(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb","data-testid":"purchase-summary-total-due",children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.purchase_summary.total_due_today"),amount:tn({price:v,isAnnual:S,isCartReviewSummary:e})})})]})]})]})})}function tr({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:i,paymentPrices:l,lineItemPrices:d}){if(!(0,eC.dA)(e))return(0,p.$D)(n.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let o=l[e];if((0,te.uy)(o))return(0,p.$D)(n.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summary for ${e}`)),null;let c=d[e];if((0,te.uy)(c))return(0,p.$D)(n.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let m=new ea.vr(a),u=m.formatMoney(o*t,{showCents:i}),_=(0,f.t)("checkout.price_per_month",{price:m.formatMoney(c)});return(0,s.jsx)("tr",{className:"x1vi7shn xp6roeo x3ajldb xso031l x1q0q8m5 xertd99","data-testid":`purchase-summary-${e}-row`,children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,tt.tI)(e)}),subtext:(0,f.tx)(r?"checkout.rewrite.product_cost_breakdown_annually":"checkout.rewrite.product_cost_breakdown_monthly",{price:_}),amount:tn({price:u,isCartReviewSummary:i,isAnnual:r})})})}function ti({label:e,subtext:t,amount:a}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"x1uil0o3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:e}),t&&(0,s.jsx)("p",{className:"x1n0bwc9",children:t})]})}),(0,s.jsx)("td",{className:"x1hr2gdg x1uil0o3",children:(0,s.jsx)("p",{children:a})})]})}function tn({price:e,isAnnual:t,isCartReviewSummary:a}){return a?e:t?(0,f.t)("checkout.price_per_year",{price:e}):(0,f.t)("checkout.price_per_month",{price:e})}function tl({state:e,dispatch:t,buttonText:a,canSwitchRenewalTerm:r,onClickNext:l,nextStep:d,onContactSalesClick:o,trackingProperties:c,shouldRenderCartData:m}){let{tier:u,countBySeatType:_,renewalTerm:p,currency:x,cartSelectionError:h,isSubmitting:g}=e,y=(0,ea._Z)(),v=(0,e6.Um)(),T=(0,b._6)(),j=(0,i.d4)(e=>"teamUpgrade"===T.view?(0,e9.Np)(e,{...T,paymentStep:d}):"orgSelfServe"===T.view?(0,e9.Np)(e,{...T,step:d}):void(0,ee.wc)(T.view)),N=e=>{t({type:Y.H.SET_CURRENCY,payload:{currency:e}})},A=e=>{t({type:Y.H.SET_RENEWAL_TERM,payload:{renewalTerm:e}})};return(0,s.jsxs)(e8,{title:u===ek.Ju.PRO?(0,f.t)("checkout.your_professional_plan"):(0,f.t)("checkout.your_organization_plan"),dataTestId:"cart-sidebar",noHeaderMargin:!0,children:[(0,s.jsx)("div",{children:m&&_?(0,s.jsxs)(s.Fragment,{children:[y&&(0,s.jsxs)("div",{className:"x78zum5 x1qughib x6s0dn4 xso031l x1q0q8m5 xertd99 x1vi7shn xp6roeo","data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:(0,f.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(e4.D,{currency:x,dropdownShown:v,supportedCurrencies:(0,ea.B9)(),changeCurrency:e=>{N(e)},shortFormDisplay:!0,paddingOverride:0})]}),r&&(0,s.jsx)("fieldset",{className:"x1vi7shn xp6roeo","data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(eQ.b,{legend:(0,s.jsx)(e0.q,{children:(0,f.tx)("checkout.sidebar.switch_your_billing_interval")}),value:p,onChange:e=>A(e),children:[(0,s.jsx)(eQ.c,{value:E.NW.YEAR,label:(0,s.jsxs)(e1.J,{className:"x78zum5 x6s0dn4 xg2d0mh",children:[(0,f.tx)("checkout.sidebar.annual")," ",(0,s.jsx)(e5.E,{variant:"successOutline",size:"md",children:(0,f.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(eQ.c,{value:E.NW.MONTH,label:(0,s.jsx)(e1.J,{children:(0,f.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ts,{isCartReviewSummary:!1,state:e}),(0,s.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1rdy4ex xp6roeo x3vvef7",children:(0,f.tx)("checkout.rewrite.tax_disclaimer_revised")})]})]}):(0,s.jsx)("p",{className:"x1n0bwc9 x1hk0uxs",children:(0,f.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{className:"x7hzu26",children:[h&&(0,s.jsx)("div",{className:"x1ef8nbk",children:(0,s.jsx)(e2.$y,{variant:"warn",children:(0,s.jsx)(e7.Q,{children:h.message})})}),a&&(0,s.jsx)(k.R,{onClick:e=>{e.preventDefault(),l()},disabled:g,href:j,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:S.c.CART_SIDEBAR,...c},trackingOptions:{teamName:n.e.MONETIZATION_UPGRADES,addToRUM:!0},children:g?(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp","data-testid":"cart-sidebar-loading",children:(0,s.jsx)(I.k,{})}):a}),u===ek.Ju.ORG&&(0,s.jsxs)("div",{className:"x7hzu26 x78zum5 xg2d0mh","data-testid":"cart-sidebar-footer",children:[(0,s.jsx)(e3.a,{}),(0,s.jsx)("p",{children:(0,f.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("button",{type:"button",className:"x1quhyk7",onClick:o,children:(0,f.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]})]})]})}var td=a(555013),to=a(989941),tc=a(653899),tm=a(520741),tu=a(679359),t_=a(652539),tp=a(236631),tx=a(659062),th=a(309537),tg=a(914790),ty=a(433566);function tf({createPaymentElement:e,unmountPaymentElement:t,paymentElementEventHandlers:a,paymentFlow:i,state:n,dispatch:l,canUpdateVatIds:o,shouldRenderErrors:c=!0}){let[m,u]=(0,r.useState)(!1),{vatGstId:_,regionalVatGstId:p,nameOnPaymentMethod:x,hasDifferentShippingAddress:h,errors:g,stripeError:y,paymentMethodType:v,billingAddress:S,shippingAddressInput:E}=n,T=i===ef.PRO_UPGRADE||i===ef.ORG_UPGRADE,j={paymentFlow:i,paymentMethodType:v,isCampfireCart:!0},N=[...g,y].filter(e=>!!e).map(e=>e.message);return(0,tc.h)(()=>((async function(){await e({ready:e=>{u(!0),a?.ready?.(e)},change:a?.change})})(),()=>{t()})),(0,r.useEffect)(()=>{y&&d.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...j,message:y.message})},[y]),y?.code===ev.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid",children:[(0,s.jsx)(t_.B,{svg:ty.A,className:"x1w6u5r6 x1fz3pi1 xqql8cr"}),(0,s.jsx)("p",{className:"x1874spd x1t2kcbv x1n0bwc9 x1evy7pa",children:y.message})]}):(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l","data-testid":"stripe-payment-form",children:[c&&N.length>0&&(0,s.jsx)("div",{className:"x1buy44e",children:N.map((e,t)=>(0,s.jsx)("div",{className:"x611mgq",children:(0,s.jsx)(tm._,{color:tm.S.ERROR,"aria-live":"polite",text:e})},t))}),(0,s.jsx)("div",{id:eE}),m?(0,s.jsxs)("div",{style:tx.sx.add({marginTop:"7px"}).if(v&&er.d2.includes(v),{marginTop:"15px"}).$,children:[(0,s.jsx)(td.Lf,{value:x,htmlName:"name_on_card",label:(0,f.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,f.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{l({type:eu.UPDATE_NAME_ON_PAYMENT_METHOD,payload:e.target.value.trim()})},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),(0,s.jsx)(th.X,{address:S,updateAddress:e=>{l({type:eu.UPDATE_BILLING_ADDRESS,payload:e})},isBillingAddress:!0,canSeeBillingAddressExp:!0}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.A,{onChange:e=>l({type:eu.UPDATE_VAT_GST_ID,payload:e}),country:S.country,vatId:_,isCommunityCheckout:i===ef.COMMUNITY_CHECKOUT}),(0,s.jsx)(tg.A,{onChange:e=>l({type:eu.UPDATE_REGIONAL_VAT_GST_ID,payload:e}),country:S.country,region:S.region,vatId:p,isCommunityCheckout:i===ef.COMMUNITY_CHECKOUT,variant:"regional"})]}),v===er.lB.SEPA&&(0,s.jsx)("p",{className:"x1n0bwc9 x1j6dyjg x1d3mw78 xqp8s7e",children:(0,f.tx)("pro_cart.payment.sepa_direct_debit_mandate")}),T&&(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 xpgiz1h x13q985h x1u94j8j",style:tx.sx.if(h,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-shipping-address-checkbox",children:(0,s.jsx)(to.S,{label:(0,s.jsx)(e1.J,{children:(0,s.jsx)("span",{className:tp.s.font13.$,children:(0,f.tx)("checkout.i_have_a_different_shipping_address")})}),checked:h,onChange:()=>{l({type:eu.TOGGLE_DIFFERENT_SHIPPING_ADDRESS})}})}),h&&(0,s.jsx)(th.X,{address:E,updateAddress:e=>{l({type:eu.UPDATE_SHIPPING_ADDRESS,payload:e})},canSeeBillingAddressExp:!0})]}):(0,s.jsx)("div",{className:"x78zum5 xaehx54 x6s0dn4 xl56j7k",children:(0,s.jsx)(tu.kt,{})})]})}var tv=a(249586),tS=a(364616);let tE=(0,eq.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function tT({selectedPaymentMethod:e,setSelectedPaymentMethod:t,paymentMethods:a}){return(0,s.jsx)("div",{className:"x78zum5 xdt5ytf xl56j7k x1n2onr6 xmkeg23 x1y0btm7 x7z60cl xgqun6i x1yjdb4r x9f619 x192jxwq xh8yej3 xn3w4p2 x1gnnqk1 x11ugzjr","data-testid":"payment-method-dropdown",children:(0,s.jsxs)("div",{className:"x78zum5 x1n2onr6 xh8yej3 x6s0dn4",children:[(0,s.jsx)(tE,{className:"x1akne3o xf3scy2 x1yjdb4r x5kalc8 x1vy7i8i x1mvmbdv xjyslct x1iyjqo2 x1se2ifz xfn42iu xng3xce x1r7ld26 x1a2a7pz x1x7eeca",name:"selected_saved_payment_method",dataTestId:"payment-method-select",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e?.id?tv._R.POPULATED_COMPLETE:tv._R.NOT_POPULATED,onChange:e=>{let s=e.target.value,r=a.find(e=>e.id===s);r&&t(r)},value:e?.id,children:a.map(e=>(0,s.jsx)(tj,{paymentMethod:e},e.id))}),(0,s.jsx)(t_.B,{className:"x10l6tqk x1f6937p x47corl x1epfdc x1ja3g5x",svg:tS.A})]})})}function tj({paymentMethod:e}){return(0,r.createElement)("option",{className:"x78zum5 x1qughib x1nfngrj",value:e.id,key:e.id},(0,s.jsx)("span",{className:"xemv814",children:e.payment_method}),e.billing_address&&(0,s.jsx)("span",{className:"x1n0bwc9 xemv814",children:` - ${(0,K.DS)(e.billing_address)}`}))}function tN(e){let{isUsingSavedPaymentMethod:t,savedPaymentMethod:a,savedPaymentMethods:r,errors:i,stripeError:n}=e.state,d=(0,l.kc)().cart_rewrite_full_send_saved_payment,o=()=>{e.dispatch({type:eu.TOGGLE_USE_SAVED_PAYMENT_METHOD})},c=[n,...i].filter(e=>!!e);return(0,s.jsxs)(s.Fragment,{children:[c.length>0&&(0,s.jsx)("div",{className:"x1buy44e",children:c.map((e,t)=>(0,s.jsx)("div",{className:"x611mgq",children:(0,s.jsx)(e2.Yy,{variant:"danger","data-testid":"inline-banner",children:(0,s.jsx)(e7.Q,{children:e.message})})},t))}),d&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(to.S,{label:(0,s.jsx)(e1.J,{children:(0,s.jsx)("span",{className:"xemv814",children:(0,f.t)("checkout.use_saved_payment_method")})}),onChange:()=>{o()},checked:t}),(0,s.jsx)("div",{className:"x19ueytk"}),t&&(0,s.jsx)(tT,{selectedPaymentMethod:a,setSelectedPaymentMethod:t=>{e.dispatch({type:eu.SET_SAVED_PAYMENT_METHOD,payload:t})},paymentMethods:r})]}),(0,s.jsx)("div",{...{0:{},1:{className:"xqtp20y xb3r6kr xg01cxk"}}[!!(d&&t)<<0],children:(0,s.jsx)(tf,{...e,shouldRenderErrors:!1})})]})}function tb({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:i}){let{tier:n,hasDifferentLegalName:l,legalName:d}=e,[o,c]=(0,r.useState)(!1),m=(0,r.useMemo)(()=>({...e,errors:e.paymentFormErrors,stripeError:e.stripeError}),[e]);return(0,s.jsxs)(e8,{title:(0,f.t)("checkout.payment_details"),children:[(0,s.jsx)("div",{className:"xdpxx8g",children:(0,s.jsx)(tN,{canUpdateVatIds:!0,createPaymentElement:a,dispatch:t,paymentFlow:n===ek.Ju.ORG?ef.ORG_UPGRADE:ef.PRO_UPGRADE,state:m,unmountPaymentElement:i,paymentElementEventHandlers:{ready:()=>c(!0)}})}),o&&n===ek.Ju.PRO&&(0,s.jsxs)("div",{className:"xpgiz1h xemv814",children:[(0,s.jsx)(to.S,{label:(0,s.jsx)(e1.J,{children:(0,s.jsx)("span",{className:"xemv814",children:(0,f.tx)("checkout.i_have_a_different_legal_name")})}),checked:l,onChange:()=>{t({type:Y.H.SET_HAS_DIFFERENT_LEGAL_NAME,payload:{hasDifferentLegalName:!l}})}}),(0,s.jsx)("div",{className:"x19ueytk"}),l&&(0,s.jsx)(td.Lf,{value:d||"",htmlName:"legal_company_name",label:(0,f.t)("pro_cart.payment.legal_company_name_label"),placeholder:(0,f.t)("pro_cart.payment.legal_company_name_placeholder"),onChange:e=>{t({type:Y.H.UPDATE_LEGAL_NAME,payload:{legalName:e.target.value.trim()}})},autoCompleteName:"legal company name",trackingFieldName:"Legal Company Name",dataTestId:"legal-company-name"})]})]})}function tA({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r}){let{tier:i,legalName:n,displayName:l}=e;return(0,s.jsxs)("div",{children:[i===ek.Ju.ORG&&(0,s.jsx)("div",{className:"xpezlj7",children:(0,s.jsx)(e8,{title:(0,f.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:[(0,s.jsx)(td.Lf,{htmlName:"legal_org_name",label:(0,f.t)("org_self_serve.details_step.legal_company_name"),value:n,onChange:e=>{let a=e.target.value;t({type:Y.H.UPDATE_LEGAL_NAME,payload:{legalName:a.trim()}})}}),(0,s.jsx)(td.Lf,{noMarginBottom:!0,htmlName:"org_name",label:(0,f.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,f.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:l,onChange:e=>{let a=e.target.value;t({type:Y.H.UPDATE_DISPLAY_NAME,payload:{displayName:a.trim()}})}})]})})}),(0,s.jsx)(tb,{state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r})]})}var tw=a(475477),tC=a(480795);let tI=(0,s.jsx)(v.Ph,{newTab:!0,trusted:!0,href:"/pricing",children:(0,f.tx)("checkout.monthly_price")});function tk({state:e,onSubmit:t}){let{renewalTerm:a,isSubmitting:i,tier:n}=e,[l,d]=r.useState(!1),o=(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp","data-testid":"cart-review-submit-loading",children:(0,s.jsx)(I.k,{})});return(0,s.jsxs)(e8,{title:n===ek.Ju.ORG?(0,f.t)("checkout.upgrade_to_an_organization_plan"):(0,f.t)("checkout.upgrade_to_a_professional_plan"),dataTestId:"cart-review",children:[(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xpgiz1h",children:[(0,s.jsx)(ts,{state:e,isCartReviewSummary:!0}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x78zum5",children:[(0,s.jsx)(tC.z,{className:"xrxf7wd"}),(0,s.jsx)(tM,{tier:n,isAnnual:a===E.NW.YEAR})]})})]}),(0,s.jsx)(tR,{tier:n,isAnnual:a===E.NW.YEAR}),(0,s.jsx)("div",{className:"x1bz8wuu x1hk0uxs x18wv8x9","data-testid":"cart-review-terms-checkbox",children:(0,s.jsx)(to.S,{label:(0,s.jsx)(e1.J,{children:(0,s.jsx)("span",{children:n===ek.Ju.ORG?(0,s.jsx)(tP,{}):(0,s.jsx)(tO,{})})}),checked:l,onChange:d})}),(0,s.jsx)(k.F,{fullWidth:!0,onClick:t,disabled:i||!l,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:S.c.COMPLETE_PURCHASE},children:i?o:(0,f.tx)("checkout.complete_purchase")})]})}function tR({tier:e,isAnnual:t}){let a=e===ek.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:"x1bz8wuu","data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:"x1vi7shn xp6roeo x1nz7w5u xyx8554 x1v8gsql x19y5rnk x78zum5 xdt5ytf xg2d0mh",children:[(0,s.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,f.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case ek.Ju.ORG:return(0,f.tx)("checkout.cart_review_upgrade_info_org");case ek.Ju.PRO:return t?(0,f.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:tI}):(0,f.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,ee.wc)(e)}}(e,t)}),(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xlup9mm",children:(0,s.jsx)(v.Ph,{newTab:!0,href:a,trusted:!0,children:(0,f.tx)("checkout.learn_more")})})]})})}function tP(){return(0,f.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(tw.N,{href:"/ssa",newTab:!0,trusted:!0,children:(0,f.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(tw.N,{href:(0,f.dS)("/renewal-and-cancellation"),newTab:!0,trusted:!0,children:(0,f.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})}function tO(){return(0,f.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:(0,s.jsx)(v.Ph,{href:"/tos",newTab:!0,trusted:!0,children:(0,f.tx)("pro_cart.review.tos")}),privacyLink:(0,s.jsx)(v.Ph,{href:"/privacy",newTab:!0,trusted:!0,children:(0,f.tx)("pro_cart.review.privacy_policy")}),cancellationLink:(0,s.jsx)(v.Ph,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",newTab:!0,trusted:!0,children:(0,f.tx)("pro_cart.review.cancellation_policy")})})}function tM({tier:e,isAnnual:t}){switch(e){case ek.Ju.ORG:return(0,f.tx)("checkout.purchase_summary.plan_renewal_org");case ek.Ju.PRO:return t?(0,f.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,f.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,ee.wc)(e)}}function tD({navigateToEditDetails:e,state:t}){let a=(0,U.Ay)().user_data,{displayName:r,legalName:i,tier:n,billingAddress:l,hasDifferentShippingAddress:d,shippingAddressInput:o}=t;return(0,s.jsxs)(e8,{title:(0,f.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(tL,{header:n===ek.Ju.ORG?(0,f.t)("checkout.cart_plan_details.organization_name"):(0,f.t)("checkout.cart_plan_details.team_name"),value:r||i,dataTestId:"cart-plan-details-plan-name"}),i&&(0,s.jsx)(tL,{header:(0,f.t)("checkout.cart_plan_details.legal_name"),value:i,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(tL,{header:(0,f.t)("checkout.cart_plan_details.invoice_email"),value:a?.email??"",dataTestId:"cart-plan-details-invoice-email"}),l&&(0,s.jsx)(tL,{header:(0,f.t)("checkout.cart_plan_details.billing_address"),value:(0,K.DS)(l),dataTestId:"cart-plan-details-billing-address"}),d&&!(0,E.$V)(o)&&(0,s.jsx)(tL,{header:(0,f.t)("checkout.cart_plan_details.shipping_address"),value:(0,K.DS)(o),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1w4f5ud x1vamu9a",children:(0,s.jsx)(y.rb,{onClick:e,trackingProperties:{trackingDescriptor:S.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",children:(0,f.tx)("checkout.cart_plan_details.edit_details")})})]})}function tL({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf xuzqwsy xpezlj7 xso031l x1q0q8m5 xertd99 x1cy8zhl","data-testid":a,children:[(0,s.jsx)("h4",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9 x1ihwiht",children:e}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x13faqbe",children:t})]})}function tB(e){let t=e.state.is3ds;return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{className:"x8x9d4c xack27t xdpxx8g x4vex6e",children:(0,s.jsx)(e2.Yy,{variant:"brand",children:(0,s.jsx)(e7.Q,{children:(0,f.t)("pro_cart.review.extra_validation")})})}),(0,s.jsxs)("div",{className:"xrvj5dj xe1a36 xvossa","data-testid":"cart-review-step",children:[(0,s.jsx)(tD,{...e}),(0,s.jsx)(tk,{...e})]})]})}var tU=a(999083),tV=a(420680),tz=a(293422),tG=a(365336),t$=a(695961),tH=a(780312),tF=a(849757),tq=a(876299),tK=a(963566),tY=a(560806),tW=a(755462),tJ=a(753151),tZ=a(624258),tX=a(826160);function tQ({state:e,teamId:t,shouldShowTeamColumn:a,dispatch:i}){let{tier:n,selectedUserSeatTypes:l,additionalSeatsCount:o,eligibleUsersByUserId:c,eligibleTeamsByTeamId:m,selectedTeamIds:u,currentUpgradingUserId:_}=e,p=(0,tY.s)({eligibleUsersByUserId:c,eligibleTeamsByTeamId:m,selectedTeamIds:Array.from(u),currentUpgradingUserId:_}),x=(0,r.useRef)(null),h=(0,tK.f)({tableContainerRef:x}),[y,v]=r.useState(!1),S=r.useMemo(()=>{let e=[...p];return(0,tU.v7)(e,e=>e.handle,{isDescending:y}),e},[p,y]),E=(0,K.UL)((0,K.iB)(l)),T=(0,K.UL)(o),j=(0,tq.G)({currency:e.currency,tier:e.tier,renewalTerm:e.renewalTerm,showCents:!1}),[N]=(0,eM.Ad)(j);if(null===N.data)throw Error("No seat types data");let b=N.data,A=(e,t)=>{i({type:Y.H.UPDATE_USER_SEAT_TYPE,payload:{userId:e,seatType:t}})};return(0,s.jsx)("div",{"data-testid":"select-seats-step",children:(0,s.jsxs)("div",{className:"x1yjdb4r x1mxnbhz xmkeg23 x1y0btm7 x7z60cl",ref:x,children:[(0,s.jsx)(tF.P,{maxHeight:h,className:g.xW(t1.scrollContainer),hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"xh8yej3 x140o2bo",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz x1xvsi7n xdmjnt8 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x19j9cuy",children:[(0,f.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:"x1rg5ohu","data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(tV.K,{onClick:()=>v(e=>!e),"aria-label":(0,f.t)("checkout.select_seats_table.sort"),children:y?(0,s.jsx)(tG.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(t$.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz x1gcgh60 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r",children:(0,f.tx)("checkout.select_seats_table.seat_column")}),a&&(0,s.jsx)("th",{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r",children:(0,f.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x1vp1w89 x1akne3o",children:(0,f.tx)("checkout.select_seats_table.description_column")})]})}),(0,s.jsx)("tbody",{className:"x1yjdb4r x499qwo",children:S.map(e=>(0,s.jsx)(t0,{user:e,seatTypes:b,selectedSeatType:l[e.id],changeSeatType:a=>{d.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:l[e.id],newSeatType:a,tier:n,teamId:t??void 0}),A(e.id,a)},tier:n,teamId:t??void 0,shouldShowTeamColumn:a},e.id))})]})}),(0,s.jsxs)("div",{className:"x1xvsi7n xdmjnt8 x8rdmch xyx8554 x178xt8z x13fuv20 x16ufvko x78zum5 x6s0dn4 x1qughib",children:[(0,s.jsx)(tW.m,{tier:n,seatTypes:b,additionalSeatCounts:o,setAdditionalSeats:e=>{i({type:Y.H.UPDATE_ADDITIONAL_SEATS,payload:e})}}),(0,s.jsx)("p",{children:(0,f.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,f.tx)("checkout.select_seats_table.assigned_seats",{count:E}),unassignedSeatsText:(0,f.tx)("checkout.select_seats_table.unassigned_seats",{count:T})})})]})]})})}function t0({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:n,shouldShowTeamColumn:l,teamId:d}){let o=(0,i.wA)(),c=(0,A.TA)(),m=e.id===c;return(0,te.uy)(t[a])?null:(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz","data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(tX.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:m})}),(0,s.jsx)("td",{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz",children:(0,s.jsx)(tz.Pw,{variant:"ghost","aria-label":(0,f.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:()=>{o((0,eF.to)({type:tJ.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:n,teamId:d}}))},children:(0,s.jsxs)("span",{className:"x78zum5 x6s0dn4 x1qughib",children:[(0,s.jsxs)("span",{className:"x78zum5 x6s0dn4 x8vt714",children:[(0,s.jsx)(tZ.BC,{type:a,size:"24"}),t[a].displayName]}),(0,s.jsx)(tH.R,{})]})})}),l&&(0,s.jsx)("td",{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv",children:e.teams}),(0,s.jsx)("td",{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x1n0bwc9",children:t[a].description})]})}let t1={scrollContainer:{kIxVMA:"x19j9cuy",ksF3WI:"x1vp1w89",krdFHd:null,kfmiAY:null,$$css:!0}};var t5=a(554875),t2=a(954068),t7=a(142914);function t3({dispatch:e,state:t}){let{selectedTeamIds:a,eligibleTeamsByTeamId:r}=t,i=(0,K.Ds)(Object.values(r));return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsx)("div",{className:"xrvj5dj x1i71x30 xnby9oq x1xvdgkk",children:i.map(t=>(0,s.jsx)(t4,{team:t,isSelected:a.has(t.id),onToggle:t=>{e({type:Y.H.ON_TOGGLE_TEAM,payload:{toggledTeam:t}})}},t.id))})})}function t4({team:e,isSelected:t,onToggle:a}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(t5.F,{className:w.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,...{0:{className:"x87ps6o x1ypdohk xrvj5dj x146aooz x1pulhmw x6s0dn4 xmkeg23 x1y0btm7 x19y5rnk x1d5d5yt xjtplnu x7z60cl x1yjdb4r"},1:{className:"x87ps6o x1ypdohk xrvj5dj x146aooz x1pulhmw x6s0dn4 xmkeg23 x1y0btm7 x19y5rnk x1d5d5yt xjtplnu x1va2ikv xpjdn5u"}}[!!t<<0],children:[(0,s.jsx)(t7.nl,{team:e}),(0,s.jsxs)("span",{className:"x193iq5w",children:[(0,s.jsx)("span",{className:"x1lliihq x193iq5w xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o xb3r6kr xlyipyv xuxw1ft",children:e.name}),(0,s.jsx)("span",{className:"x1lliihq x4oah1p xewu7z0 x2ua9qx x1dnis8n xawads1 x1n0bwc9 xb3r6kr xlyipyv xuxw1ft",children:(0,f.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:"xzdfcct x8x9d4c",children:(0,s.jsx)(t2.g,{})})]})]},e.id)}function t6({contactSales:e,step:t,state:a,performTierUpgrade:r,setStep:i,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,onNext:c,getNextStep:m}){let{tier:_}=a,{teamName:p}=(0,u.Rs)((0,eJ.CJW)({teamId:n})).transform(({team:e})=>({teamName:e?.name??""})).unwrapOr({teamName:""});return(0,s.jsxs)("div",{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o",children:[(0,s.jsx)(z,{step:t,teamName:p}),t===E.fI.REVIEW?(0,s.jsx)(tB,{state:a,onSubmit:r,navigateToEditDetails:()=>i(E.fI.PAYMENT_AND_ADDRESS)}):(0,s.jsxs)("div",{className:"xrvj5dj x3uu4nb x1fwvi78",children:[t===E.fI.SELECT_TEAMS&&(0,s.jsx)(t3,{state:a,dispatch:l}),t===E.fI.SELECT_SEATS&&(0,s.jsx)(tQ,{state:a,teamId:n,dispatch:l,shouldShowTeamColumn:_===ek.Ju.ORG}),t===E.fI.PAYMENT_AND_ADDRESS&&(0,s.jsx)(tA,{state:a,dispatch:l,createPaymentElement:d,unmountPaymentElement:o}),(0,s.jsx)(tl,{buttonText:T[t]?.buttonText??null,state:a,dispatch:l,onClickNext:c,nextStep:m(),canSwitchRenewalTerm:_===ek.Ju.PRO,onContactSalesClick:e,shouldRenderCartData:t!==E.fI.SELECT_TEAMS})]})]})}var t9=a(751084),t8=a(349311);function ae({teamId:e,dispatch:t,state:a}){let{currency:l,currentUpgradingUserId:o,eligibleUsersByUserId:c,renewalTerm:m,selectedUserSeatTypes:u,tier:_}=a,x=r.useRef(null),h=(0,tq.G)({currency:l,tier:_,renewalTerm:m,showCents:!1}),g=(0,i.wA)(),[v]=(0,t9.m)([h]);if(null===v)throw(0,p.$D)(n.e.MONETIZATION_UPGRADES,Error("Invalid state: No seat types data"),{extra:{currency:l,tier:_,renewalTerm:m,showCents:!1,seatTypesQuery:h,seatTypesResponse:v}}),Error("No seat types data");let S=u[o],E=(0,ta.SS)(S,{overridePlanTier:_}),T=S===eC.ud.EXPERT,j=c[o];if(!j)return(0,p.$D)(n.e.MONETIZATION_UPGRADES,Error("Invalid user"),{extra:{user:j}}),null;let N=(e,a)=>{t({type:Y.H.UPDATE_USER_SEAT_TYPE,payload:{userId:e,seatType:a}})},b=t=>{g((0,eF.to)({type:tJ.Y,data:{user:j,seatTypes:v,selectedSeatType:t,setSelectedSeatType:a=>{d.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:j.id,previousSeatType:t,newSeatType:a,tier:_,teamId:e}),N(j.id,a)},tier:_,teamId:e}}))};return(0,s.jsx)("div",{className:"x9h44rk xmkeg23 x1y0btm7 x7z60cl x1ef8nbk x1kzcg16",children:(0,s.jsxs)("table",{className:"xh8yej3 x140o2bo",children:[(0,s.jsxs)("colgroup",{children:[(0,s.jsx)("col",{className:"xqyf9gi"}),(0,s.jsx)("col",{className:"x13qflfw"}),(0,s.jsx)("col",{className:"xo5x3gg"})]}),(0,s.jsx)("thead",{className:"x10l6tqk xzpqnlu",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:(0,f.tx)("checkout.select_seats_table.user_column")}),(0,s.jsx)("th",{scope:"col",children:(0,f.tx)("checkout.select_seats_table.seat_column")}),(0,s.jsx)("th",{scope:"col",children:(0,f.t)("checkout.edit_user_seat_name",{name:j.handle})})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{"data-testid":"avatar-container",className:"xctkrei",children:(0,s.jsx)(tX.az,{entity:j,includeUserEmailAddress:!0,size:24,showIsMe:!0})}),(0,s.jsxs)("td",{className:"xxymvpz",children:[(0,s.jsxs)("div",{"data-testid":"seat-type-icon-container",className:"x78zum5 xg2d0mh x6s0dn4",children:[(0,s.jsx)(tZ.BC,{removeBackgroundColor:!0,type:S,size:"16"}),(0,s.jsx)("p",{children:(0,tt.JT)(S)}),T&&(0,s.jsx)("div",{children:(0,s.jsx)(e5.E,{"data-testid":"badge",variant:"brandOutline",size:"md",children:(0,f.t)("checkout.recommended")})})]}),(0,s.jsx)("p",{"data-tooltip-type":t8.Ib.TEXT,"data-tooltip":x.current&&x.current.offsetWidth<x.current.scrollWidth?E:null,"data-tooltip-timeout-delay":500,className:"xv1l7n4 xuxw1ft xb3r6kr xlyipyv",ref:x,children:E})]}),(0,s.jsx)("td",{className:"x16dsc37 x1hr2gdg xuxw1ft x4p5aij",children:(0,s.jsx)(y.rb,{"data-testid":"button-link-tracked",onClick:()=>b(S),children:(0,f.tx)("members_table.batch_actions_menu.role_change.seat_rename")})})]})})]})})}function at({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r,teamId:i}){let{tier:l}=e;return i&&l===ek.Ju.PRO?(0,s.jsxs)("div",{children:[(0,s.jsx)(ae,{teamId:i,dispatch:t,state:e}),(0,s.jsx)(tb,{state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r})]}):((0,p.$D)(n.e.MONETIZATION_UPGRADES,Error("Invalid state: missing teamId or invalid tier in SeatSelectionAndPaymentDetailsStep"),{extra:{teamId:i,tier:l}}),null)}function aa({contactSales:e,step:t,state:a,performTierUpgrade:r,setStep:i,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,onNext:c,getNextStep:m}){let{tier:_}=a,{teamName:p}=(0,u.Rs)((0,eJ.CJW)({teamId:n})).transform(({team:e})=>({teamName:e?.name??""})).unwrapOr({teamName:""});return(0,s.jsxs)("div",{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o",children:[(0,s.jsx)(z,{step:t,teamName:p}),t===E.fI.SELECT_SEATS_AND_PAYMENT&&(0,s.jsxs)("div",{className:"xrvj5dj x3uu4nb x1fwvi78",children:[(0,s.jsx)(at,{state:a,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o}),(0,s.jsx)(tl,{buttonText:T[t]?.buttonText??null,state:a,dispatch:l,onClickNext:c,nextStep:m(),canSwitchRenewalTerm:_===ek.Ju.PRO,onContactSalesClick:e,shouldRenderCartData:!0})]}),t===E.fI.REVIEW&&(0,s.jsx)(tB,{state:a,onSubmit:r,navigateToEditDetails:()=>i(E.fI.SELECT_SEATS_AND_PAYMENT)})]})}function as({teamId:e,entryPoint:t,newUser:a,..._}){let x=function(){let{getConfig:e}=(0,H.I7)("exp_single_editor_checkout");return!!e().getValue("enabled",!1)}(),h=(0,F.C)((0,eK.c)(t),a),g=(0,b._6)(),y=(0,i.wA)(),{state:v,dispatch:S,createPaymentElement:T,unmountPaymentElement:j,validateUserSeatTypeSelections:A,validatePaymentInputs:w,collectPaymentDetails:I,performTierUpgrade:k}=function({teamId:e,entryPoint:t,newUser:a,...s}){let[n,d]=(0,r.useReducer)(eV,s,eU),{tier:o,currency:c,renewalTerm:m,selectedUserSeatTypes:u,additionalSeatsCount:_,hasDifferentLegalName:p,legalName:x}=n,h=U.tl().stripe_payment_method_configurations?.[o],g=eL({currency:c,tier:o,renewalTerm:m}),{state:y,dispatch:v,createPaymentElement:S,unmountPaymentElement:T,createPaymentMethod:j,confirmIntent:b}=function({useStripeProps:e,currency:t,defaultCountry:a,isCheckout:s,upgradingTier:i}){let n=(0,es.S2)().unwrapOr(null),[d,o]=(0,r.useReducer)(eN,ej),{address:c,updateAddress:m,trimAddress:u}=(0,ed.U)({defaultCountry:a??(0,ea.ub)()}),{address:_,updateAddress:p,trimAddress:x}=(0,ed.U)({defaultCountry:a??(0,ea.ub)()}),{createPaymentElement:h,unmountPaymentElement:g,createPaymentMethod:y,confirmIntent:v,error:S,paymentMethodType:T,stripeIntent:j,stripeCustomerId:N,is3ds:b}=eT({...e,currency:t}),A={name:d.nameOnPaymentMethod,address:(0,er.sH)(c)},w=d.isUsingSavedPaymentMethod?(0,er._l)(d.savedPaymentMethod?.billing_address):c,C=d.hasDifferentShippingAddress&&!(0,E.$V)(_)?_:c,I=d.savedPaymentMethod?.shipping_address?(0,er._l)(d.savedPaymentMethod?.shipping_address):w,k=d.isUsingSavedPaymentMethod?I:C,{status:R,data:P}=function({enabledFetch:e}){let t=(0,es.S2)().unwrapOr(null),[a]=(0,eo.IT)(ec({planKey:t?.key,enabledFetch:e}),{enabled:!!t});return a.transform(e=>e?.payment_methods??[])}({enabledFetch:!!(0,l.kc)().cart_rewrite_full_send_saved_payment});(0,r.useEffect)(()=>{"loaded"===R&&o({type:eu.INIT_SAVED_PAYMENT_METHODS,payload:P})},[R]);let O=async()=>{u(),x();let e=await L();if(o({type:eu.SET_ERRORS,payload:e}),e.length>0)return e;let t=await y(A);if(eS(t)||!t)return t;try{await ei.V.postValidatePayment({billingAddress:w,shippingAddress:k,paymentMethodId:t.id})}catch(t){let e=[{code:em.PAYMENT_METHOD_VALIDATION_ERROR,message:t.message}];return o({type:eu.SET_ERRORS,payload:e}),e}return o({type:eu.SET_STRIPE_PAYMENT_METHOD,payload:t.id}),t.id},M=async({paymentMethod:a,createIntentParams:s})=>{let r=a||d.stripePaymentMethod;if(!r){let e=[{code:em.MISSING_PAYMENT_METHOD_ERROR,message:(0,f.t)("payments.errors.missing_payment_method")}];return o({type:eu.SET_ERRORS,payload:e}),e}let l=await v({paymentMethod:r,createIntentParams:{...s,redirectUrl:"/",currency:t,billingAddress:w,shippingAddress:k,stripePaymentMethodConfiguration:e.stripePaymentMethodConfiguration}});if(eS(l))return l;if(l.customer)try{await ei.V.postSavePayment({paymentMethodId:r,stripeCustomerId:l.customer,teamId:s.teamId,planRecordId:n?.planRecordId,currency:t,billingAddress:w,shippingAddress:k,upgradingTier:i})}catch(t){let e=[{code:em.SAVE_PAYMENT_METHOD_ERROR,message:t.message}];return o({type:eu.SET_ERRORS,payload:e}),e}return l},D=(0,r.useCallback)(e=>{switch(e.type){case eu.UPDATE_BILLING_ADDRESS:m(e.payload);break;case eu.UPDATE_SHIPPING_ADDRESS:p(e.payload);break;default:o(e)}},[m,p]);async function L(){let{vatGstId:e,regionalVatGstId:a,nameOnPaymentMethod:r}=d,i=await Promise.all([eb({billingAddress:w,shippingAddress:k,teamId:n?.key.parentId??null,isCheckout:!!s}),eA({currency:t,billingAddress:w,shippingAddress:k,teamId:n?.key.parentId??null,isCheckout:!!s}),ew({vatGstId:e,country:w.country}),ew({vatGstId:a,country:w.country,region:w.region})]);return r||i.unshift({code:em.NAME_ON_PAYMENT_METHOD_REQUIRED,message:(0,f.t)("payments.errors.name_on_payment_method_required")}),i.filter(e=>!!e)}return{state:{...d,billingAddress:w,shippingAddress:k,shippingAddressInput:_,stripeError:S,paymentMethodType:T,stripeIntent:j,is3ds:b,stripeCustomerId:N},dispatch:D,createPaymentElement:h,unmountPaymentElement:g,createPaymentMethod:O,confirmIntent:M}}({useStripeProps:{currency:c,paymentFlowSource:ef.PRO_UPGRADE,stripePaymentMethodConfiguration:h},currency:c,defaultCountry:(0,ea.ub)(),isCheckout:!0,upgradingTier:o}),{status:A,data:{eligibleTeams:w,eligibleTeamUsers:C,currentUpgradingUser:I}}=function({teamId:e,tier:t}){let a=(0,i.wA)(),[s]=(0,eo.IT)(eO({tier:t,teamId:e}));return((0,eP.i)(s,(0,f.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again")),"errors"===s.status&&a(N.sf({view:"recentsAndSharing"})),"loaded"===s.status)?{status:s.status,data:{eligibleTeams:s.data.eligible_teams,eligibleTeamUsers:s.data.eligible_team_users,currentUpgradingUser:s.data.current_upgrading_user}}:{status:s.status,data:{eligibleTeams:[],eligibleTeamUsers:[],currentUpgradingUser:null}}}({teamId:e,tier:o}),k=(0,r.useMemo)(()=>(0,K.O$)(u,_),[u,_]),R=(0,r.useMemo)(()=>(0,K.s$)(g),[g]),P=(0,r.useMemo)(()=>({...n,...y,applicablePriceData:g,paymentFormErrors:y.errors,cartSelectionError:n.error,countBySeatType:k}),[n,y,g,k]),M=(0,O.x)({state:P,cartDispatch:d,teamId:e,entryPoint:t,newUser:a});(0,r.useEffect)(()=>{if("loaded"===A){let{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s}=(0,q.W)(w,C,I);(0,Z.R9)({eligibleTeamIds:w.map(e=>e.id).filter(e=>!!e),eligibleTeamUsers:C,tier:o}),d({type:Y.H.INIT,payload:{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s,currentUpgradingUserId:I.user.id}})}},[A]);let D=(0,r.useCallback)(e=>{var t;"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof(t=e.type)&&Object.values(eu).includes(t)?v(e):d(e)},[d,v]);async function L(){d({type:Y.H.SET_IS_SUBMITTING,payload:{isSubmitting:!0}});let t=y.isUsingSavedPaymentMethod?y.stripePaymentMethod:await j();if(e_(t)||eS(t))return d({type:Y.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),t;let a=await b({paymentMethod:t,createIntentParams:{teamId:e,subtotalEstimate:(0,Q.Vh)(k,R),currency:c,createStripeCustomer:!0}});if(eS(a)||e_(a))return d({type:Y.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a;try{let t=await eR.T.calculateEstimate({teamId:e,address:y.billingAddress,billingAddress:y.billingAddress,shippingAddress:y.shippingAddress,currency:c,vatGstId:y.vatGstId,regionalVatGstId:y.regionalVatGstId});d({type:Y.H.SET_TAX_PERCENT,payload:{taxPercent:t.data.meta.estimate.tax_percent??0}})}catch(t){let e={code:Y.C.ESTIMATE_CALCULATION_ERROR,message:(0,f.t)("payments.errors.estimate_calculation_error")};return d({type:Y.H.SET_ERROR,payload:{error:e}}),d({type:Y.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}return d({type:Y.H.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),null}let B=(0,r.useCallback)(()=>{let e=J({additionalSeatsCount:_,selectedUserSeatTypes:u,tier:o});return D({type:Y.H.SET_ERROR,payload:{error:e}}),e},[D,_,u,o]),V=(0,r.useCallback)(()=>{if((o===ek.Ju.ORG||o===ek.Ju.PRO&&p)&&!x){let e={code:Y.C.INVALID_LEGAL_NAME,message:(0,f.t)("checkout.errors.missing_legal_name")};return D({type:Y.H.SET_ERROR,payload:{error:e}}),e}return null},[D,o,x,p]);return{state:P,dispatch:D,createPaymentElement:S,unmountPaymentElement:T,collectPaymentDetails:L,performTierUpgrade:M,validateUserSeatTypeSelections:B,validatePaymentInputs:V}}({teamId:e,tier:_.tier,currency:_.currency,renewalTerm:_.renewalTerm,entryPoint:t,newUser:a}),{tier:M,currency:L,renewalTerm:B,selectedTeamIds:V,selectedUserSeatTypes:z,additionalSeatsCount:$,countBySeatType:W,applicablePriceData:X,eligibleTeamsByTeamId:ee,isLoading:et,stripeError:en,cartSelectionError:el,isSubmitting:ep,eligibleUsersByUserId:ex}=v,[eh,eg]=(0,r.useState)(null);(0,r.useEffect)(()=>{!et&&1===Object.keys(ex).length&&M===ek.Ju.PRO&&x&&eg(P.x.SINGLE_EDITOR)},[et,ex,eg,x,M]);let ey=(0,r.useMemo)(()=>et?[]:function({tier:e,eligibleTeams:t,checkoutFlowType:a,isSingleEditorCheckoutExpEnabled:s,shouldShowStreamlinedNewUserCheckoutUX:r}){let i=[E.fI.SELECT_SEATS,E.fI.PAYMENT_AND_ADDRESS,E.fI.REVIEW],n=[E.fI.SELECT_SEATS_AND_PAYMENT,E.fI.REVIEW],l=[];if(e===ek.Ju.PRO)return l=s?a===P.x.SINGLE_EDITOR?[E.fI.UPGRADE_TYPE,...n]:[E.fI.UPGRADE_TYPE,...i]:i,r&&l.push(E.fI.CONFIRMATION),l;{let e=[...i,E.fI.CONFIRMATION];return t.length>0?[E.fI.SELECT_TEAMS,...e]:e}}({tier:M,eligibleTeams:Object.values(ee),checkoutFlowType:eh,isSingleEditorCheckoutExpEnabled:x,shouldShowStreamlinedNewUserCheckoutUX:h()}),[et,M,ee,eh,x,h]),[eE,eC]=(0,r.useState)(ey[0]),{teamName:eI,isOrgAdmin:eM,userEmail:eD}=(0,u.Rs)((0,eJ.CJW)({teamId:e})).transform(({team:e,currentUser:t})=>({teamName:e?.name??"",userEmail:t?.email??"",isOrgAdmin:t?.baseOrgUsers?.some(e=>e.permission===eW._D.ADMIN)})).unwrapOr({teamName:"",isOrgAdmin:!1,userEmail:""}),eB=(0,r.useCallback)(e=>{"teamUpgrade"===g.view?y((0,N.sf)({...g,paymentStep:e})):"orgSelfServe"===g.view&&y((0,N.sf)({...g,step:e}))},[y]),eY=(0,r.useCallback)(t=>{if(-1===ey.indexOf(t)){(0,p.$D)(n.e.MONETIZATION_UPGRADES,Error(`Invalid step: ${t}`),{extra:{steps:ey,step:t}});return}eC(t),eB(t),eE&&d.az.trackDefinedEvent("monetization_upgrades.checkout_change_step",{teamId:e?.toString(),currentStep:eE,tier:M,newStep:t,selectedTeamIds:(0,Z.gu)(Array.from(V)),selectedUserSeatTypes:(0,Z.Tj)(z)??void 0,additionalSeatsCount:(0,Z.gS)($)??void 0,countBySeatType:(0,Z.gS)(W)??void 0})},[ey,eB,e,eE,M,V,z,$,W]),eQ=(0,r.useCallback)(e=>{let t=ey.indexOf(eE);ey.indexOf(e)>t||eY(e)},[eE,ey,eY]),e0=(0,r.useCallback)(()=>ey[Math.min(ey.indexOf(eE)+1,ey.length-1)],[eE,ey]),e1=(0,r.useCallback)(async()=>{if(ep)return!1;switch(S({type:Y.H.SET_ERROR,payload:{error:null}}),eE){case E.fI.SELECT_TEAMS:S({type:Y.H.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS});break;case E.fI.SELECT_SEATS:if(await A())return!1;break;case E.fI.PAYMENT_AND_ADDRESS:if(w()||await I())return!1;break;case E.fI.SELECT_SEATS_AND_PAYMENT:if(await A()||w()||await I())return!1}return eY(e0()),!0},[eE,eY,A,w,I,S,e0,ep]),e5=(0,r.useCallback)(async()=>{let e=await k();e||M!==ek.Ju.ORG||eY(E.fI.CONFIRMATION),!e&&M===ek.Ju.PRO&&h()&&eY(E.fI.CONFIRMATION)},[k,eY,M,h]),e2=(0,r.useCallback)(e=>{S({type:Y.H.UPDATE_TO_DEFAULT_SEAT_SELECTIONS,payload:{shouldUseSingleEditor:e===P.x.SINGLE_EDITOR}}),eg(e)},[S,eg]),e7=()=>{y((0,eF.to)({type:ez.lk,data:{source:eG.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},e3=()=>{m.Ay.redirect("/files/recent")};return(0,r.useEffect)(()=>{if(!et&&!eE){let a=ey[0];eY(a),(0,l.kc)().enable_starter_cart_rum_tracking&&(0,o.bj)({collectErrors:!0,service:"cart",sessionSampleRate:100,alwaysInit:!0}),d.az.trackDefinedEvent("monetization_upgrades.checkout_entry",{teamId:e?.toString(),entryPoint:(0,eK.c)(t),upsellSource:(0,eK.d)(t),step:a,tier:M,currency:L,renewalTerm:B,selectedTeamIds:(0,Z.gu)(Array.from(V)),selectedUserSeatTypes:(0,Z.Tj)(z)??void 0,additionalSeatsCount:(0,Z.gS)($)??void 0,countBySeatType:(0,Z.gS)(W)??void 0})}},[et,eE,ey,eY,e,t,M,L,B,V,z,W,$]),(0,r.useEffect)(()=>{eE===E.fI.PAYMENT_AND_ADDRESS&&en?.code===ev.UNINITIALIZED_STRIPE_ELEMENTS_ERROR&&(eh===P.x.SINGLE_EDITOR?eY(E.fI.UPGRADE_TYPE):eY(E.fI.SELECT_SEATS))},[en?.code,eE,eY,eh]),(0,r.useEffect)(()=>{el?.code===Y.C.CARD_ERROR&&eE===E.fI.REVIEW&&(eh===P.x.SINGLE_EDITOR?eY(E.fI.SELECT_SEATS_AND_PAYMENT):eY(E.fI.PAYMENT_AND_ADDRESS))},[el?.code,eY,eE,eh,M]),(0,r.useEffect)(()=>{eI&&S({type:Y.H.UPDATE_DISPLAY_NAME,payload:{displayName:eI}})},[eI,S]),(0,r.useEffect)(()=>{document.querySelector("h1")?.focus()},[eE]),(0,s.jsx)(eq.fu,{name:eX.e0.TIER_UPGRADE_FLOW,properties:{teamId:e?.toString(),entryPoint:(0,eK.c)(t),upsellSource:a?eZ.b.PURCHASE_PROFESSIONAL_ROUTE:(0,eK.d)(t),tier:M,step:eE,currency:L,renewalTerm:B,prices:(0,Z.Jh)(X)},enabled:!et,trackingOptions:{teamName:n.e.MONETIZATION_UPGRADES,addToRUM:!0},children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(eH.f,{}),children:et||!eE?(0,s.jsx)(eH.f,{}):eE===E.fI.CONFIRMATION?M===ek.Ju.ORG?(0,s.jsx)(R,{orgMigrated:_.orgMigrated}):(0,s.jsx)(D,{teamId:e}):(0,s.jsxs)("form",{children:[M===ek.Ju.ORG&&eM&&(0,s.jsx)(e$.wW,{onContactSales:e7,onFileBrowserClick:e3}),M===ek.Ju.ORG&&(0,c.qe)(eD)&&(0,s.jsx)(e$.VE,{onFileBrowserClick:e3}),(0,s.jsx)(C,{steps:ey,currentStep:eE,setStep:eQ,teamId:e}),eE===E.fI.UPGRADE_TYPE&&(0,s.jsx)(G,{checkoutFlowType:eh,setCheckoutFlowType:e2,onClickNext:e1}),eE!==E.fI.UPGRADE_TYPE&&(eh===P.x.SINGLE_EDITOR?(0,s.jsx)(aa,{contactSales:e7,createPaymentElement:T,dispatch:S,getNextStep:e0,onNext:e1,performTierUpgrade:e5,setStep:eY,state:v,step:eE,teamId:e,unmountPaymentElement:j}):(0,s.jsx)(t6,{contactSales:e7,createPaymentElement:T,dispatch:S,getNextStep:e0,onNext:e1,performTierUpgrade:e5,setStep:eY,state:v,step:eE,teamId:e,unmountPaymentElement:j}))]})})})}function ar(e){return(0,s.jsx)(_.u,{label:"TierUpgradeFlow",children:(0,s.jsx)(x.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"TierUpgradeFlow",fallback:x.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:eY.y4,children:(0,s.jsx)(as,{...e})})})}},232362:(e,t,a)=>{a.d(t,{A:()=>n,b:()=>i});var s=a(192075),r=a(944350);let i={[r.Ag.STARTER]:0,[r.Ag.STUDENT]:0,[r.Ag.PRO]:3,[r.Ag.ORG]:6,[r.Ag.ENTERPRISE]:15};function n(e){return({[r.Ag.STARTER]:null,[r.Ag.STUDENT]:null,[r.Ag.PRO]:(0,s.t)("resource_connection.admin_ui.professional"),[r.Ag.ORG]:(0,s.t)("resource_connection.admin_ui.organization"),[r.Ag.ENTERPRISE]:(0,s.t)("resource_connection.admin_ui.enterprise")})[e]}},617980:(e,t,a)=>{a.d(t,{A:()=>f,y:()=>y});var s=a(237420),r=a(795033),i=a(653899);if(443==a.j)var n=a(428147);if(443==a.j)var l=a(312156);if(443==a.j)var d=a(906356);var o=a(366535),c=a(422872),m=a(847282),u=a(381059),_=a(958127),p=a(745529),x=a(143277),h=a(563554),g=a(441030);let y="upgrade";function f(){let e=(0,s.wA)(),t=(0,r.md)(u.d2),a=(0,c.e)({overlay:g.Wb3,priority:x.N.URGENT_ALERT},[t]);return(0,i.h)(()=>{let t=(0,m.QL)(y),s=(0,m.QL)("entryPoint");switch(t){case"pro":a.show({canShow:e=>e===h.qo.PERSONAL,onShow:()=>{let t={dispatch:e,plan:l.I.PRO,entryPoint:s?parseInt(s,10):(0,p.c)(_.C6.PRO_UPGRADE_SEQUENCE_FROM_DEEPLINK)};e((0,o.to)({type:d.dR,data:{...t}})),a.complete()}});break;case"plan_comparison":a.show({canShow:e=>e===h.qo.PERSONAL,onShow:()=>{e((0,o.to)({type:n.V,data:{entrypoint:s?{kind:"cart",id:parseInt(s,10)}:_.C6.PLAN_COMPARISON_MODAL_FROM_DEEPLINK}})),a.complete()}})}}),null}},449250:(e,t,a)=>{a.d(t,{K:()=>o});var s=a(104076),r=a(903853),i=a(918999),n=a(236631),l=a(192075),d=a(578888);function o(){return(0,s.jsx)(i.u,{useOriginalSrcFills:!0,imageClassName:"request_error_interstitial--warningIcon--9ayvs",imageSrc:d.A,headerText:(0,l.t)("request_error_interstitial.there_was_an_error"),children:(0,s.jsx)(r.vd,{className:n.s.mt24.$,type:"submit",onClick:()=>{window.location.href=window.location.href},children:(0,l.tx)("request_error_interstitial.refresh_and_try_again")})})}},229910:(e,t,a)=>{a.d(t,{L:()=>E});var s=a(104076),r=a(716976),i=a(237420),n=a(511570),l=a.n(n),d=a(473678),o=a(555013),c=a(236631),m=a(256384),u=a(106141),_=a(192075),p=a(281684),x=a(366535),h=a(483200),g=a(507665),y=a(959834),f=a(432786),v=a(672815);let S=r.memo(function(e){let t=(0,i.wA)(),{displayName:a,legalName:n}=e,[y,S]=r.useState(a||""),[E,T]=r.useState(n||""),{isLoading:j,withLoading:N}=(0,u.R)(),b=()=>{t(x.Ce())},A=async a=>{a.preventDefault(),await N(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:y})):await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.$.updateTeamName({teamId:e.team.id,updatedDisplayName:y,updatedLegalName:E}))}catch(s){let a=e.canSeeBillingAddressExp?(0,_.t)("update_company_details_modal.update_display_name.error"):(0,_.t)("update_company_details_modal.update_team_name.error");throw t(m.s.error((0,p.J)(s)||a)),s}else t(h.yy({legalName:E,displayName:y}));b()})};return(0,s.jsx)(f.OJ,{onClose:b,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0,children:(0,s.jsxs)("form",{onSubmit:A,className:c.s.p16.$,children:[(0,s.jsxs)("div",{className:c.s.mt4.$,children:[(0,s.jsxs)("label",{htmlFor:"teamName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,_.tx)("pro_cart.review.edit_details.team_name_label")}),(0,_.tx)("pro_cart.review.edit_details.team_name_description")]}),(0,s.jsx)(o.ks,{value:y,id:"teamName",onChange:e=>{S(e.target.value)},dataTestId:"company-team-name",className:c.s.block.mt8.wFull.$})]}),!e.canSeeBillingAddressExp&&(0,s.jsxs)("div",{className:c.s.mt20.$,children:[(0,s.jsxs)("label",{htmlFor:"legalName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,_.tx)("pro_cart.review.edit_details.company_name_label")}),(0,_.tx)("pro_cart.review.edit_details.company_name_description")]}),(0,s.jsx)(o.ks,{value:E,id:"legalName",onChange:e=>{T(e.target.value)},dataTestId:"company-name",className:c.s.block.mt8.wFull.$})]}),(0,s.jsxs)("div",{className:l()(v.v0,v.hF),children:[(0,s.jsx)(o.tM,{onClick:b,disabled:j,children:(0,_.tx)("pro_cart.review.edit_details.cancel")}),(0,s.jsx)(o.vd,{className:v.pL,disabled:j,type:"submit",children:(0,_.tx)("pro_cart.review.edit_details.save")})]})]})})}),E=(0,y.Ju)(S,"UpdateCompanyDetailsModal")},71004:(e,t,a)=>{a.d(t,{Mt:()=>w,OI:()=>A,Ud:()=>N});var s=a(716976),r=a(237420),i=a(901014),n=a(310725),l=a(328341),d=a(755444),o=a(432099),c=a(256384),m=a(192075),u=a(525980),_=a(147046),p=a(877100),x=a(483200),h=a(935167),g=a(347592),y=a(944350),f=a(984887),v=a(338052),S=a(134391),E=a(592726),T=a(530299),j=a(853039);let N=(0,v.Do)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,r.wA)(),p=(0,r.d4)(e=>e.loadingState),g=(0,r.d4)(t=>e?t.teamUserByTeamId[e]:null),v=(0,r.d4)(e=>e.selectedView),N=(0,E.iZ)(),[A,C]=(0,s.useState)(!0),I=(0,l.ZC)(e),k=(0,u.s)(),R=h.Xw.loadingKeyForPayload({teamId:e}),P=(0,T.GH)(p,R),O=(0,d.DC)();(0,s.useEffect)(()=>{a(h.Xw({teamId:e}))},[a,e]);let M=function(){let e=(0,r.wA)();return(0,s.useCallback)(t=>{(0,i.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(x.eK(t))},[e])}();return(0,s.useEffect)(()=>{async function s(t){try{let s=await o.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(x.i({taxes:s.data.meta.estimate}))}catch(e){a(c.s.error((0,m.t)("payments.errors.estimate_calculation_error"))),a(_.sf({...v,paymentStep:f.Vv.PAYMENT_AND_ADDRESS}))}C(!1)}if(void 0===I||I===e||A||(w(a),C(!0)),(!e||P)&&A){let l=(0,j.BR)(g,N),d=Object.entries(l).map(([e,t])=>{if((0,n.nD)(t.email||""))return e}).filter(e=>!!e);a(x.M2({figmaEmailTeamUsers:d}));let o=(0,S.lX)({teamId:e,userId:N?.id});if(o){o.editorStatusChanges=(0,S.nt)(o.editorStatusChanges,l);let n=(0,j.Ky)(l,o.editorStatusChanges,y._Y.DESIGN),c=(0,j.Ky)(l,o.editorStatusChanges,y._Y.WHITEBOARD),m=n+o.numEmptyDesignSeats,u=c+o.numEmptyWhiteboardSeats;if(M({numDesignEditors:m,numWhiteboardEditors:u,editorStatusChanges:o.editorStatusChanges,teamId:e,updatedAt:o.updatedAt,cartSelections:o.cartSelections}),O){var r;let e=(r=O.billing_period,f.tY[f.tY[r]]),i=t?{billing_address:O.billing_address,shipping_address:O.shipping_address||O.billing_address}:null;a(x.Lo({billingPeriod:e})),a(x.$h({vatGstId:O.vat_gst_id})),a(x.yy({legalName:O.customer_legal_name||O.company_name,displayName:O.display_name})),a(x.Ef({regionalVatGstId:O.regional_vat_gst_id})),s({address:O.address,editor_status_changes:o.editorStatusChanges,figma_email_team_users:d,selected_currency:O.currency,annual_quantity:(0,j.fD)(e,m),monthly_quantity:(0,j.Rq)(e,m),annual_whiteboard_quantity:(0,j.fD)(e,u),monthly_whiteboard_quantity:(0,j.Rq)(e,u),vat_gst_id:O.vat_gst_id,regional_vat_gst_id:O.regional_vat_gst_id,...i})}else"teamUpgrade"===v.view&&v.paymentStep===f.Vv.CONFIRM_PAY&&v.billingPeriod!==f.tY.STUDENT&&i.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:k,teamId:e??void 0}),C(!1)}else C(!1)}},[a,P,g,I,e,N,A,O,v,M,t,k]),(0,s.useEffect)(()=>()=>{e&&b(a,e)},[a,e]),A}),b=(0,v.Do)((e,t)=>{let a=h.Xw.loadingKeyForPayload({teamId:t});e(p.yH({key:a}))});function A(e){e(x.qU({cartSelections:{countBySeatType:g.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function w(e){e(x.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(x.js({numDesignEditors:0})),e(x.Az({numWhiteboardEditors:0}))}},6817:(e,t,a)=>{a.d(t,{s:()=>m,K:()=>u});var s=a(104076),r=a(652539),i=a(236631),n=a(659062),l=a(111297),d=a(809027),o=a(97605);let c=e=>e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99;function m(e){return(0,s.jsxs)("div",{className:i.s.flex.itemsCenter.$,children:[(0,s.jsxs)("div",{className:"seat_counter--seatCounter--DiuEb",children:[(0,s.jsx)(l.$z,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--e0dEs",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:d.A})}),(0,s.jsx)("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--pOPr1",onFocus:e=>e.target.select()}),(0,s.jsx)(l.$z,{disabled:e.numSeats>=c(e),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ZEWEz",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:o.A})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"seat_counter--headerText--xIHXf",children:e.headerText}),e.headerSubText&&(0,s.jsx)("div",{className:"seat_counter--headerSubText--c9SXC seat_counter--headerText--xIHXf",children:e.headerSubText}),e.clarificationText&&(0,s.jsx)("span",{style:n.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$,children:e.clarificationText})]})]})}function u(e,t){return a=>{if(""===a.target.value){e(0);return}let s=parseInt(a.target.value);isNaN(s)||(s>99?e(99):t&&s>t?e(t):e(s))}}},99725:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(104076),r=a(716976);class i extends r.Component{render(){return(0,s.jsxs)("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32},children:[(0,s.jsx)("div",{className:"persisted_error--sideBar--C-abH"}),(0,s.jsx)("div",{className:"persisted_error--message--EiciR",children:this.props.message})]})}}},640718:(e,t,a)=>{a.d(t,{o:()=>n});var s=a(104076),r=a(716976);if(443==a.j)var i=a(419822);function n(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.k,{}),children:e.children})}},106141:(e,t,a)=>{a.d(t,{R:()=>r});var s=a(716976);function r(){let[e,t]=s.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}},480795:(e,t,a)=>{a.d(t,{z:()=>i});var s=a(716976),r=a(104076);let i=(0,s.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M17.523 12.036a.5.5 0 0 1 .449.546A5.999 5.999 0 0 1 7 15.315V17.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H8.002q.066.089.137.175a5 5 0 0 0 8.838-2.69.5.5 0 0 1 .546-.45M17.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1h1.498a5 5 0 0 0-8.975 2.515.5.5 0 1 1-.995-.097A6 6 0 0 1 17 8.684V6.5a.5.5 0 0 1 .5-.5"})})})}}]);

//# debugId=2f85f688-3a7d-5b3d-a8aa-490f912d6faa

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c698db7e4e88aa766ab6a819e369092d506e1c06/c5e2cae0-85bf03739b153899.min.js.map